import{a as hn}from"./pretix-eth-5-chunk-DXCPTJLA.js";import{B as xn,C as Qe,I as bn,J as gn,K as ie,N as wn,a as A,c as cn,i as mn,k as Ze,m as yn,o as dn,w as fn,y as ln}from"./pretix-eth-5-chunk-G6JA5WON.js";import{b as Pn}from"./pretix-eth-5-chunk-RYOKWQSX.js";import{$b as un,Ca as sn,Da as on,Ea as pn,G as l,M as C,V as H,_ as Xe,ca as en,ia as tn,l as m,na as ae,oa as nn,pa as rn,sa as kt,ta as an,x as T,z as re}from"./pretix-eth-5-chunk-ZCL5HT24.js";import{b as et,i as On,p as vn,t as Bn,u as tt}from"./pretix-eth-5-chunk-FGY2DBJP.js";import{d as ke}from"./pretix-eth-5-chunk-BIK4PATU.js";var z={};ke(z,{IntegerOutOfRangeError:()=>pt,InvalidHexBooleanError:()=>ut,InvalidHexTypeError:()=>$e,InvalidHexValueError:()=>Ne,InvalidLengthError:()=>_t,SizeExceedsPaddingSizeError:()=>je,SizeOverflowError:()=>Ve,SliceOffsetOutOfBoundsError:()=>oe,assert:()=>Mn,concat:()=>R,from:()=>ce,fromBoolean:()=>Ir,fromBytes:()=>g,fromNumber:()=>O,fromString:()=>ct,isEqual:()=>Dr,padLeft:()=>Kt,padRight:()=>at,random:()=>Cr,size:()=>E,slice:()=>S,toBigInt:()=>it,toBoolean:()=>Lr,toBytes:()=>zr,toNumber:()=>zn,toString:()=>kr,trimLeft:()=>_e,trimRight:()=>Hr,validate:()=>mt});var An="0.1.1";function En(){return An}var d=class e extends Error{constructor(t,n={}){let r=(()=>{if(n.cause instanceof e){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${a??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${s}`:void 0]:[]].filter(p=>typeof p=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${En()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=a,this.shortMessage=t}walk(t){return Sn(this,t)}};function Sn(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Sn(e.cause,t):t?null:e}var Ar="#__bigint";function F(e,t,n){return JSON.stringify(e,(r,a)=>typeof t=="function"?t(r,a):typeof a=="bigint"?a.toString()+Ar:a,n)}function Re(e,t){if(j(e)>t)throw new nt({givenSize:j(e),maxSize:t})}function Tn(e,t){if(typeof t=="number"&&t>0&&t>j(e)-1)throw new Me({offset:t,position:"start",size:j(e)})}function Gn(e,t,n){if(typeof t=="number"&&typeof n=="number"&&j(e)!==n-t)throw new Me({offset:n,position:"end",size:j(e)})}var L={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ft(e){if(e>=L.zero&&e<=L.nine)return e-L.zero;if(e>=L.A&&e<=L.F)return e-(L.A-10);if(e>=L.a&&e<=L.f)return e-(L.a-10)}function Un(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new rt({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let i=0;i<r;i++){let s=n==="right";a[s?i:r-i-1]=e[s?i:e.length-i-1]}return a}function In(e,t={}){let{dir:n="left"}=t,r=e,a=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r}function $(e,t){if(E(e)>t)throw new Ve({givenSize:E(e),maxSize:t})}function Cn(e,t){if(typeof t=="number"&&t>0&&t>E(e)-1)throw new oe({offset:t,position:"start",size:E(e)})}function Hn(e,t,n){if(typeof t=="number"&&typeof n=="number"&&E(e)!==n-t)throw new oe({offset:n,position:"end",size:E(e)})}function Rt(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;let a=e.replace("0x","");if(a.length>r*2)throw new je({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Mt(e,t={}){let{dir:n="left"}=t,r=e.replace("0x",""),a=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r==="0"?"0x":n==="right"&&r.length%2===1?`0x${r}0`:`0x${r}`}var Er=new TextEncoder;function Sr(e){if(!(e instanceof Uint8Array)){if(!e)throw new pe(e);if(typeof e!="object")throw new pe(e);if(!("BYTES_PER_ELEMENT"in e))throw new pe(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new pe(e)}}function st(...e){let t=0;for(let r of e)t+=r.length;let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let i=e[r];n.set(i,a),a+=i.length}return n}function ue(e){return e instanceof Uint8Array?e:typeof e=="string"?v(e):Vt(e)}function Vt(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function v(e,t={}){let{size:n}=t,r=e;n&&($(e,n),r=at(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let i=a.length/2,s=new Uint8Array(i);for(let o=0,p=0;o<i;o++){let u=Ft(a.charCodeAt(p++)),y=Ft(a.charCodeAt(p++));if(u===void 0||y===void 0)throw new d(`Invalid byte sequence ("${a[p-2]}${a[p-1]}" in "${a}").`);s[o]=u*16+y}return s}function jt(e,t){let n=O(e,t);return v(n)}function ot(e,t={}){let{size:n}=t,r=Er.encode(e);return typeof n=="number"?(Re(r,n),Tr(r,n)):r}function Tr(e,t){return Un(e,{dir:"right",size:t})}function kn(e){return crypto.getRandomValues(new Uint8Array(e))}function j(e){return e.length}function $t(e,t,n,r={}){let{strict:a}=r;Tn(e,t);let i=e.slice(t,n);return a&&Gn(i,t,n),i}function Nt(e,t={}){let{size:n}=t;typeof n<"u"&&Re(e,n);let r=g(e,t);return it(r,t)}function Fn(e){return In(e,{dir:"right"})}function Rn(e){try{return Sr(e),!0}catch{return!1}}var pe=class extends d{constructor(t){super(`Value \`${typeof t=="object"?F(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}},nt=class extends d{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Me=class extends d{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},rt=class extends d{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var Gr=new TextEncoder,Ur=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mn(e,t={}){let{strict:n=!1}=t;if(!e)throw new $e(e);if(typeof e!="string")throw new $e(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Ne(e);if(!e.startsWith("0x"))throw new Ne(e)}function R(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ce(e){return e instanceof Uint8Array?g(e):Array.isArray(e)?g(new Uint8Array(e)):e}function Ir(e,t={}){let n=`0x${Number(e)}`;return typeof t.size=="number"?($(n,t.size),Kt(n,t.size)):n}function g(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=Ur[e[a]];let r=`0x${n}`;return typeof t.size=="number"?($(r,t.size),at(r,t.size)):r}function O(e,t={}){let{signed:n,size:r}=t,a=BigInt(e),i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){let u=typeof e=="bigint"?"n":"";throw new pt({max:i?`${i}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}let p=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Kt(p,r):p}function ct(e,t={}){return g(Gr.encode(e),t)}function Dr(e,t){return On(v(e),v(t))}function Kt(e,t){return Rt(e,{dir:"left",size:t})}function at(e,t){return Rt(e,{dir:"right",size:t})}function Cr(e){return g(kn(e))}function S(e,t,n,r={}){let{strict:a}=r;Cn(e,t);let i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Hn(i,t,n),i}function E(e){return Math.ceil((e.length-2)/2)}function _e(e){return Mt(e,{dir:"left"})}function Hr(e){return Mt(e,{dir:"right"})}function it(e,t={}){let{signed:n}=t;t.size&&$(e,t.size);let r=BigInt(e);if(!n)return r;let a=(e.length-2)/2,i=(1n<<BigInt(a)*8n)-1n,s=i>>1n;return r<=s?r:r-i-1n}function Lr(e,t={}){t.size&&$(e,t.size);let n=_e(e);if(n==="0x")return!1;if(n==="0x1")return!0;throw new ut(e)}function zr(e,t={}){return v(e,t)}function zn(e,t={}){let{signed:n,size:r}=t;return Number(!n&&!r?e:it(e,t))}function kr(e,t={}){let{size:n}=t,r=v(e);return n&&(Re(r,n),r=Fn(r)),new TextDecoder().decode(r)}function mt(e,t={}){let{strict:n=!1}=t;try{return Mn(e,{strict:n}),!0}catch{return!1}}var pt=class extends d{constructor({max:t,min:n,signed:r,size:a,value:i}){super(`Number \`${i}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},ut=class extends d{constructor(t){super(`Hex value \`"${t}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}},$e=class extends d{constructor(t){super(`Value \`${typeof t=="object"?F(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Ne=class extends d{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},_t=class extends d{constructor(t){super(`Hex value \`"${t}"\` is an odd length (${t.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}},Ve=class extends d{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},oe=class extends d{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},je=class extends d{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};var We={};ke(We,{InvalidCompressedPrefixError:()=>dt,InvalidError:()=>yt,InvalidPrefixError:()=>Ke,InvalidSerializedSizeError:()=>lt,InvalidUncompressedPrefixError:()=>ft,assert:()=>xt,compress:()=>Fr,from:()=>N,fromBytes:()=>Vn,fromHex:()=>Wt,toBytes:()=>Jt,toHex:()=>bt,validate:()=>Rr});function xt(e,t={}){let{compressed:n}=t,{prefix:r,x:a,y:i}=e;if(n===!1||typeof a=="bigint"&&typeof i=="bigint"){if(r!==4)throw new Ke({prefix:r,cause:new ft});return}if(n===!0||typeof a=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new Ke({prefix:r,cause:new dt});return}throw new yt({publicKey:e})}function Fr(e){let{x:t,y:n}=e;return{prefix:n%2n===0n?2:3,x:t}}function N(e){let t=(()=>{if(mt(e))return Wt(e);if(Rn(e))return Vn(e);let{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return xt(t),t}function Vn(e){return Wt(g(e))}function Wt(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new lt({publicKey:e});if(e.length===130){let r=BigInt(S(e,0,32)),a=BigInt(S(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){let r=Number(S(e,0,1)),a=BigInt(S(e,1,33)),i=BigInt(S(e,33,65));return{prefix:r,x:a,y:i}}let t=Number(S(e,0,1)),n=BigInt(S(e,1,33));return{prefix:t,x:n}}function Jt(e,t={}){return v(bt(e,t))}function bt(e,t={}){xt(e);let{prefix:n,x:r,y:a}=e,{includePrefix:i=!0}=t;return R(i?O(n,{size:1}):"0x",O(r,{size:32}),typeof a=="bigint"?O(a,{size:32}):"0x")}function Rr(e,t={}){try{return xt(e,t),!0}catch{return!1}}var yt=class extends d{constructor({publicKey:t}){super(`Value \`${F(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},Ke=class extends d{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},dt=class extends d{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},ft=class extends d{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},lt=class extends d{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${E(ce(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var Jn={};ke(Jn,{InvalidRError:()=>ht,InvalidSError:()=>wt,InvalidSerializedSizeError:()=>gt,InvalidVError:()=>Pt,InvalidYParityError:()=>_,MissingPropertiesError:()=>me,assert:()=>Ot,extract:()=>Mr,from:()=>Xt,fromBytes:()=>$n,fromDerBytes:()=>Vr,fromDerHex:()=>Nn,fromHex:()=>Yt,fromLegacy:()=>_n,fromRpc:()=>Kn,fromTuple:()=>jr,toBytes:()=>$r,toDerBytes:()=>Nr,toDerHex:()=>_r,toHex:()=>Wn,toLegacy:()=>Kr,toRpc:()=>Wr,toTuple:()=>Jr,vToYParity:()=>vt,validate:()=>qr,yParityToV:()=>Zt});var Aa=2n**(8n-1n)-1n,Ea=2n**(16n-1n)-1n,Sa=2n**(24n-1n)-1n,Ta=2n**(32n-1n)-1n,Ga=2n**(40n-1n)-1n,Ua=2n**(48n-1n)-1n,Ia=2n**(56n-1n)-1n,Da=2n**(64n-1n)-1n,Ca=2n**(72n-1n)-1n,Ha=2n**(80n-1n)-1n,La=2n**(88n-1n)-1n,za=2n**(96n-1n)-1n,ka=2n**(104n-1n)-1n,Fa=2n**(112n-1n)-1n,Ra=2n**(120n-1n)-1n,Ma=2n**(128n-1n)-1n,Va=2n**(136n-1n)-1n,ja=2n**(144n-1n)-1n,$a=2n**(152n-1n)-1n,Na=2n**(160n-1n)-1n,_a=2n**(168n-1n)-1n,Ka=2n**(176n-1n)-1n,Wa=2n**(184n-1n)-1n,Ja=2n**(192n-1n)-1n,qa=2n**(200n-1n)-1n,Ya=2n**(208n-1n)-1n,Xa=2n**(216n-1n)-1n,Za=2n**(224n-1n)-1n,Qa=2n**(232n-1n)-1n,ei=2n**(240n-1n)-1n,ti=2n**(248n-1n)-1n,ni=2n**(256n-1n)-1n,ri=-(2n**(8n-1n)),ai=-(2n**(16n-1n)),ii=-(2n**(24n-1n)),si=-(2n**(32n-1n)),oi=-(2n**(40n-1n)),pi=-(2n**(48n-1n)),ui=-(2n**(56n-1n)),ci=-(2n**(64n-1n)),mi=-(2n**(72n-1n)),yi=-(2n**(80n-1n)),di=-(2n**(88n-1n)),fi=-(2n**(96n-1n)),li=-(2n**(104n-1n)),xi=-(2n**(112n-1n)),bi=-(2n**(120n-1n)),gi=-(2n**(128n-1n)),hi=-(2n**(136n-1n)),wi=-(2n**(144n-1n)),Pi=-(2n**(152n-1n)),Oi=-(2n**(160n-1n)),vi=-(2n**(168n-1n)),Bi=-(2n**(176n-1n)),Ai=-(2n**(184n-1n)),Ei=-(2n**(192n-1n)),Si=-(2n**(200n-1n)),Ti=-(2n**(208n-1n)),Gi=-(2n**(216n-1n)),Ui=-(2n**(224n-1n)),Ii=-(2n**(232n-1n)),Di=-(2n**(240n-1n)),Ci=-(2n**(248n-1n)),Hi=-(2n**(256n-1n)),Li=2n**8n-1n,zi=2n**16n-1n,ki=2n**24n-1n,Fi=2n**32n-1n,Ri=2n**40n-1n,Mi=2n**48n-1n,Vi=2n**56n-1n,ji=2n**64n-1n,$i=2n**72n-1n,Ni=2n**80n-1n,_i=2n**88n-1n,Ki=2n**96n-1n,Wi=2n**104n-1n,Ji=2n**112n-1n,qi=2n**120n-1n,Yi=2n**128n-1n,Xi=2n**136n-1n,Zi=2n**144n-1n,Qi=2n**152n-1n,es=2n**160n-1n,ts=2n**168n-1n,ns=2n**176n-1n,rs=2n**184n-1n,as=2n**192n-1n,is=2n**200n-1n,ss=2n**208n-1n,os=2n**216n-1n,ps=2n**224n-1n,us=2n**232n-1n,cs=2n**240n-1n,ms=2n**248n-1n,qt=2n**256n-1n;function Ot(e,t={}){let{recovered:n}=t;if(typeof e.r>"u")throw new me({signature:e});if(typeof e.s>"u")throw new me({signature:e});if(n&&typeof e.yParity>"u")throw new me({signature:e});if(e.r<0n||e.r>qt)throw new ht({value:e.r});if(e.s<0n||e.s>qt)throw new wt({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new _({value:e.yParity})}function $n(e){return Yt(g(e))}function Yt(e){if(e.length!==130&&e.length!==132)throw new gt({signature:e});let t=BigInt(S(e,0,32)),n=BigInt(S(e,32,64)),r=(()=>{let a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return vt(a)}catch{throw new _({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Mr(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return Xt(e)}function Xt(e){let t=typeof e=="string"?Yt(e):e instanceof Uint8Array?$n(e):typeof e.r=="string"?Kn(e):e.v?_n(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return Ot(t),t}function Vr(e){return Nn(g(e))}function Nn(e){let{r:t,s:n}=tt.Signature.fromDER(ce(e).slice(2));return{r:t,s:n}}function _n(e){return{r:e.r,s:e.s,yParity:vt(e.v)}}function Kn(e){let t=(()=>{let n=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=vt(n)),typeof r!="number")throw new _({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function jr(e){let[t,n,r]=e;return Xt({r:n==="0x"?0n:BigInt(n),s:r==="0x"?0n:BigInt(r),yParity:t==="0x"?0:Number(t)})}function $r(e){return v(Wn(e))}function Wn(e){Ot(e);let t=e.r,n=e.s;return R(O(t,{size:32}),O(n,{size:32}),typeof e.yParity=="number"?O(Zt(e.yParity),{size:1}):"0x")}function Nr(e){return new tt.Signature(e.r,e.s).toDERRawBytes()}function _r(e){return`0x${new tt.Signature(e.r,e.s).toDERHex()}`}function Kr(e){return{r:e.r,s:e.s,v:Zt(e.yParity)}}function Wr(e){let{r:t,s:n,yParity:r}=e;return{r:O(t,{size:32}),s:O(n,{size:32}),yParity:r===0?"0x0":"0x1"}}function Jr(e){let{r:t,s:n,yParity:r}=e;return[r?"0x01":"0x",t===0n?"0x":_e(O(t)),n===0n?"0x":_e(O(n))]}function qr(e,t={}){try{return Ot(e,t),!0}catch{return!1}}function vt(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Pt({value:e})}function Zt(e){if(e===0)return 27;if(e===1)return 28;throw new _({value:e})}var gt=class extends d{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${E(ce(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},me=class extends d{constructor({signature:t}){super(`Signature \`${F(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},ht=class extends d{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},wt=class extends d{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},_=class extends d{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},Pt=class extends d{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};var cr={};ke(cr,{CredentialCreationFailedError:()=>M,CredentialRequestFailedError:()=>Je,createChallenge:()=>ir,createCredential:()=>na,getAuthenticatorData:()=>sr,getClientDataJSON:()=>or,getCredentialCreationOptions:()=>pr,getCredentialRequestOptions:()=>ur,getSignPayload:()=>ra,sign:()=>aa,verify:()=>ia});var Yr=new TextEncoder,Xr=new TextDecoder,Bt=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),At={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function Zr(e,t={}){let{pad:n=!0,url:r=!1}=t,a=new Uint8Array(Math.ceil(e.length/3)*4);for(let p=0,u=0;u<e.length;p+=4,u+=3){let y=(e[u]<<16)+(e[u+1]<<8)+(e[u+2]|0);a[p]=Bt[y>>18],a[p+1]=Bt[y>>12&63],a[p+2]=Bt[y>>6&63],a[p+3]=Bt[y&63]}let i=e.length%3,s=Math.floor(e.length/3)*4+(i&&i+1),o=Xr.decode(new Uint8Array(a.buffer,0,s));return n&&i===1&&(o+="=="),n&&i===2&&(o+="="),r&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function qn(e,t={}){return Zr(v(e),t)}function Et(e){let t=e.replace(/=+$/,""),n=t.length,r=new Uint8Array(n+3);Yr.encodeInto(t+"===",r);for(let i=0,s=0;i<t.length;i+=4,s+=3){let o=(At[r[i]]<<18)+(At[r[i+1]]<<12)+(At[r[i+2]]<<6)+At[r[i+3]];r[s]=o>>16,r[s+1]=o>>8&255,r[s+2]=o&255}let a=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,a)}function Xn(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Pn(ue(e));return n==="Bytes"?r:g(r)}function St(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=et(ue(e));return n==="Bytes"?r:g(r)}var Qn=vn(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Qr=Qn.create(BigInt("-3")),ea=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),K=Bn({a:Qr,b:ea,Fp:Qn,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},et),er=K;function tr(e){let{hash:t,payload:n,publicKey:r,signature:a}=e;return er.verify(a,n instanceof Uint8Array?n:v(n),bt(r).substring(2),...t?[{prehash:!0,lowS:!0}]:[])}function rr(e){let t=e[4]===0?5:4,n=t+32,r=e[n+2]===0?n+3:n+2,a=BigInt(g(e.slice(t,n))),i=BigInt(g(e.slice(r)));return{r:a,s:i>K.CURVE.n/2n?K.CURVE.n-i:i}}async function ar(e){try{let t=e.getPublicKey();if(!t)throw new M;let n=new Uint8Array(t),r=await crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),a=new Uint8Array(await crypto.subtle.exportKey("raw",r));return N(a)}catch(t){if(t.message!=="Permission denied to access object")throw t;let n=new Uint8Array(e.attestationObject),r=32,a=88,i=p=>{let u=new Uint8Array([p,a,r]);for(let y=0;y<n.length-u.length;y++)if(u.every((x,b)=>n[y+b]===x))return y+u.length;throw new M},s=i(33),o=i(34);return N(new Uint8Array([4,...n.slice(s,s+r),...n.slice(o,o+r)]))}}var ir=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function na(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...n}=e,r=pr(n);try{let a=await t(r);if(!a)throw new M;let i=a.response,s=await ar(i);return{id:a.id,publicKey:s,raw:a}}catch(a){throw new M({cause:a})}}function sr(e={}){let{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,a=St(ct(n)),i=O(t,{size:1}),s=O(r,{size:4});return R(a,i,s)}function or(e){let{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:a=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:qn(t,{url:!0,pad:!1}),origin:a,crossOrigin:n,...r})}function pr(e){let{attestation:t="none",authenticatorSelection:n={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:r=ir,excludeCredentialIds:a,name:i,rp:s={id:window.location.hostname,name:window.document.title},user:o,extensions:p}=e,u=o?.name??i;return{publicKey:{attestation:t,authenticatorSelection:n,challenge:r,...a?{excludeCredentials:a?.map(y=>({id:Et(y),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:s,user:{id:o?.id??Xn(ot(u),{as:"Bytes"}),name:u,displayName:o?.displayName??u},extensions:p}}}function ur(e){let{credentialId:t,challenge:n,rpId:r=window.location.hostname,userVerification:a="required"}=e;return{publicKey:{...t?{allowCredentials:[{id:Et(t),type:"public-key"}]}:{},challenge:v(n),rpId:r,userVerification:a}}}function ra(e){let{challenge:t,crossOrigin:n,extraClientData:r,flag:a,origin:i,rpId:s,signCount:o,userVerification:p="required"}=e,u=sr({flag:a,rpId:s,signCount:o}),y=or({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),x=St(ct(y)),b=y.indexOf('"challenge"'),c=y.indexOf('"type"'),h={authenticatorData:u,clientDataJSON:y,challengeIndex:b,typeIndex:c,userVerificationRequired:p==="required"},B=R(u,x);return{metadata:h,payload:B}}async function aa(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...n}=e,r=ur(n);try{let a=await t(r);if(!a)throw new Je;let i=a.response,s=String.fromCharCode(...new Uint8Array(i.clientDataJSON)),o=s.indexOf('"challenge"'),p=s.indexOf('"type"'),u=rr(new Uint8Array(i.signature));return{metadata:{authenticatorData:g(new Uint8Array(i.authenticatorData)),clientDataJSON:s,challengeIndex:o,typeIndex:p,userVerificationRequired:r.publicKey.userVerification==="required"},signature:u,raw:a}}catch(a){throw new Je({cause:a})}}function ia(e){let{challenge:t,hash:n=!0,metadata:r,publicKey:a,signature:i}=e,{authenticatorData:s,challengeIndex:o,clientDataJSON:p,typeIndex:u,userVerificationRequired:y}=r,x=v(s);if(x.length<37)return!1;let b=x[32];if((b&1)!==1||y&&(b&4)!==4||(b&8)!==8&&(b&16)===16)return!1;let c='"type":"webauthn.get"';if(c!==p.slice(Number(u),c.length+1))return!1;let h=p.slice(Number(o)).match(/^"challenge":"(.*?)"/);if(!h)return!1;let[B,w]=h;if(g(Et(w))!==t)return!1;let G=St(ot(p),{as:"Bytes"}),k=st(x,G);return tr({hash:n,payload:k,publicKey:a,signature:i})}var M=class extends d{constructor({cause:t}={}){super("Failed to create credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}},Je=class extends d{constructor({cause:t}={}){super("Failed to request credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}};var mr={};ke(mr,{createKeyPair:()=>sa,sign:()=>oa,verify:()=>pa});async function sa(e={}){let{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),a=N(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:a}}async function oa(e){let{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,ue(t)),a=Vt(new Uint8Array(r)),i=Nt($t(a,0,32)),s=Nt($t(a,32,64));return s>K.CURVE.n/2n&&(s=K.CURVE.n-s),{r:i,s}}async function pa(e){let{payload:t,signature:n}=e,r=await globalThis.crypto.subtle.importKey("raw",Jt(e.publicKey),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await globalThis.crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},r,st(jt(n.r),jt(n.s)),ue(t))}var ye=class extends m{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}};Object.defineProperty(ye,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});var I=class extends m{constructor({cause:t,data:n,message:r}={}){let a=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}};Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(I,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});var de=class extends m{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}};Object.defineProperty(de,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});var fe=class extends m{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}};Object.defineProperty(fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});var le=class extends m{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}};Object.defineProperty(le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});var xe=class extends m{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}};Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});var be=class extends m{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}};Object.defineProperty(be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});var ge=class extends m{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}};Object.defineProperty(ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});var he=class extends m{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}};Object.defineProperty(he,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});var we=class extends m{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}};Object.defineProperty(we,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});var Pe=class extends m{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}};Object.defineProperty(Pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});var Oe=class extends m{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}};Object.defineProperty(Oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});var ve=class extends m{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}};Object.defineProperty(ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});var W=class extends m{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}};Object.defineProperty(W,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var Be=class extends m{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}};Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});var D=class extends m{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}};Object.defineProperty(D,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(D,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});var Ae=class extends m{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}};Object.defineProperty(Ae,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});var Ee=class extends m{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}};Object.defineProperty(Ee,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});var J=class extends m{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}};Object.defineProperty(J,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});var q=class extends m{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}};Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});var Se=class extends m{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}};Object.defineProperty(Se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});var Te=class extends m{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}};Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});var Y=class extends m{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}};Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});var Ge=class extends m{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}};Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});var X=class extends m{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}};Object.defineProperty(X,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});var Ue=class extends m{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}};Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});var Ie=class extends m{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}};Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});var De=class extends m{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}};Object.defineProperty(De,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});var Ce=class extends m{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}};Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});var Z=class extends m{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}};Object.defineProperty(Z,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});var Q=class extends m{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}};Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});var ee=class extends m{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}};Object.defineProperty(ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});var te=class extends m{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}};Object.defineProperty(te,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});var Tt=class extends m{constructor({cause:t}){super(`An error occurred while executing user operation: ${t?.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}},He=class extends m{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}};Object.defineProperty(He,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});var Le=class extends m{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}};Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var Gt=class extends m{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:i,factoryData:s,initCode:o,maxFeePerGas:p,maxPriorityFeePerGas:u,nonce:y,paymaster:x,paymasterAndData:b,paymasterData:c,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:B,preVerificationGas:w,sender:G,signature:k,verificationGasLimit:ne}){let Ye=an({callData:n,callGasLimit:r,factory:i,factoryData:s,initCode:o,maxFeePerGas:typeof p<"u"&&`${kt(p)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${kt(u)} gwei`,nonce:y,paymaster:x,paymasterAndData:b,paymasterData:c,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:B,preVerificationGas:w,sender:G,signature:k,verificationGasLimit:ne});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",Ye].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Ut=class extends m{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}},It=class extends m{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}},qe=class extends m{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}};var ua=[I,W,D,J,q,Y,X,te,Z,Q,ee];function yr(e,t){let n=(e.details||"").toLowerCase();if(ye.message.test(n))return new ye({cause:e});if(de.message.test(n))return new de({cause:e});if(fe.message.test(n))return new fe({cause:e});if(le.message.test(n))return new le({cause:e});if(xe.message.test(n))return new xe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(be.message.test(n))return new be({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ge.message.test(n))return new ge({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(he.message.test(n))return new he({cause:e});if(we.message.test(n))return new we({cause:e});if(Oe.message.test(n))return new Oe({cause:e,nonce:t.nonce});if(Pe.message.test(n))return new Pe({cause:e});if(ve.message.test(n))return new ve({cause:e});if(Be.message.test(n))return new Be({cause:e});if(D.message.test(n))return new D({cause:e});if(Ae.message.test(n))return new Ae({cause:e});if(Ee.message.test(n))return new Ee({cause:e});if(Se.message.test(n))return new Se({cause:e});if(Ge.message.test(n))return new Ge({cause:e});if(Te.message.test(n))return new Te({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ue.message.test(n))return new Ue({cause:e});if(Ie.message.test(n))return new Ie({cause:e});if(Ce.message.test(n))return new Ce({cause:e});if(De.message.test(n))return new De({cause:e});if(He.message.test(n))return new He({cause:e});if(Le.message.test(n))return new Le({cause:e});let r=e.walk(a=>ua.some(i=>i.code===a.code));if(r){if(r.code===I.code)return new I({cause:e,data:r.data,message:r.details});if(r.code===W.code)return new W({cause:e});if(r.code===D.code)return new D({cause:e});if(r.code===J.code)return new J({cause:e});if(r.code===q.code)return new q({cause:e});if(r.code===Y.code)return new Y({cause:e});if(r.code===X.code)return new X({cause:e});if(r.code===te.code)return new te({cause:e});if(r.code===Z.code)return new Z({cause:e});if(r.code===Q.code)return new Q({cause:e});if(r.code===ee.code)return new ee({cause:e})}return new Tt({cause:e})}function Dt(e,{calls:t,docsPath:n,...r}){let a=(()=>{let i=yr(e,r);if(t&&i instanceof I){let s=ca(i),o=t?.filter(p=>p.abi);if(s&&o.length>0)return ma({calls:o,revertData:s})}return i})();return new Gt(a,{docsPath:n,...r})}function ca(e){let t;return e.walk(n=>{let r=n;if(typeof r.data=="string"||typeof r.data?.revertData=="string"||!(r instanceof m)&&typeof r.message=="string"){let a=(r.data?.revertData||r.data||r.message).match?.(/(0x[A-Za-z0-9]*)/);if(a)return t=a[1],!0}return!1}),t}function ma(e){let{calls:t,revertData:n}=e,{abi:r,functionName:a,args:i,to:s}=(()=>{let p=t?.filter(y=>!!y.abi);if(p.length===1)return p[0];let u=p.filter(y=>{try{return!!nn({abi:y.abi,data:n})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:p.reduce((y,x)=>`${y?`${y} | `:""}${x.functionName}`,""),args:void 0,to:void 0}})(),o=n==="0x"?new pn({functionName:a}):new on({abi:r,data:n,functionName:a});return new sn(o,{abi:r,args:i,contractAddress:s,functionName:a})}function dr(e){let t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function V(e){let t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=l(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=l(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=l(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=l(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=l(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=l(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=l(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=l(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=ya(e.authorization)),t}function ya(e){return{address:e.address,chainId:l(e.chainId),nonce:l(e.nonce),r:e.r?l(BigInt(e.r),{size:32}):T("0x",{size:32}),s:e.s?l(BigInt(e.s),{size:32}):T("0x",{size:32}),yParity:e.yParity?l(e.yParity,{size:1}):T("0x",{size:32})}}async function fr(e,t){let{chainId:n,entryPointAddress:r,context:a,...i}=t,s=V(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:p,...u}=await e.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,l(n),a]});return{...u,...o&&{paymasterPostOpGasLimit:re(o)},...p&&{paymasterVerificationGasLimit:re(p)}}}async function lr(e,t){let{chainId:n,entryPointAddress:r,context:a,...i}=t,s=V(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:p,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,l(n),a]});return{...u,...o&&{paymasterPostOpGasLimit:re(o)},...p&&{paymasterVerificationGasLimit:re(p)}}}var da=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function ze(e,t){let n=t,{account:r=e.account,parameters:a=da,stateOverride:i}=n;if(!r)throw new ie;let s=ae(r),o=e,p=n.paymaster??o?.paymaster,u=typeof p=="string"?p:void 0,{getPaymasterStubData:y,getPaymasterData:x}=(()=>{if(p===!0)return{getPaymasterStubData:f=>A(o,lr,"getPaymasterStubData")(f),getPaymasterData:f=>A(o,fr,"getPaymasterData")(f)};if(typeof p=="object"){let{getPaymasterStubData:f,getPaymasterData:P}=p;return{getPaymasterStubData:P&&f?f:P,getPaymasterData:P&&f?P:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),b=n.paymasterContext?n.paymasterContext:o?.paymasterContext,c={...n,paymaster:u,sender:s.address},[h,B,w,G,k]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(f=>{let P=f;return P.abi?{data:tn(P),to:P.to,value:P.value}:P})):n.callData)(),(async()=>{if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};let{factory:f,factoryData:P}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:f&&P?H([f,P]):void 0}:{factory:f,factoryData:P}})(),(async()=>{if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return c;if(o?.userOperation?.estimateFeesPerGas){let f=await o.userOperation.estimateFeesPerGas({account:s,bundlerClient:o,userOperation:c});return{...c,...f}}try{let f=o.client??e,P=await A(f,mn,"estimateFeesPerGas")({chain:f.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*P.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*P.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await hn(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof h<"u"&&(c.callData=h),typeof B<"u"&&(c={...c,...B}),typeof w<"u"&&(c={...c,...w}),typeof G<"u"&&(c.nonce=G),typeof k<"u"&&(c.authorization=k),a.includes("signature")&&(typeof n.signature<"u"?c.signature=n.signature:c.signature=await s.getStubSignature(c)),s.entryPoint.version==="0.6"&&!c.initCode&&(c.initCode="0x");let ne;async function Ye(){return ne||(e.chain?e.chain.id:(ne=await A(e,Ze,"getChainId")({}),ne))}let Qt=!1;if(a.includes("paymaster")&&y&&!u&&!n.paymasterAndData){let{isFinal:f=!1,sponsor:P,...Br}=await y({chainId:await Ye(),entryPointAddress:s.entryPoint.address,context:b,...c});Qt=f,c={...c,...Br}}if(s.entryPoint.version==="0.6"&&!c.paymasterAndData&&(c.paymasterAndData="0x"),a.includes("gas")){if(s.userOperation?.estimateGas){let f=await s.userOperation.estimateGas(c);c={...c,...f}}if(typeof c.callGasLimit>"u"||typeof c.preVerificationGas>"u"||typeof c.verificationGasLimit>"u"||c.paymaster&&typeof c.paymasterPostOpGasLimit>"u"||c.paymaster&&typeof c.paymasterVerificationGasLimit>"u"){let f=await A(o,Ct,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...c.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...c});c={...c,callGasLimit:c.callGasLimit??f.callGasLimit,preVerificationGas:c.preVerificationGas??f.preVerificationGas,verificationGasLimit:c.verificationGasLimit??f.verificationGasLimit,paymasterPostOpGasLimit:c.paymasterPostOpGasLimit??f.paymasterPostOpGasLimit,paymasterVerificationGasLimit:c.paymasterVerificationGasLimit??f.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&x&&!u&&!n.paymasterAndData&&!Qt){let f=await x({chainId:await Ye(),entryPointAddress:s.entryPoint.address,context:b,...c});c={...c,...f}}return delete c.calls,delete c.parameters,delete c.paymasterContext,typeof c.paymaster!="string"&&delete c.paymaster,c}async function Ct(e,t){let{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new ie;let i=n?ae(n):void 0,s=un(a),o=i?await A(e,ze,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{let p=[V(o),r??i?.entryPoint?.address],u=await e.request({method:"eth_estimateUserOperationGas",params:s?[...p,s]:[...p]});return dr(u)}catch(p){let u=t.calls;throw Dt(p,{...o,...u?{calls:u}:{}})}}function xr(e){return e.request({method:"eth_supportedEntryPoints"})}function br(e){let t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function gr(e,{hash:t}){let n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new It({hash:t});let{blockHash:r,blockNumber:a,entryPoint:i,transactionHash:s,userOperation:o}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:i,transactionHash:s,userOperation:br(o)}}function hr(e){let t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>dn(n))),e.receipt&&(t.receipt=fn(t.receipt)),t}async function Ht(e,{hash:t}){let n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ut({hash:t});return hr(n)}async function wr(e,t){let{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new ie;let a=n?ae(n):void 0,i=a?await A(e,ze,"prepareUserOperation")(t):t,s=t.signature||await a?.signUserOperation?.(i),o=V({...i,signature:s});try{return await e.request({method:"eth_sendUserOperation",params:[o,r??a?.entryPoint?.address]},{retryCount:0})}catch(p){let u=t.calls;throw Dt(p,{...i,...u?{calls:u}:{},signature:s})}}function Pr(e,t){let{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:i=12e4}=t,s=0,o=rn(["waitForUserOperationReceipt",e.uid,n]);return new Promise((p,u)=>{let y=bn(o,{resolve:p,reject:u},x=>{let b=h=>{c(),h(),y()},c=gn(async()=>{a&&s>=a&&b(()=>x.reject(new qe({hash:n})));try{let h=await A(e,Ht,"getUserOperationReceipt")({hash:n});b(()=>x.resolve(h))}catch(h){let B=h;B.name!=="UserOperationReceiptNotFoundError"&&b(()=>x.reject(B))}s++},{emitOnBegin:!0,interval:r});return i&&setTimeout(()=>b(()=>x.reject(new qe({hash:n}))),i),c})})}function Or(e){return{estimateUserOperationGas:t=>Ct(e,t),getChainId:()=>Ze(e),getSupportedEntryPoints:()=>xr(e),getUserOperation:t=>gr(e,t),getUserOperationReceipt:t=>Ht(e,t),prepareUserOperation:t=>ze(e,t),sendUserOperation:t=>wr(e,t),waitForUserOperationReceipt:t=>Pr(e,t)}}function fa(e){let{client:t,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:i,transport:s,userOperation:o}=e;return Object.assign(wn({...e,chain:e.chain??t?.chain,key:n,name:r,transport:s,type:"bundlerClient"}),{client:t,paymaster:a,paymasterContext:i,userOperation:o}).extend(Or)}var la=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Lt(e){let{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";let a=t.address;return H([a,r??"0x"])}return n?H([n,r??"0x"]):"0x"}function zt(e){let{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:i,paymasterData:s,paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:p,sender:u,signature:y="0x",verificationGasLimit:x}=e,b=H([T(l(x||0n),{size:16}),T(l(t||0n),{size:16})]),c=Lt(e),h=H([T(l(r||0n),{size:16}),T(l(a||0n),{size:16})]),B=e.nonce??0n,w=i?H([i,T(l(p||0n),{size:16}),T(l(o||0n),{size:16}),s||"0x"]):"0x",G=e.preVerificationGas??0n;return{accountGasLimits:b,callData:n,initCode:c,gasFees:h,nonce:B,paymasterAndData:w,preVerificationGas:G,sender:u,signature:y}}var xa={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function vr(e){let{chainId:t,entryPointAddress:n,userOperation:r}=e,a=zt(r);return{types:xa,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function ba(e){let{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:i,callData:s="0x",callGasLimit:o,maxFeePerGas:p,maxPriorityFeePerGas:u,nonce:y,paymasterAndData:x="0x",preVerificationGas:b,sender:c,verificationGasLimit:h}=a;if(r==="0.8")return xn(vr({chainId:t,entryPointAddress:n,userOperation:a}));let B=(()=>{if(r==="0.6"){let w=a.initCode?.slice(0,42),G=a.initCode?.slice(42),k=Lt({authorization:i,factory:w,factoryData:G});return Xe([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[c,y,C(k),C(s),o,h,b,p,u,C(x)])}if(r==="0.7"){let w=zt(a);return Xe([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[w.sender,w.nonce,C(w.initCode),C(w.callData),w.accountGasLimits,w.preVerificationGas,w.gasFees,C(w.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return C(Xe([{type:"bytes32"},{type:"address"},{type:"uint256"}],[C(B),n,BigInt(t)]))}async function ga(e){let{extend:t,nonceKeyManager:n=ln({source:{get(){return Date.now()},set(){}}}),...r}=e,a=!1,i=await e.getAddress();return{...t,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(s){let o=s?.key??BigInt(await n.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...s,key:o}):await cn(e.client,{abi:en(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,o]})},async isDeployed(){return a?!0:(a=!!await A(e.client,yn,"getCode")({address:i}),a)},...e.sign?{async sign(s){let[{factory:o,factoryData:p},u]=await Promise.all([this.getFactoryArgs(),e.sign(s)]);return o&&p?Qe({address:o,data:p,signature:u}):u}}:{},async signMessage(s){let[{factory:o,factoryData:p},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(s)]);return o&&p&&o!=="0x7702"?Qe({address:o,data:p,signature:u}):u},async signTypedData(s){let[{factory:o,factoryData:p},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(s)]);return o&&p&&o!=="0x7702"?Qe({address:o,data:p,signature:u}):u},type:"smart"}}var ha="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";export{la as a,ba as b,ga as c,fa as d,ha as e,z as f,We as g,Yt as h,Jn as i,cr as j,mr as k};
/*! Bundled license information:

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
