import{$ as Go,A as ve,Aa as tc,B as Ie,Ba as rc,C as Da,Ca as nc,D as Oe,Da as oc,E as $e,Ea as sc,F as Vo,Fa as $t,G as Yo,Ga as ic,H as xr,Ha as ac,I as _a,Ia as St,J as U,Ja as Pt,K as be,Ka as cc,L as pn,La as uc,M as Z,Ma as dc,N as _,Na as fc,O as J,P as We,Q as It,R as L,S as $,T as Fo,U as wr,V as Et,W as Ee,X as Na,Y as mn,Z as Zo,_ as Qo,a as da,aa as Ca,ba as Jo,c as za,ca as Ha,d as q,da as Xo,e as G,ea as es,f as Ra,fa as ts,g as D,ga as rs,h as Uo,ha as Ua,i as qt,ia as ns,j as br,ja as Ka,k as fn,ka as qa,l as Ko,la as La,m as Le,ma as $a,n as qo,na as Wa,o as Lt,oa as Va,p as Lo,pa as Ya,q as pe,qa as Fa,r as ln,ra as Za,s as $o,sa as Ar,t as wt,ta as hn,u as Oa,ua as yn,v as At,va as Qa,w as Ta,wa as Ga,x as vt,xa as Ja,y as Wo,ya as Xa,z as ja,za as ec}from"./pretix-eth-5-chunk-K2KKTN4B.js";import{a as fa,b as la,c as pa,d as gr,e as ma,f as ha,g as ya,i as ga,j as ba,k as xa,l as wa,n as Aa}from"./pretix-eth-5-chunk-5HE44PJF.js";import{a as va,b as Ia,d as Ea,e as Sa}from"./pretix-eth-5-chunk-VE2WZLWK.js";import{a as Pa,b as ka,c as Ma,d as Ba}from"./pretix-eth-5-chunk-AHVGFHZN.js";import"./pretix-eth-5-chunk-DXCPTJLA.js";import{A as na,B as oa,E as sa,F as ia,G as gt,H as aa,M as bt,N as dn,P as ca,R as ua,S as xt,b as ta,l as yr,p as ra,v as Ho}from"./pretix-eth-5-chunk-G6JA5WON.js";import{O as Co,l as un,oa as ea,w as No}from"./pretix-eth-5-chunk-ZCL5HT24.js";import"./pretix-eth-5-chunk-ERWRNXFQ.js";import"./pretix-eth-5-chunk-UYVEV2Z2.js";import{c as af,d as cf,f as uf}from"./pretix-eth-5-chunk-BIK4PATU.js";var hc=af((xm,ss)=>{"use strict";var ff=Object.prototype.hasOwnProperty,ae="~";function vr(){}Object.create&&(vr.prototype=Object.create(null),new vr().__proto__||(ae=!1));function lf(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function mc(e,t,r,n,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new lf(r,n||e,o),i=ae?ae+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function gn(e,t){--e._eventsCount===0?e._events=new vr:delete e._events[t]}function ne(){this._events=new vr,this._eventsCount=0}ne.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)ff.call(r,n)&&t.push(ae?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};ne.prototype.listeners=function(t){var r=ae?ae+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,i=new Array(s);o<s;o++)i[o]=n[o].fn;return i};ne.prototype.listenerCount=function(t){var r=ae?ae+t:t,n=this._events[r];return n?n.fn?1:n.length:0};ne.prototype.emit=function(t,r,n,o,s,i){var u=ae?ae+t:t;if(!this._events[u])return!1;var a=this._events[u],c=arguments.length,d,f;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,r),!0;case 3:return a.fn.call(a.context,r,n),!0;case 4:return a.fn.call(a.context,r,n,o),!0;case 5:return a.fn.call(a.context,r,n,o,s),!0;case 6:return a.fn.call(a.context,r,n,o,s,i),!0}for(f=1,d=new Array(c-1);f<c;f++)d[f-1]=arguments[f];a.fn.apply(a.context,d)}else{var l=a.length,m;for(f=0;f<l;f++)switch(a[f].once&&this.removeListener(t,a[f].fn,void 0,!0),c){case 1:a[f].fn.call(a[f].context);break;case 2:a[f].fn.call(a[f].context,r);break;case 3:a[f].fn.call(a[f].context,r,n);break;case 4:a[f].fn.call(a[f].context,r,n,o);break;default:if(!d)for(m=1,d=new Array(c-1);m<c;m++)d[m-1]=arguments[m];a[f].fn.apply(a[f].context,d)}}return!0};ne.prototype.on=function(t,r,n){return mc(this,t,r,n,!1)};ne.prototype.once=function(t,r,n){return mc(this,t,r,n,!0)};ne.prototype.removeListener=function(t,r,n,o){var s=ae?ae+t:t;if(!this._events[s])return this;if(!r)return gn(this,s),this;var i=this._events[s];if(i.fn)i.fn===r&&(!o||i.once)&&(!n||i.context===n)&&gn(this,s);else{for(var u=0,a=[],c=i.length;u<c;u++)(i[u].fn!==r||o&&!i[u].once||n&&i[u].context!==n)&&a.push(i[u]);a.length?this._events[s]=a.length===1?a[0]:a:gn(this,s)}return this};ne.prototype.removeAllListeners=function(t){var r;return t?(r=ae?ae+t:t,this._events[r]&&gn(this,r)):(this._events=new vr,this._eventsCount=0),this};ne.prototype.off=ne.prototype.removeListener;ne.prototype.addListener=ne.prototype.on;ne.prefixed=ae;ne.EventEmitter=ne;typeof ss<"u"&&(ss.exports=ne)});var os={};cf(os,{arbitrum:()=>la,arbitrumSepolia:()=>pa,base:()=>gr,baseSepolia:()=>ma,bsc:()=>ha,celo:()=>ya,mainnet:()=>ga,optimism:()=>ba,optimismSepolia:()=>xa,polygon:()=>wa,sepolia:()=>Aa});var lc=[gr,...Object.values(os).filter(e=>e.id!==gr.id)],pc=fa,ym=Ho({...pc,id:31338}),gm=Ho({...pc,id:31339});var is=uf(hc(),1);function yc(e,t={}){let{raw:r=!1}=t,n=e;if(r)return e;if(n.error)throw as(n.error);return n.result}function as(e){let t=e;if(t instanceof Error&&!("code"in t))return new Ve({cause:t,data:t,message:t.message,stack:t.stack});let{code:r}=t;return r===Ve.code?new Ve(t):r===Ir.code?new Ir(t):r===Ze.code?new Ze(t):r===Mr.code?new Mr(t):r===Pr.code?new Pr(t):r===Br.code?new Br(t):r===Fe.code?new Fe(t):r===zr.code?new zr(t):r===Er.code?new Er(t):r===Sr.code?new Sr(t):r===Ye.code?new Ye(t):r===kr.code?new kr(t):new Ve({cause:t instanceof Error?t:void 0,data:t,message:t.message,stack:t instanceof Error?t.stack:void 0})}var me=class extends Error{constructor(t){let{cause:r,code:n,message:o,data:s,stack:i}=t;super(o,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=r,this.code=n,this.data=s,this.stack=i??""}},Ir=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Missing or invalid parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}};Object.defineProperty(Ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});var Er=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Requested resource not found."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}};Object.defineProperty(Er,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});var Sr=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Requested resource not available."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}};Object.defineProperty(Sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});var Ye=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Transaction creation failed."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}};Object.defineProperty(Ye,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});var Fe=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Method is not implemented."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}};Object.defineProperty(Fe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});var Pr=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Rate limit exceeded."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}};Object.defineProperty(Pr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});var kr=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"JSON-RPC version not supported."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}};Object.defineProperty(kr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});var Mr=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Input is not a valid JSON-RPC request."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}};Object.defineProperty(Mr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});var Br=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Method does not exist."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}};Object.defineProperty(Br,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});var Ze=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Invalid method parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}};Object.defineProperty(Ze,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var Ve=class e extends me{constructor(t={}){super({cause:t.cause,code:e.code,data:t.data,message:t.message??"Internal JSON-RPC error.",stack:t.stack}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalError"})}};Object.defineProperty(Ve,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});var zr=class e extends me{constructor(t={}){super({code:e.code,data:t.data,message:t.message??"Failed to parse JSON-RPC response."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}};Object.defineProperty(zr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});var ce=class extends Error{constructor(t,r){super(r),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=r}},Se=class extends ce{constructor({message:t="The user rejected the request."}={}){super(4001,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}};Object.defineProperty(Se,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});var V=class extends ce{constructor({message:t="The requested method and/or account has not been authorized by the user."}={}){super(4100,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}};Object.defineProperty(V,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});var Qe=class extends ce{constructor({message:t="The provider does not support the requested method."}={}){super(4200,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}};Object.defineProperty(Qe,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});var Y=class extends ce{constructor({message:t="The provider is disconnected from all chains."}={}){super(4900,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}};Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});var Pe=class extends ce{constructor({message:t="The provider is not connected to the requested chain."}={}){super(4901,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}};Object.defineProperty(Pe,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});var Or=class extends ce{constructor({message:t="An error occurred when attempting to switch chain."}={}){super(4902,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.SwitchChainError"})}};Object.defineProperty(Or,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var Tr=class extends ce{constructor({message:t="This Wallet does not support a capability that was not marked as optional."}={}){super(5700,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedNonOptionalCapabilityError"})}};Object.defineProperty(Tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});var kt=class extends ce{constructor({message:t="This Wallet does not support the requested chain ID."}={}){super(5710,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedChainIdError"})}};Object.defineProperty(kt,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});var jr=class extends ce{constructor({message:t="There is already a bundle submitted with this ID."}={}){super(5720,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DuplicateIdError"})}};Object.defineProperty(jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});var Ge=class extends ce{constructor({message:t="This bundle id is unknown / has not been submitted."}={}){super(5730,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnknownBundleIdError"})}};Object.defineProperty(Ge,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});var Dr=class extends ce{constructor({message:t="The call bundle is too large for the Wallet to process."}={}){super(5740,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.BundleTooLargeError"})}};Object.defineProperty(Dr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});var _r=class extends ce{constructor({message:t="The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."}={}){super(5750,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicReadyWalletRejectedUpgradeError"})}};Object.defineProperty(_r,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});var Nr=class extends ce{constructor({message:t="The wallet does not support atomic execution but the request requires it."}={}){super(5760,t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicityNotSupportedError"})}};Object.defineProperty(Nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});function gc(){let e=new is.default;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}function bn(e,t={}){let{includeEvents:r=!0}=t;if(!e)throw new cs;return{...r?{on:e.on?.bind(e),removeListener:e.removeListener?.bind(e)}:{},async request(n){try{let o=await e.request(n);return o&&typeof o=="object"&&"jsonrpc"in o?yc(o):o}catch(o){throw us(o)}}}}function us(e){let t=as(e);if(t instanceof Ve){if(!t.data)return t;let{code:r}=t.data;if(r===Y.code)return new Y(t);if(r===Pe.code)return new Pe(t);if(r===Se.code)return new Se(t);if(r===V.code)return new V(t);if(r===Qe.code)return new Qe(t);if(r===Or.code)return new Or(t);if(r===_r.code)return new _r(t);if(r===Nr.code)return new Nr(t);if(r===Dr.code)return new Dr(t);if(r===Ge.code)return new Ge(t);if(r===jr.code)return new jr(t);if(r===kt.code)return new kt(t);if(r===Tr.code)return new Tr(t)}return t}var cs=class extends D{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}};var bc=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype&&"isVisible"in IntersectionObserverEntry.prototype;function mf(e={}){let{prefix:t="[Porto]"}=e,r=new Set;return{error:Wt(console.error,{prefix:t}),errorOnce:Wt(console.error,{memo:r,prefix:t}),log:Wt(console.log,{prefix:t}),logOnce:Wt(console.log,{memo:r,prefix:t}),warn:Wt(console.warn,{prefix:t}),warnOnce:Wt(console.warn,{memo:r,prefix:t})}}var ds=mf();function Wt(e,t={}){let{memo:r,prefix:n}=t;return(...o)=>{let s=o.join(" ");r?.has(s)||(r?.add(s),e(`${n} ${s}`))}}function xc(){let e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")}function wc(){let e=navigator.userAgent.toLowerCase();return(e.includes("firefox")||e.includes("fxios"))&&!e.includes("seamonkey")}function Ac(){return window.navigator?.userAgentData?.mobile?!0:navigator.maxTouchPoints>1||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4))}function vc(){let e=()=>{},t=()=>{};return{promise:new Promise((n,o)=>{e=n,t=o}),reject:t,resolve:e}}function Te(e){if(Array.isArray(e))return e.map(Te);if(typeof e=="function")return;if(typeof e!="object"||e===null)return e;if(Object.getPrototypeOf(e)!==Object.prototype)try{return structuredClone(e)}catch{return}let t={};for(let[r,n]of Object.entries(e))t[r]=Te(n);return t}function wn(e,t){let r=[],n=new Set;for(let o of e){let s=t(o);n.has(s)||(n.add(s),r.push(o))}return r}function Cr(e,t={}){let{targetOrigin:r}=t,n=new Map;return{destroy(){for(let o of n.values())e.removeEventListener("message",o)},on(o,s,i){function u(a){a.data.topic===o&&(i&&a.data.id!==i||r&&a.origin!==r||s(a.data.payload,a))}return e.addEventListener("message",u),n.set(o,u),()=>e.removeEventListener("message",u)},async send(o,s,i){let u=globalThis.crypto.randomUUID();return e.postMessage(Te({id:u,payload:s,topic:o}),i??r??"*"),{id:u,payload:s,topic:o}},async sendAsync(o,s,i){let{id:u}=await this.send(o,s,i);return new Promise(a=>this.on(o,a,u))}}}function fs(e){let{from:t,to:r,waitForReady:n=!1}=e,o=!1,s=vc();t.on("ready",s.resolve);let i={destroy(){t.destroy(),r.destroy(),o&&s.reject()},on(u,a,c){return t.on(u,a,c)},async send(u,a){return o=!0,n&&await s.promise.finally(()=>o=!1),r.send(u,a)},async sendAsync(u,a){return o=!0,n&&await s.promise.finally(()=>o=!1),r.sendAsync(u,a)}};return{...i,ready(u){i.send("ready",u)},waitForReady(){return s.promise}}}var In={local:"http://localhost:5175/dialog/",prod:"https://id.porto.sh/dialog",stg:"https://stg.id.porto.sh/dialog"};function Ic(e={}){let{skipProtocolCheck:t,skipUnsupported:r}=e,n=o=>!r&&xc()&&o?.some(s=>["wallet_connect","eth_requestAccounts"].includes(s.method));return typeof window>"u"?Ec():{name:"iframe",setup(o){let{host:s,internal:i,theme:u,themeController:a}=o,{store:c}=i,d=bf().setup(o),f=!1,l=new URL(s),m=document.createElement("dialog");m.dataset.porto="",m.setAttribute("role","dialog"),m.setAttribute("aria-closed","true"),m.setAttribute("aria-label","Porto Wallet"),m.setAttribute("hidden","until-found"),Object.assign(m.style,{background:"transparent",border:"0",outline:"0",padding:"0",position:"fixed"}),document.body.appendChild(m);let h=document.createElement("iframe");h.setAttribute("data-testid","porto");let p=[`publickey-credentials-get ${l.origin}`,`publickey-credentials-create ${l.origin}`];wc()||p.push("clipboard-write"),h.setAttribute("allow",p.join("; ")),h.setAttribute("tabindex","0"),h.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"),h.setAttribute("src",ls(s)),h.setAttribute("title","Porto"),Object.assign(h.style,{backgroundColor:"transparent",border:"0",colorScheme:"light dark",height:"100%",left:"0",position:"fixed",top:"0",width:"100%"});let b=document.createElement("style");b.innerHTML=`
        dialog[data-porto]::backdrop {
          background: transparent!important;
        }
      `,m.appendChild(b),m.appendChild(h);let w=fs({from:Cr(window,{targetOrigin:l.origin}),to:Cr(h.contentWindow,{targetOrigin:l.origin}),waitForReady:!0});a?._setup(w,!0);let A=window.matchMedia("(max-width: 460px)"),g=()=>{w.send("__internal",{type:"resize",width:A.matches?460:461})};A.addEventListener("change",g),w.on("ready",E=>{let O=o.internal.store.getState().chainIds.filter(j=>E.chainIds.includes(j));O.length===0&&(O=E.chainIds),c.setState(j=>({...j,chainIds:O})),w.send("__internal",{chainIds:O,mode:"iframe",referrer:An(),theme:u,type:"init"}),g()}),w.on("rpc-response",E=>{if(n([E._request])){let M=h.src;h.src=M}Pc(c,E)}),w.on("__internal",E=>{E.type==="switch"&&E.mode==="popup"&&(d.open(),d.syncRequests(c.getState().requestQueue))});let y=null,x=null,v=()=>vn(c),I=E=>{E.key==="Escape"&&vn(c)},P=new MutationObserver(E=>{for(let M of E){if(M.type!=="attributes")continue;let O=M.attributeName;O&&O==="inert"&&m.removeAttribute(O)}});P.observe(m,{attributeOldValue:!0,attributes:!0});let k=!1,S=()=>{k&&(k=!1,m.removeEventListener("click",v),document.removeEventListener("keydown",I),m.style.pointerEvents="none",x?.focus(),x=null,Object.assign(document.body.style,y??""),document.body.style.overflow=y?.overflow??"")},B=()=>{k||(k=!0,m.addEventListener("click",v),document.addEventListener("keydown",I),h.focus(),m.style.pointerEvents="auto",y=Object.assign({},document.body.style),document.body.style.overflow="hidden")},R=!1,z=()=>{R||(R=!0,document.activeElement instanceof HTMLElement&&(x=document.activeElement),m.removeAttribute("hidden"),m.removeAttribute("aria-closed"),m.showModal())},T=()=>{if(R){R=!1,m.setAttribute("hidden","true"),m.setAttribute("aria-closed","true"),m.close();for(let E of m.parentNode?Array.from(m.parentNode.children):[])E!==m&&E.hasAttribute("inert")&&E.removeAttribute("inert")}};return{close(){d.close(),f=!1,w.send("__internal",{mode:"iframe",referrer:An(),type:"init"}),T(),S()},destroy(){d.close(),f=!1,S(),T(),d.destroy(),w.destroy(),m.remove(),P.disconnect(),A.removeEventListener("change",g)},open(){f||(f=!0,z(),B(),w.send("__internal",{mode:"iframe",referrer:An(),type:"init"}))},async secure(){let{trustedHosts:E}=await w.waitForReady(),M=(()=>{if(t)return!0;let C=window.location.protocol.startsWith("https");return C||ds.warnOnce("Detected insecure protocol (HTTP).",`

The Porto iframe is not supported on HTTP origins (${window.location.origin})`,"due to lack of WebAuthn support.","See https://porto.sh/sdk#secure-origins-https for more information."),C})(),O=bc(),j=!!E?.includes(window.location.hostname),N=!!(O||j);return N||ds.warnOnce([`Warning: Browser does not support IntersectionObserver v2 or host "${l.hostname}" is not trusted by Porto.`,"This may result in the dialog falling back to a popup.","",`Add "${l.hostname}" to the trusted hosts list to enable iframe dialog: https://github.com/ithacaxyz/porto/edit/main/src/trusted-hosts.ts`].join(`
`)),{frame:N,host:j,protocol:M}},async syncRequests(E){let{methodPolicies:M}=await w.waitForReady(),O=await this.secure(),j=E?.every(C=>M?.find(H=>H.method===C.request.method)?.modes?.headless===!0),N=n(E.map(C=>C.request));if(!j&&(N||!O.protocol||!O.frame))d.syncRequests(E);else{let C=E.some(H=>Sc(H.request,{methodPolicies:M,targetOrigin:l.origin}));!f&&C&&this.open(),w.send("rpc-requests",E)}}}},supportsHeadless:!0}}function bf(e={}){if(typeof window>"u")return Ec();let{type:t="auto",size:r=xf}=e;return{name:"popup",setup(n){let{host:o,internal:s,themeController:i}=n,{store:u}=s,a=new URL(o),c=null,d=t==="page"||t==="auto"&&Ac()?"page":"popup";function f(){c&&vn(u)}let l=(()=>{let h=setInterval(()=>{c?.closed&&vn(u)},100);return()=>clearInterval(h)})(),m;return i?._setup(null,!0),{close(){c&&(c.close(),c=null)},destroy(){this.close(),window.removeEventListener("focus",f),m?.destroy(),l()},open(){if(d==="popup"){let h=(window.innerWidth-r.width)/2+window.screenX,p=window.screenY+100;c=window.open(ls(o),"_blank",`width=${r.width},height=${r.height},left=${h},top=${p}`)}else c=window.open(ls(o),"_blank");if(!c)throw new Error("Failed to open popup");m=fs({from:Cr(window,{targetOrigin:a.origin}),to:Cr(c,{targetOrigin:a.origin}),waitForReady:!0}),i?._setup(m,!1),m.send("__internal",{mode:d==="page"?"page":"popup",referrer:An(),theme:i?.getTheme()??n.theme,type:"init"}),m.on("rpc-response",h=>Pc(u,h)),window.removeEventListener("focus",f),window.addEventListener("focus",f)},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(h){h.some(b=>Sc(b.request))&&((!c||c.closed)&&this.open(),c?.focus()),m?.send("rpc-requests",h)}}},supportsHeadless:!1}}function Ec(){return{name:"noop",setup(){return{close(){},destroy(){},open(){},async secure(){return{frame:!0,host:!0,protocol:!0}},async syncRequests(){}}},supportsHeadless:!0}}var xf={height:282,width:360};function Sc(e,t={}){let{methodPolicies:r,targetOrigin:n}=t,o=r?.find(s=>s.method===e.method);return o&&o.modes?.headless?!!(typeof o.modes.headless=="object"&&o.modes.headless.sameOrigin&&n!==window.location.origin):!0}function An(){return{icon:(()=>{let t=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: dark)"]')?.href,r=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: light)"]')?.href??document.querySelector('link[rel="icon"]')?.href;return t&&r&&t!==r?{dark:t,light:r}:window.matchMedia("(prefers-color-scheme: dark)").matches?t:r})(),title:document.title}}function vn(e){e.setState(t=>({...t,requestQueue:t.requestQueue.map(r=>({account:r.account,error:new Se,request:r.request,status:"error"}))}))}function Pc(e,t){e.setState(r=>({...r,requestQueue:r.requestQueue.map(n=>n.request.id!==t.id?n:t.error?{account:n.account,error:t.error,request:n.request,status:"error"}:{account:n.account,request:n.request,result:t.result,status:"success"})}))}function ls(e){let t=new URL(e),r=new URLSearchParams(window.location.search),n="porto.";for(let[o,s]of r.entries())o.startsWith(n)&&t.searchParams.set(o.slice(n.length),s);return t.toString()}function kc(e={}){let t=e.id??0;return{prepare(r){return Af({id:t++,...r})},get id(){return t}}}function Af(e){return{...e,jsonrpc:"2.0"}}function Mc(){return null}var En=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){let n=this.keys().next().value;n&&this.delete(n)}return this}};var Ef={checksum:new En(8192)},Sn=Ef.checksum;var Mt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Pf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Bt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function je(e,...t){if(!Pf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Bc(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Bt(e.outputLen),Bt(e.blockLen)}function Je(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Pn(e,t){je(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function zc(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function xe(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function kn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ke(e,t){return e<<32-t|e>>>t}var kf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Mf(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Bf(e){for(let t=0;t<e.length;t++)e[t]=Mf(e[t]);return e}var ps=kf?e=>e:Bf;function zf(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function zt(e){return typeof e=="string"&&(e=zf(e)),je(e),e}function Rc(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];je(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}var ct=class{};function Yt(e){let t=n=>e().update(zt(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Oc(e=32){if(Mt&&typeof Mt.getRandomValues=="function")return Mt.getRandomValues(new Uint8Array(e));if(Mt&&typeof Mt.randomBytes=="function")return Uint8Array.from(Mt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Rf(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),s=BigInt(4294967295),i=Number(r>>o&s),u=Number(r&s),a=n?4:0,c=n?0:4;e.setUint32(t+a,i,n),e.setUint32(t+c,u,n)}function Tc(e,t,r){return e&t^~e&r}function jc(e,t,r){return e&t^e&r^t&r}var Hr=class extends ct{constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=kn(this.buffer)}update(t){Je(this),t=zt(t),je(t);let{view:r,buffer:n,blockLen:o}=this,s=t.length;for(let i=0;i<s;){let u=Math.min(o-this.pos,s-i);if(u===o){let a=kn(t);for(;o<=s-i;i+=o)this.process(a,i);continue}n.set(t.subarray(i,i+u),this.pos),this.pos+=u,i+=u,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Je(this),Pn(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,xe(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let f=i;f<o;f++)r[f]=0;Rf(n,o-8,BigInt(this.length*8),s),this.process(n,0);let u=kn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)u.setUint32(4*f,d[f],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:u}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=u,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},Xe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var te=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),re=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Mn=BigInt(4294967295),Dc=BigInt(32);function Of(e,t=!1){return t?{h:Number(e&Mn),l:Number(e>>Dc&Mn)}:{h:Number(e>>Dc&Mn)|0,l:Number(e&Mn)|0}}function Bn(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let s=0;s<r;s++){let{h:i,l:u}=Of(e[s],t);[n[s],o[s]]=[i,u]}return[n,o]}var ms=(e,t,r)=>e>>>r,hs=(e,t,r)=>e<<32-r|t>>>r,Rt=(e,t,r)=>e>>>r|t<<32-r,Ot=(e,t,r)=>e<<32-r|t>>>r,Ur=(e,t,r)=>e<<64-r|t>>>r-32,Kr=(e,t,r)=>e>>>r-32|t<<64-r;var _c=(e,t,r)=>e<<r|t>>>32-r,Nc=(e,t,r)=>t<<r|e>>>32-r,Cc=(e,t,r)=>t<<r-32|e>>>64-r,Hc=(e,t,r)=>e<<r-32|t>>>64-r;function De(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var Uc=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Kc=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,qc=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Lc=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,$c=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Wc=(e,t,r,n,o,s)=>t+r+n+o+s+(e/2**32|0)|0;var jf=BigInt(0),qr=BigInt(1),Df=BigInt(2),_f=BigInt(7),Nf=BigInt(256),Cf=BigInt(113),Fc=[],Zc=[],Qc=[];for(let e=0,t=qr,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Fc.push(2*(5*n+r)),Zc.push((e+1)*(e+2)/2%64);let o=jf;for(let s=0;s<7;s++)t=(t<<qr^(t>>_f)*Cf)%Nf,t&Df&&(o^=qr<<(qr<<BigInt(s))-qr);Qc.push(o)}var Gc=Bn(Qc,!0),Hf=Gc[0],Uf=Gc[1],Vc=(e,t,r)=>r>32?Cc(e,t,r):_c(e,t,r),Yc=(e,t,r)=>r>32?Hc(e,t,r):Nc(e,t,r);function Kf(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let i=0;i<10;i++)r[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){let u=(i+8)%10,a=(i+2)%10,c=r[a],d=r[a+1],f=Vc(c,d,1)^r[u],l=Yc(c,d,1)^r[u+1];for(let m=0;m<50;m+=10)e[i+m]^=f,e[i+m+1]^=l}let o=e[2],s=e[3];for(let i=0;i<24;i++){let u=Zc[i],a=Vc(o,s,u),c=Yc(o,s,u),d=Fc[i];o=e[d],s=e[d+1],e[d]=a,e[d+1]=c}for(let i=0;i<50;i+=10){for(let u=0;u<10;u++)r[u]=e[i+u];for(let u=0;u<10;u++)e[i+u]^=~r[(u+2)%10]&r[(u+4)%10]}e[0]^=Hf[n],e[1]^=Uf[n]}xe(r)}var ys=class e extends ct{constructor(t,r,n,o=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=o,this.rounds=s,Bt(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=zc(this.state)}clone(){return this._cloneInto()}keccak(){ps(this.state32),Kf(this.state32,this.rounds),ps(this.state32),this.posOut=0,this.pos=0}update(t){Je(this),t=zt(t),je(t);let{blockLen:r,state:n}=this,o=t.length;for(let s=0;s<o;){let i=Math.min(r-this.pos,o-s);for(let u=0;u<i;u++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:o}=this;t[n]^=r,r&128&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Je(this,!1),je(t),this.finish();let r=this.state,{blockLen:n}=this;for(let o=0,s=t.length;o<s;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,s-o);t.set(r.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Bt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Pn(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xe(this.state)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new e(r,n,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}},qf=(e,t,r)=>Yt(()=>new ys(t,e,r));var Jc=qf(1,136,256/8);var Lf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ut=new Uint32Array(64),zn=class extends Hr{constructor(t=32){super(64,t,8,!1),this.A=Xe[0]|0,this.B=Xe[1]|0,this.C=Xe[2]|0,this.D=Xe[3]|0,this.E=Xe[4]|0,this.F=Xe[5]|0,this.G=Xe[6]|0,this.H=Xe[7]|0}get(){let{A:t,B:r,C:n,D:o,E:s,F:i,G:u,H:a}=this;return[t,r,n,o,s,i,u,a]}set(t,r,n,o,s,i,u,a){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=u|0,this.H=a|0}process(t,r){for(let f=0;f<16;f++,r+=4)ut[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let l=ut[f-15],m=ut[f-2],h=ke(l,7)^ke(l,18)^l>>>3,p=ke(m,17)^ke(m,19)^m>>>10;ut[f]=p+ut[f-7]+h+ut[f-16]|0}let{A:n,B:o,C:s,D:i,E:u,F:a,G:c,H:d}=this;for(let f=0;f<64;f++){let l=ke(u,6)^ke(u,11)^ke(u,25),m=d+l+Tc(u,a,c)+Lf[f]+ut[f]|0,p=(ke(n,2)^ke(n,13)^ke(n,22))+jc(n,o,s)|0;d=c,c=a,a=u,u=i+m|0,i=s,s=o,o=n,n=m+p|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,u=u+this.E|0,a=a+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(n,o,s,i,u,a,c,d)}roundClean(){xe(ut)}destroy(){this.set(0,0,0,0,0,0,0,0),xe(this.buffer)}};var Xc=Bn(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),$f=Xc[0],Wf=Xc[1],dt=new Uint32Array(80),ft=new Uint32Array(80),Rn=class extends Hr{constructor(t=64){super(128,t,16,!1),this.Ah=re[0]|0,this.Al=re[1]|0,this.Bh=re[2]|0,this.Bl=re[3]|0,this.Ch=re[4]|0,this.Cl=re[5]|0,this.Dh=re[6]|0,this.Dl=re[7]|0,this.Eh=re[8]|0,this.El=re[9]|0,this.Fh=re[10]|0,this.Fl=re[11]|0,this.Gh=re[12]|0,this.Gl=re[13]|0,this.Hh=re[14]|0,this.Hl=re[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:u,Dl:a,Eh:c,El:d,Fh:f,Fl:l,Gh:m,Gl:h,Hh:p,Hl:b}=this;return[t,r,n,o,s,i,u,a,c,d,f,l,m,h,p,b]}set(t,r,n,o,s,i,u,a,c,d,f,l,m,h,p,b){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=u|0,this.Dl=a|0,this.Eh=c|0,this.El=d|0,this.Fh=f|0,this.Fl=l|0,this.Gh=m|0,this.Gl=h|0,this.Hh=p|0,this.Hl=b|0}process(t,r){for(let g=0;g<16;g++,r+=4)dt[g]=t.getUint32(r),ft[g]=t.getUint32(r+=4);for(let g=16;g<80;g++){let y=dt[g-15]|0,x=ft[g-15]|0,v=Rt(y,x,1)^Rt(y,x,8)^ms(y,x,7),I=Ot(y,x,1)^Ot(y,x,8)^hs(y,x,7),P=dt[g-2]|0,k=ft[g-2]|0,S=Rt(P,k,19)^Ur(P,k,61)^ms(P,k,6),B=Ot(P,k,19)^Kr(P,k,61)^hs(P,k,6),R=qc(I,B,ft[g-7],ft[g-16]),z=Lc(R,v,S,dt[g-7],dt[g-16]);dt[g]=z|0,ft[g]=R|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:u,Cl:a,Dh:c,Dl:d,Eh:f,El:l,Fh:m,Fl:h,Gh:p,Gl:b,Hh:w,Hl:A}=this;for(let g=0;g<80;g++){let y=Rt(f,l,14)^Rt(f,l,18)^Ur(f,l,41),x=Ot(f,l,14)^Ot(f,l,18)^Kr(f,l,41),v=f&m^~f&p,I=l&h^~l&b,P=$c(A,x,I,Wf[g],ft[g]),k=Wc(P,w,y,v,$f[g],dt[g]),S=P|0,B=Rt(n,o,28)^Ur(n,o,34)^Ur(n,o,39),R=Ot(n,o,28)^Kr(n,o,34)^Kr(n,o,39),z=n&s^n&u^s&u,T=o&i^o&a^i&a;w=p|0,A=b|0,p=m|0,b=h|0,m=f|0,h=l|0,{h:f,l}=De(c|0,d|0,k|0,S|0),c=u|0,d=a|0,u=s|0,a=i|0,s=n|0,i=o|0;let E=Uc(S,R,T);n=Kc(E,k,B,z),o=E|0}({h:n,l:o}=De(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=De(this.Bh|0,this.Bl|0,s|0,i|0),{h:u,l:a}=De(this.Ch|0,this.Cl|0,u|0,a|0),{h:c,l:d}=De(this.Dh|0,this.Dl|0,c|0,d|0),{h:f,l}=De(this.Eh|0,this.El|0,f|0,l|0),{h:m,l:h}=De(this.Fh|0,this.Fl|0,m|0,h|0),{h:p,l:b}=De(this.Gh|0,this.Gl|0,p|0,b|0),{h:w,l:A}=De(this.Hh|0,this.Hl|0,w|0,A|0),this.set(n,o,s,i,u,a,c,d,f,l,m,h,p,b,w,A)}roundClean(){xe(dt,ft)}destroy(){xe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},gs=class extends Rn{constructor(){super(48),this.Ah=te[0]|0,this.Al=te[1]|0,this.Bh=te[2]|0,this.Bl=te[3]|0,this.Ch=te[4]|0,this.Cl=te[5]|0,this.Dh=te[6]|0,this.Dl=te[7]|0,this.Eh=te[8]|0,this.El=te[9]|0,this.Fh=te[10]|0,this.Fl=te[11]|0,this.Gh=te[12]|0,this.Gl=te[13]|0,this.Hh=te[14]|0,this.Hl=te[15]|0}};var Ft=Yt(()=>new zn);var eu=Yt(()=>new Rn),tu=Yt(()=>new gs);var ru=Ft;function W(e,t={}){let{as:r=typeof e=="string"?"Hex":"Bytes"}=t,n=Jc(Ie(e));return r==="Bytes"?n:Z(n)}function bs(e,t={}){let{as:r=typeof e=="string"?"Hex":"Bytes"}=t,n=ru(Ie(e));return r==="Bytes"?n:Z(n)}function nu(e,t={}){let{compressed:r}=t,{prefix:n,x:o,y:s}=e;if(r===!1||typeof o=="bigint"&&typeof s=="bigint"){if(n!==4)throw new On({prefix:n,cause:new As});return}if(r===!0||typeof o=="bigint"&&typeof s>"u"){if(n!==3&&n!==2)throw new On({prefix:n,cause:new ws});return}throw new xs({publicKey:e})}function _e(e){let t=(()=>{if(Ee(e))return Zt(e);if(_a(e))return Vf(e);let{prefix:r,x:n,y:o}=e;return typeof n=="bigint"&&typeof o=="bigint"?{prefix:r??4,x:n,y:o}:{prefix:r,x:n}})();return nu(t),t}function Vf(e){return Zt(Z(e))}function Zt(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new vs({publicKey:e});if(e.length===130){let n=BigInt(L(e,0,32)),o=BigInt(L(e,32,64));return{prefix:4,x:n,y:o}}if(e.length===132){let n=Number(L(e,0,1)),o=BigInt(L(e,1,33)),s=BigInt(L(e,33,65));return{prefix:n,x:o,y:s}}let t=Number(L(e,0,1)),r=BigInt(L(e,1,33));return{prefix:t,x:r}}function et(e,t={}){nu(e);let{prefix:r,x:n,y:o}=e,{includePrefix:s=!0}=t;return U(s?_(r,{size:1}):"0x",_(n,{size:32}),typeof o=="bigint"?_(o,{size:32}):"0x")}var xs=class extends D{constructor({publicKey:t}){super(`Value \`${ve(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},On=class extends D{constructor({prefix:t,cause:r}){super(`Prefix "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},ws=class extends D{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},As=class extends D{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},vs=class extends D{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${$(be(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var Yf=/^0x[a-fA-F0-9]{40}$/;function tt(e,t={}){let{strict:r=!0}=t;if(!Yf.test(e))throw new Qt({address:e,cause:new $r});if(r){if(e.toLowerCase()===e)return;if(Es(e)!==e)throw new Qt({address:e,cause:new Is})}}function Es(e){if(Sn.has(e))return Sn.get(e);tt(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=W($e(t),{as:"Bytes"}),n=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());let o=`0x${n.join("")}`;return Sn.set(e,o),o}function Ss(e,t={}){let{checksum:r=!1}=t;return tt(e),r?Es(e):e}function Gt(e,t={}){let r=W(`0x${et(e).slice(4)}`).substring(26);return Ss(`0x${r}`,t)}function K(e,t){return tt(e,{strict:!1}),tt(t,{strict:!1}),e.toLowerCase()===t.toLowerCase()}function Be(e,t={}){let{strict:r=!0}=t??{};try{return tt(e,{strict:r}),!0}catch{return!1}}var Qt=class extends D{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},$r=class extends D{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},Is=class extends D{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};var Tn=class extends ct{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Bc(t);let n=zt(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?t.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),xe(s)}update(t){return Je(this),this.iHash.update(t),this}digestInto(t){Je(this),je(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ps=(e,t,r)=>new Tn(e,t).update(r).digest();Ps.create=(e,t)=>new Tn(e,t);var de=BigInt(0),se=BigInt(1),jt=BigInt(2),Ff=BigInt(3),su=BigInt(4),iu=BigInt(5),au=BigInt(8);function oe(e,t){let r=e%t;return r>=de?r:t+r}function ye(e,t,r){let n=e;for(;t-- >de;)n*=n,n%=r;return n}function jn(e,t){if(e===de)throw new Error("invert: expected non-zero number");if(t<=de)throw new Error("invert: expected positive modulus, got "+t);let r=oe(e,t),n=t,o=de,s=se,i=se,u=de;for(;r!==de;){let c=n/r,d=n%r,f=o-i*c,l=s-u*c;n=r,r=d,o=i,s=u,i=f,u=l}if(n!==se)throw new Error("invert: does not exist");return oe(o,t)}function cu(e,t){let r=(e.ORDER+se)/su,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function Zf(e,t){let r=(e.ORDER-iu)/au,n=e.mul(t,jt),o=e.pow(n,r),s=e.mul(t,o),i=e.mul(e.mul(s,jt),o),u=e.mul(s,e.sub(i,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}function Qf(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-se,r=0;for(;t%jt===de;)t/=jt,r++;let n=jt,o=rt(e);for(;ou(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return cu;let s=o.pow(n,t),i=(t+se)/jt;return function(a,c){if(a.is0(c))return c;if(ou(a,c)!==1)throw new Error("Cannot find square root");let d=r,f=a.mul(a.ONE,s),l=a.pow(c,t),m=a.pow(c,i);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let h=1,p=a.sqr(l);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===d)throw new Error("Cannot find square root");let b=se<<BigInt(d-h-1),w=a.pow(f,b);d=h,f=a.sqr(w),l=a.mul(l,f),m=a.mul(m,w)}return m}}function Gf(e){return e%su===Ff?cu:e%au===iu?Zf:Qf(e)}var Jf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ks(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Jf.reduce((n,o)=>(n[o]="function",n),t);return vt(e,r)}function Xf(e,t,r){if(r<de)throw new Error("invalid exponent, negatives unsupported");if(r===de)return e.ONE;if(r===se)return t;let n=e.ONE,o=t;for(;r>de;)r&se&&(n=e.mul(n,o)),o=e.sqr(o),r>>=se;return n}function Ms(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((i,u,a)=>e.is0(u)?i:(n[a]=i,e.mul(i,u)),e.ONE),s=e.inv(o);return t.reduceRight((i,u,a)=>e.is0(u)?i:(n[a]=e.mul(i,n[a]),e.mul(i,u)),s),n}function ou(e,t){let r=(e.ORDER-se)/jt,n=e.pow(t,r),o=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Bs(e,t){t!==void 0&&Bt(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function rt(e,t,r=!1,n={}){if(e<=de)throw new Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:s}=Bs(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i,u=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:s,MASK:At(o),ZERO:de,ONE:se,create:a=>oe(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return de<=a&&a<e},is0:a=>a===de,isOdd:a=>(a&se)===se,neg:a=>oe(-a,e),eql:(a,c)=>a===c,sqr:a=>oe(a*a,e),add:(a,c)=>oe(a+c,e),sub:(a,c)=>oe(a-c,e),mul:(a,c)=>oe(a*c,e),pow:(a,c)=>Xf(u,a,c),div:(a,c)=>oe(a*jn(c,e),e),sqrN:a=>a*a,addN:(a,c)=>a+c,subN:(a,c)=>a-c,mulN:(a,c)=>a*c,inv:a=>jn(a,e),sqrt:n.sqrt||(a=>(i||(i=Gf(e)),i(u,a))),toBytes:a=>r?Lo(a,s):Lt(a,s),fromBytes:a=>{if(a.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+a.length);return r?qo(a):Le(a)},invertBatch:a=>Ms(u,a),cmov:(a,c,d)=>d?c:a});return Object.freeze(u)}function uu(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function zs(e){let t=uu(e);return t+Math.ceil(t/2)}function du(e,t,r=!1){let n=e.length,o=uu(t),s=zs(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?qo(e):Le(e),u=oe(i,t-se)+se;return r?Lo(u,o):Lt(u,o)}var fu=BigInt(0),Ds=BigInt(1);function Rs(e,t){let r=t.negate();return e?r:t}function pu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Os(e,t){pu(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,s=At(e),i=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:o,shiftBy:i}}function lu(e,t,r){let{windowSize:n,mask:o,maxNumber:s,shiftBy:i}=r,u=Number(e&o),a=e>>i;u>n&&(u-=s,a+=Ds);let c=t*n,d=c+Math.abs(u)-1,f=u===0,l=u<0,m=t%2!==0;return{nextN:a,offset:d,isZero:f,isNeg:l,isNegF:m,offsetF:c}}function el(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function tl(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}var Ts=new WeakMap,mu=new WeakMap;function js(e){return mu.get(e)||1}function hu(e,t){return{constTimeNegate:Rs,hasPrecomputes(r){return js(r)!==1},unsafeLadder(r,n,o=e.ZERO){let s=r;for(;n>fu;)n&Ds&&(o=o.add(s)),s=s.double(),n>>=Ds;return o},precomputeWindow(r,n){let{windows:o,windowSize:s}=Os(n,t),i=[],u=r,a=u;for(let c=0;c<o;c++){a=u,i.push(a);for(let d=1;d<s;d++)a=a.add(u),i.push(a);u=a.double()}return i},wNAF(r,n,o){let s=e.ZERO,i=e.BASE,u=Os(r,t);for(let a=0;a<u.windows;a++){let{nextN:c,offset:d,isZero:f,isNeg:l,isNegF:m,offsetF:h}=lu(o,a,u);o=c,f?i=i.add(Rs(m,n[h])):s=s.add(Rs(l,n[d]))}return{p:s,f:i}},wNAFUnsafe(r,n,o,s=e.ZERO){let i=Os(r,t);for(let u=0;u<i.windows&&o!==fu;u++){let{nextN:a,offset:c,isZero:d,isNeg:f}=lu(o,u,i);if(o=a,!d){let l=n[c];s=s.add(f?l.negate():l)}}return s},getPrecomputes(r,n,o){let s=Ts.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Ts.set(n,o(s))),s},wNAFCached(r,n,o){let s=js(r);return this.wNAF(s,this.getPrecomputes(s,r,o),n)},wNAFCachedUnsafe(r,n,o,s){let i=js(r);return i===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,r,o),n,s)},setWindowSize(r,n){pu(n,t),mu.set(r,n),Ts.delete(r)}}}function yu(e,t,r,n){el(r,e),tl(n,t);let o=r.length,s=n.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");let i=e.ZERO,u=Oa(BigInt(o)),a=1;u>12?a=u-3:u>4?a=u-2:u>0&&(a=2);let c=At(a),d=new Array(Number(c)+1).fill(i),f=Math.floor((t.BITS-1)/a)*a,l=i;for(let m=f;m>=0;m-=a){d.fill(i);for(let p=0;p<s;p++){let b=n[p],w=Number(b>>BigInt(m)&c);d[w]=d[w].add(r[p])}let h=i;for(let p=d.length-1,b=i;p>0;p--)b=b.add(d[p]),h=h.add(b);if(l=l.add(h),m!==0)for(let p=0;p<a;p++)l=l.double()}return l}function _s(e){return ks(e.Fp),vt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bs(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function gu(e){e.lowS!==void 0&&qt("lowS",e.lowS),e.prehash!==void 0&&qt("prehash",e.prehash)}function rl(e){let t=_s(e);vt(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}var Hs=class extends Error{constructor(t=""){super(t)}},nt={Err:Hs,_tlv:{encode:(e,t)=>{let{Err:r}=nt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=br(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?br(o.length/2|128):"";return br(e)+s+o+t},decode(e,t){let{Err:r}=nt,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],s=!!(o&128),i=0;if(!s)i=o;else{let a=o&127;if(!a)throw new r("tlv.decode(long): indefinite length not supported");if(a>4)throw new r("tlv.decode(long): byte length is too big");let c=t.subarray(n,n+a);if(c.length!==a)throw new r("tlv.decode: length bytes not complete");if(c[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let d of c)i=i<<8|d;if(n+=a,i<128)throw new r("tlv.decode(long): not minimal encoding")}let u=t.subarray(n,n+i);if(u.length!==i)throw new r("tlv.decode: wrong value length");return{v:u,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=nt;if(e<ot)throw new t("integer: negative integers are not allowed");let r=br(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=nt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Le(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=nt,o=pe("signature",e),{v:s,l:i}=n.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:u,l:a}=n.decode(2,s),{v:c,l:d}=n.decode(2,a);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=nt,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),s=n+o;return t.encode(48,s)}};function Ns(e,t){return fn(Lt(e,t))}var ot=BigInt(0),X=BigInt(1),rh=BigInt(2),Cs=BigInt(3),nl=BigInt(4);function ol(e){let t=rl(e),{Fp:r}=t,n=rt(t.n,t.nBitLength),o=t.toBytes||((g,y,x)=>{let v=y.toAffine();return ln(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),s=t.fromBytes||(g=>{let y=g.subarray(1),x=r.fromBytes(y.subarray(0,r.BYTES)),v=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x,y:v}});function i(g){let{a:y,b:x}=t,v=r.sqr(g),I=r.mul(v,g);return r.add(r.add(I,r.mul(g,y)),x)}function u(g,y){let x=r.sqr(y),v=i(g);return r.eql(x,v)}if(!u(t.Gx,t.Gy))throw new Error("bad curve params: generator point");let a=r.mul(r.pow(t.a,Cs),nl),c=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(a,c)))throw new Error("bad curve params: a or b");function d(g){return $o(g,X,t.n)}function f(g){let{allowedPrivateKeyLengths:y,nByteLength:x,wrapPrivateKey:v,n:I}=t;if(y&&typeof g!="bigint"){if(Uo(g)&&(g=fn(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(x*2,"0")}let P;try{P=typeof g=="bigint"?g:Le(pe("private key",g,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof g)}return v&&(P=oe(P,I)),wt("private key",P,X,I),P}function l(g){if(!(g instanceof p))throw new Error("ProjectivePoint expected")}let m=Wo((g,y)=>{let{px:x,py:v,pz:I}=g;if(r.eql(I,r.ONE))return{x,y:v};let P=g.is0();y==null&&(y=P?r.ONE:r.inv(I));let k=r.mul(x,y),S=r.mul(v,y),B=r.mul(I,y);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(B,r.ONE))throw new Error("invZ was invalid");return{x:k,y:S}}),h=Wo(g=>{if(g.is0()){if(t.allowInfinityPoint&&!r.is0(g.py))return;throw new Error("bad point: ZERO")}let{x:y,y:x}=g.toAffine();if(!r.isValid(y)||!r.isValid(x))throw new Error("bad point: x or y not FE");if(!u(y,x))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(y,x,v){if(y==null||!r.isValid(y))throw new Error("x required");if(x==null||!r.isValid(x)||r.is0(x))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required");this.px=y,this.py=x,this.pz=v,Object.freeze(this)}static fromAffine(y){let{x,y:v}=y||{};if(!y||!r.isValid(x)||!r.isValid(v))throw new Error("invalid affine point");if(y instanceof p)throw new Error("projective point not allowed");let I=P=>r.eql(P,r.ZERO);return I(x)&&I(v)?p.ZERO:new p(x,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){let x=Ms(r,y.map(v=>v.pz));return y.map((v,I)=>v.toAffine(x[I])).map(p.fromAffine)}static fromHex(y){let x=p.fromAffine(s(pe("pointHex",y)));return x.assertValidity(),x}static fromPrivateKey(y){return p.BASE.multiply(f(y))}static msm(y,x){return yu(p,n,y,x)}_setWindowSize(y){A.setWindowSize(this,y)}assertValidity(){h(this)}hasEvenY(){let{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);let{px:x,py:v,pz:I}=this,{px:P,py:k,pz:S}=y,B=r.eql(r.mul(x,S),r.mul(P,I)),R=r.eql(r.mul(v,S),r.mul(k,I));return B&&R}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:y,b:x}=t,v=r.mul(x,Cs),{px:I,py:P,pz:k}=this,S=r.ZERO,B=r.ZERO,R=r.ZERO,z=r.mul(I,I),T=r.mul(P,P),E=r.mul(k,k),M=r.mul(I,P);return M=r.add(M,M),R=r.mul(I,k),R=r.add(R,R),S=r.mul(y,R),B=r.mul(v,E),B=r.add(S,B),S=r.sub(T,B),B=r.add(T,B),B=r.mul(S,B),S=r.mul(M,S),R=r.mul(v,R),E=r.mul(y,E),M=r.sub(z,E),M=r.mul(y,M),M=r.add(M,R),R=r.add(z,z),z=r.add(R,z),z=r.add(z,E),z=r.mul(z,M),B=r.add(B,z),E=r.mul(P,k),E=r.add(E,E),z=r.mul(E,M),S=r.sub(S,z),R=r.mul(E,T),R=r.add(R,R),R=r.add(R,R),new p(S,B,R)}add(y){l(y);let{px:x,py:v,pz:I}=this,{px:P,py:k,pz:S}=y,B=r.ZERO,R=r.ZERO,z=r.ZERO,T=t.a,E=r.mul(t.b,Cs),M=r.mul(x,P),O=r.mul(v,k),j=r.mul(I,S),N=r.add(x,v),C=r.add(P,k);N=r.mul(N,C),C=r.add(M,O),N=r.sub(N,C),C=r.add(x,I);let H=r.add(P,S);return C=r.mul(C,H),H=r.add(M,j),C=r.sub(C,H),H=r.add(v,I),B=r.add(k,S),H=r.mul(H,B),B=r.add(O,j),H=r.sub(H,B),z=r.mul(T,C),B=r.mul(E,j),z=r.add(B,z),B=r.sub(O,z),z=r.add(O,z),R=r.mul(B,z),O=r.add(M,M),O=r.add(O,M),j=r.mul(T,j),C=r.mul(E,C),O=r.add(O,j),j=r.sub(M,j),j=r.mul(T,j),C=r.add(C,j),M=r.mul(O,C),R=r.add(R,M),M=r.mul(H,C),B=r.mul(N,B),B=r.sub(B,M),M=r.mul(N,O),z=r.mul(H,z),z=r.add(z,M),new p(B,R,z)}subtract(y){return this.add(y.negate())}is0(){return this.equals(p.ZERO)}wNAF(y){return A.wNAFCached(this,y,p.normalizeZ)}multiplyUnsafe(y){let{endo:x,n:v}=t;wt("scalar",y,ot,v);let I=p.ZERO;if(y===ot)return I;if(this.is0()||y===X)return this;if(!x||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,y,p.normalizeZ);let{k1neg:P,k1:k,k2neg:S,k2:B}=x.splitScalar(y),R=I,z=I,T=this;for(;k>ot||B>ot;)k&X&&(R=R.add(T)),B&X&&(z=z.add(T)),T=T.double(),k>>=X,B>>=X;return P&&(R=R.negate()),S&&(z=z.negate()),z=new p(r.mul(z.px,x.beta),z.py,z.pz),R.add(z)}multiply(y){let{endo:x,n:v}=t;wt("scalar",y,X,v);let I,P;if(x){let{k1neg:k,k1:S,k2neg:B,k2:R}=x.splitScalar(y),{p:z,f:T}=this.wNAF(S),{p:E,f:M}=this.wNAF(R);z=A.constTimeNegate(k,z),E=A.constTimeNegate(B,E),E=new p(r.mul(E.px,x.beta),E.py,E.pz),I=z.add(E),P=T.add(M)}else{let{p:k,f:S}=this.wNAF(y);I=k,P=S}return p.normalizeZ([I,P])[0]}multiplyAndAddUnsafe(y,x,v){let I=p.BASE,P=(S,B)=>B===ot||B===X||!S.equals(I)?S.multiplyUnsafe(B):S.multiply(B),k=P(this,x).add(P(y,v));return k.is0()?void 0:k}toAffine(y){return m(this,y)}isTorsionFree(){let{h:y,isTorsionFree:x}=t;if(y===X)return!0;if(x)return x(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:y,clearCofactor:x}=t;return y===X?this:x?x(p,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return qt("isCompressed",y),this.assertValidity(),o(p,this,y)}toHex(y=!0){return qt("isCompressed",y),fn(this.toRawBytes(y))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let{endo:b,nBitLength:w}=t,A=hu(p,b?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:d}}function sl(e){let t=_s(e);return vt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bu(e){let t=sl(e),{Fp:r,n,nByteLength:o,nBitLength:s}=t,i=r.BYTES+1,u=2*r.BYTES+1;function a(E){return oe(E,n)}function c(E){return jn(E,n)}let{ProjectivePoint:d,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:m}=ol({...t,toBytes(E,M,O){let j=M.toAffine(),N=r.toBytes(j.x),C=ln;return qt("isCompressed",O),O?C(Uint8Array.from([M.hasEvenY()?2:3]),N):C(Uint8Array.from([4]),N,r.toBytes(j.y))},fromBytes(E){let M=E.length,O=E[0],j=E.subarray(1);if(M===i&&(O===2||O===3)){let N=Le(j);if(!$o(N,X,r.ORDER))throw new Error("Point is not on curve");let C=l(N),H;try{H=r.sqrt(C)}catch(Ae){let le=Ae instanceof Error?": "+Ae.message:"";throw new Error("Point is not on curve"+le)}let ie=(H&X)===X;return(O&1)===1!==ie&&(H=r.neg(H)),{x:N,y:H}}else if(M===u&&O===4){let N=r.fromBytes(j.subarray(0,r.BYTES)),C=r.fromBytes(j.subarray(r.BYTES,2*r.BYTES));return{x:N,y:C}}else{let N=i,C=u;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+C+", got "+M)}}});function h(E){let M=n>>X;return E>M}function p(E){return h(E)?a(-E):E}let b=(E,M,O)=>Le(E.slice(M,O));class w{constructor(M,O,j){wt("r",M,X,n),wt("s",O,X,n),this.r=M,this.s=O,j!=null&&(this.recovery=j),Object.freeze(this)}static fromCompact(M){let O=o;return M=pe("compactSignature",M,O*2),new w(b(M,0,O),b(M,O,2*O))}static fromDER(M){let{r:O,s:j}=nt.toSig(pe("DER",M));return new w(O,j)}assertValidity(){}addRecoveryBit(M){return new w(this.r,this.s,M)}recoverPublicKey(M){let{r:O,s:j,recovery:N}=this,C=I(pe("msgHash",M));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let H=N===2||N===3?O+t.n:O;if(H>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let ie=N&1?"03":"02",qe=d.fromHex(ie+Ns(H,r.BYTES)),Ae=c(H),le=a(-C*Ae),Ht=a(j*Ae),at=d.BASE.multiplyAndAddUnsafe(qe,le,Ht);if(!at)throw new Error("point at infinify");return at.assertValidity(),at}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ko(this.toDERHex())}toDERHex(){return nt.hexFromSig(this)}toCompactRawBytes(){return Ko(this.toCompactHex())}toCompactHex(){let M=o;return Ns(this.r,M)+Ns(this.s,M)}}let A={isValidPrivateKey(E){try{return f(E),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let E=zs(t.n);return du(t.randomBytes(E),t.n)},precompute(E=8,M=d.BASE){return M._setWindowSize(E),M.multiply(BigInt(3)),M}};function g(E,M=!0){return d.fromPrivateKey(E).toRawBytes(M)}function y(E){if(typeof E=="bigint")return!1;if(E instanceof d)return!0;let O=pe("key",E).length,j=r.BYTES,N=j+1,C=2*j+1;if(!(t.allowedPrivateKeyLengths||o===N))return O===N||O===C}function x(E,M,O=!0){if(y(E)===!0)throw new Error("first arg must be private key");if(y(M)===!1)throw new Error("second arg must be public key");return d.fromHex(M).multiply(f(E)).toRawBytes(O)}let v=t.bits2int||function(E){if(E.length>8192)throw new Error("input is too large");let M=Le(E),O=E.length*8-s;return O>0?M>>BigInt(O):M},I=t.bits2int_modN||function(E){return a(v(E))},P=At(s);function k(E){return wt("num < 2^"+s,E,ot,P),Lt(E,o)}function S(E,M,O=B){if(["recovered","canonical"].some(ht=>ht in O))throw new Error("sign() legacy options not supported");let{hash:j,randomBytes:N}=t,{lowS:C,prehash:H,extraEntropy:ie}=O;C==null&&(C=!0),E=pe("msgHash",E),gu(O),H&&(E=pe("prehashed msgHash",j(E)));let qe=I(E),Ae=f(M),le=[k(Ae),k(qe)];if(ie!=null&&ie!==!1){let ht=ie===!0?N(r.BYTES):ie;le.push(pe("extraEntropy",ht))}let Ht=ln(...le),at=qe;function Do(ht){let Ut=v(ht);if(!m(Ut))return;let _o=c(Ut),mr=d.BASE.multiply(Ut).toAffine(),yt=a(mr.x);if(yt===ot)return;let hr=a(_o*a(at+yt*Ae));if(hr===ot)return;let Kt=(mr.x===yt?0:2)|Number(mr.y&X),Xi=hr;return C&&h(hr)&&(Xi=p(hr),Kt^=1),new w(yt,Xi,Kt)}return{seed:Ht,k2sig:Do}}let B={lowS:t.lowS,prehash:!1},R={lowS:t.lowS,prehash:!1};function z(E,M,O=B){let{seed:j,k2sig:N}=S(E,M,O),C=t;return Ta(C.hash.outputLen,C.nByteLength,C.hmac)(j,N)}d.BASE._setWindowSize(8);function T(E,M,O,j=R){let N=E;M=pe("msgHash",M),O=pe("publicKey",O);let{lowS:C,prehash:H,format:ie}=j;if(gu(j),"strict"in j)throw new Error("options.strict was renamed to lowS");if(ie!==void 0&&ie!=="compact"&&ie!=="der")throw new Error("format must be compact or der");let qe=typeof N=="string"||Uo(N),Ae=!qe&&!ie&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!qe&&!Ae)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let le,Ht;try{if(Ae&&(le=new w(N.r,N.s)),qe){try{ie!=="compact"&&(le=w.fromDER(N))}catch(Kt){if(!(Kt instanceof nt.Err))throw Kt}!le&&ie!=="der"&&(le=w.fromCompact(N))}Ht=d.fromHex(O)}catch{return!1}if(!le||C&&le.hasHighS())return!1;H&&(M=t.hash(M));let{r:at,s:Do}=le,ht=I(M),Ut=c(Do),_o=a(ht*Ut),mr=a(at*Ut),yt=d.BASE.multiplyAndAddUnsafe(Ht,_o,mr)?.toAffine();return yt?a(yt.x)===at:!1}return{CURVE:t,getPublicKey:g,getSharedSecret:x,sign:z,verify:T,ProjectivePoint:d,Signature:w,utils:A}}function il(e){return{hash:e,hmac:(t,...r)=>Ps(e,t,Rc(...r)),randomBytes:Oc}}function Jt(e,t){let r=n=>bu({...e,...il(n)});return{...r(t),create:r}}var Au=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),al=BigInt(0),cl=BigInt(1),Us=BigInt(2),wu=(e,t)=>(e+t/Us)/t;function ul(e){let t=Au,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),u=BigInt(44),a=BigInt(88),c=e*e*e%t,d=c*c*e%t,f=ye(d,r,t)*d%t,l=ye(f,r,t)*d%t,m=ye(l,Us,t)*c%t,h=ye(m,o,t)*m%t,p=ye(h,s,t)*h%t,b=ye(p,u,t)*p%t,w=ye(b,a,t)*b%t,A=ye(w,u,t)*p%t,g=ye(A,r,t)*d%t,y=ye(g,i,t)*h%t,x=ye(y,n,t)*c%t,v=ye(x,Us,t);if(!Ks.eql(Ks.sqr(v),e))throw new Error("Cannot find square root");return v}var Ks=rt(Au,void 0,void 0,{sqrt:ul}),Wr=Jt({a:al,b:BigInt(7),Fp:Ks,n:xu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=xu,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-cl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,i=BigInt("0x100000000000000000000000000000000"),u=wu(s*e,t),a=wu(-n*e,t),c=oe(e-u*r-a*o,t),d=oe(-u*n-a*s,t),f=c>i,l=d>i;if(f&&(c=t-c),l&&(d=t-d),c>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:l,k2:d}}}},Ft);var Dn=!1;function qs(e){let{privateKey:t}=e,r=Wr.ProjectivePoint.fromPrivateKey(be(t).slice(2));return _e(r)}function Ls(e={}){let{as:t="Hex"}=e,r=Wr.utils.randomPrivateKey();return t==="Hex"?Z(r):r}function Iu(e){return Gt(fl(e))}function fl(e){let{payload:t,signature:r}=e,{r:n,s:o,yParity:s}=r,u=new Wr.Signature(BigInt(n),BigInt(o)).addRecoveryBit(s).recoverPublicKey(be(t).substring(2));return _e(u)}function _n(e){let{extraEntropy:t=Dn,hash:r,payload:n,privateKey:o}=e,{r:s,s:i,recovery:u}=Wr.sign(Ie(n),Ie(o),{extraEntropy:typeof t=="boolean"?t:be(t).slice(2),lowS:!0,...r?{prehash:!0}:{}});return{r:s,s:i,yParity:u}}var Eu=/^(.*)\[([0-9]*)\]$/,Cn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Xt=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ph=2n**(8n-1n)-1n,mh=2n**(16n-1n)-1n,hh=2n**(24n-1n)-1n,yh=2n**(32n-1n)-1n,gh=2n**(40n-1n)-1n,bh=2n**(48n-1n)-1n,xh=2n**(56n-1n)-1n,wh=2n**(64n-1n)-1n,Ah=2n**(72n-1n)-1n,vh=2n**(80n-1n)-1n,Ih=2n**(88n-1n)-1n,Eh=2n**(96n-1n)-1n,Sh=2n**(104n-1n)-1n,Ph=2n**(112n-1n)-1n,kh=2n**(120n-1n)-1n,Mh=2n**(128n-1n)-1n,Bh=2n**(136n-1n)-1n,zh=2n**(144n-1n)-1n,Rh=2n**(152n-1n)-1n,Oh=2n**(160n-1n)-1n,Th=2n**(168n-1n)-1n,jh=2n**(176n-1n)-1n,Dh=2n**(184n-1n)-1n,_h=2n**(192n-1n)-1n,Nh=2n**(200n-1n)-1n,Ch=2n**(208n-1n)-1n,Hh=2n**(216n-1n)-1n,Uh=2n**(224n-1n)-1n,Kh=2n**(232n-1n)-1n,qh=2n**(240n-1n)-1n,Lh=2n**(248n-1n)-1n,$h=2n**(256n-1n)-1n,Wh=-(2n**(8n-1n)),Vh=-(2n**(16n-1n)),Yh=-(2n**(24n-1n)),Fh=-(2n**(32n-1n)),Zh=-(2n**(40n-1n)),Qh=-(2n**(48n-1n)),Gh=-(2n**(56n-1n)),Jh=-(2n**(64n-1n)),Xh=-(2n**(72n-1n)),ey=-(2n**(80n-1n)),ty=-(2n**(88n-1n)),ry=-(2n**(96n-1n)),ny=-(2n**(104n-1n)),oy=-(2n**(112n-1n)),sy=-(2n**(120n-1n)),iy=-(2n**(128n-1n)),ay=-(2n**(136n-1n)),cy=-(2n**(144n-1n)),uy=-(2n**(152n-1n)),dy=-(2n**(160n-1n)),fy=-(2n**(168n-1n)),ly=-(2n**(176n-1n)),py=-(2n**(184n-1n)),my=-(2n**(192n-1n)),hy=-(2n**(200n-1n)),yy=-(2n**(208n-1n)),gy=-(2n**(216n-1n)),by=-(2n**(224n-1n)),xy=-(2n**(232n-1n)),wy=-(2n**(240n-1n)),Ay=-(2n**(248n-1n)),vy=-(2n**(256n-1n)),Iy=2n**8n-1n,Ey=2n**16n-1n,Sy=2n**24n-1n,Py=2n**32n-1n,ky=2n**40n-1n,My=2n**48n-1n,By=2n**56n-1n,zy=2n**64n-1n,Ry=2n**72n-1n,Oy=2n**80n-1n,Ty=2n**88n-1n,jy=2n**96n-1n,Dy=2n**104n-1n,_y=2n**112n-1n,Ny=2n**120n-1n,Cy=2n**128n-1n,Hy=2n**136n-1n,Uy=2n**144n-1n,Ky=2n**152n-1n,qy=2n**160n-1n,Ly=2n**168n-1n,$y=2n**176n-1n,Wy=2n**184n-1n,Vy=2n**192n-1n,Yy=2n**200n-1n,Fy=2n**208n-1n,Zy=2n**216n-1n,Qy=2n**224n-1n,Gy=2n**232n-1n,Jy=2n**240n-1n,Xy=2n**248n-1n,$s=2n**256n-1n;function Hn(e,t={}){let{recovered:r}=t;if(typeof e.r>"u")throw new Vr({signature:e});if(typeof e.s>"u")throw new Vr({signature:e});if(r&&typeof e.yParity>"u")throw new Vr({signature:e});if(e.r<0n||e.r>$s)throw new Ys({value:e.r});if(e.s<0n||e.s>$s)throw new Fs({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new er({value:e.yParity})}function ll(e){return Su(Z(e))}function Su(e){if(e.length!==130&&e.length!==132)throw new Vs({signature:e});let t=BigInt(L(e,0,32)),r=BigInt(L(e,32,64)),n=(()=>{let o=+`0x${e.slice(130)}`;if(!Number.isNaN(o))try{return Gs(o)}catch{throw new er({value:o})}})();return typeof n>"u"?{r:t,s:r}:{r:t,s:r,yParity:n}}function Pu(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return Qs(e)}function Qs(e){let t=typeof e=="string"?Su(e):e instanceof Uint8Array?ll(e):typeof e.r=="string"?ml(e):e.v?pl(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return Hn(t),t}function pl(e){return{r:e.r,s:e.s,yParity:Gs(e.v)}}function ml(e){let t=(()=>{let r=e.v?Number(e.v):void 0,n=e.yParity?Number(e.yParity):void 0;if(typeof r=="number"&&typeof n!="number"&&(n=Gs(r)),typeof n!="number")throw new er({value:e.yParity});return n})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function tr(e){Hn(e);let t=e.r,r=e.s;return U(_(t,{size:32}),_(r,{size:32}),typeof e.yParity=="number"?_(hl(e.yParity),{size:1}):"0x")}function ku(e){let{r:t,s:r,yParity:n}=e;return[n?"0x01":"0x",t===0n?"0x":Fo(_(t)),r===0n?"0x":Fo(_(r))]}function Gs(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Zs({value:e})}function hl(e){if(e===0)return 27;if(e===1)return 28;throw new er({value:e})}var Vs=class extends D{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${$(be(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},Vr=class extends D{constructor({signature:t}){super(`Signature \`${ve(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},Ys=class extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},Fs=class extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},er=class extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},Zs=class extends D{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};var Mu="1.1.0";var Q=class e extends Error{constructor(t,r={}){let n=r.cause instanceof e?r.cause.details:r.cause?.message?r.cause.message:r.details,o=r.cause instanceof e&&r.cause.docsPath||r.docsPath,s=[t||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${Mu}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=o,this.metaMessages=r.metaMessages,this.shortMessage=t}};function ge(e,t){return e.exec(t)?.groups}var Js=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Xs=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Kn=/^\(.+?\).*?$/;var Bu=/^tuple(?<array>(\[(\d*)\])*)$/;function qn(e){let t=e.type;if(Bu.test(e.type)&&"components"in e){t="(";let r=e.components.length;for(let o=0;o<r;o++){let s=e.components[o];t+=qn(s),o<r-1&&(t+=", ")}let n=ge(Bu,e.type);return t+=`)${n?.array??""}`,qn({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Dt(e){let t="",r=e.length;for(let n=0;n<r;n++){let o=e[n];t+=qn(o),n!==r-1&&(t+=", ")}return t}function Yr(e){return e.type==="function"?`function ${e.name}(${Dt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Dt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Dt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Dt(e.inputs)})`:e.type==="constructor"?`constructor(${Dt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var zu=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Ru(e){return zu.test(e)}function Ou(e){return ge(zu,e)}var Tu=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ju(e){return Tu.test(e)}function Du(e){return ge(Tu,e)}var _u=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Nu(e){return _u.test(e)}function Cu(e){return ge(_u,e)}var Hu=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function rr(e){return Hu.test(e)}function Uu(e){return ge(Hu,e)}var Ku=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function qu(e){return Ku.test(e)}function Lu(e){return ge(Ku,e)}var $u=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Wu(e){return $u.test(e)}function Vu(e){return ge($u,e)}var yl=/^receive\(\) external payable$/;function Yu(e){return yl.test(e)}var ei=new Set(["memory","indexed","storage","calldata"]),Fu=new Set(["indexed"]),Ln=new Set(["calldata","memory","storage"]);var $n=class extends Q{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},Wn=class extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Vn=class extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}};var Yn=class extends Q{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}},Fn=class extends Q{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Zn=class extends Q{constructor({param:t,name:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Qn=class extends Q{constructor({param:t,type:r,modifier:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Gn=class extends Q{constructor({param:t,type:r,modifier:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},Jn=class extends Q{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}};var Ce=class extends Q{constructor({signature:t,type:r}){super(`Invalid ${r} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Xn=class extends Q{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},eo=class extends Q{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}};var to=class extends Q{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}};var ro=class extends Q{constructor({current:t,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};function Zu(e,t,r){let n="";if(r)for(let o of Object.entries(r)){if(!o)continue;let s="";for(let i of o[1])s+=`[${i.type}${i.name?`:${i.name}`:""}]`;n+=`(${o[0]}{${s}})`}return t?`${t}:${e}${n}`:e}var no=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ti(e,t={}){if(Nu(e))return gl(e,t);if(ju(e))return bl(e,t);if(Ru(e))return xl(e,t);if(qu(e))return wl(e,t);if(Wu(e))return Al(e);if(Yu(e))return{type:"receive",stateMutability:"payable"};throw new Xn({signature:e})}function gl(e,t={}){let r=Cu(e);if(!r)throw new Ce({signature:e,type:"function"});let n=he(r.parameters),o=[],s=n.length;for(let u=0;u<s;u++)o.push(ze(n[u],{modifiers:Ln,structs:t,type:"function"}));let i=[];if(r.returns){let u=he(r.returns),a=u.length;for(let c=0;c<a;c++)i.push(ze(u[c],{modifiers:Ln,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:o,outputs:i}}function bl(e,t={}){let r=Du(e);if(!r)throw new Ce({signature:e,type:"event"});let n=he(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(ze(n[i],{modifiers:Fu,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:o}}function xl(e,t={}){let r=Ou(e);if(!r)throw new Ce({signature:e,type:"error"});let n=he(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(ze(n[i],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:o}}function wl(e,t={}){let r=Lu(e);if(!r)throw new Ce({signature:e,type:"constructor"});let n=he(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(ze(n[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:o}}function Al(e){let t=Vu(e);if(!t)throw new Ce({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}var vl=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Il=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,El=/^u?int$/;function ze(e,t){let r=Zu(e,t?.type,t?.structs);if(no.has(r))return no.get(r);let n=Kn.test(e),o=ge(n?Il:vl,e);if(!o)throw new Fn({param:e});if(o.name&&Pl(o.name))throw new Zn({param:e,name:o.name});let s=o.name?{name:o.name}:{},i=o.modifier==="indexed"?{indexed:!0}:{},u=t?.structs??{},a,c={};if(n){a="tuple";let f=he(o.type),l=[],m=f.length;for(let h=0;h<m;h++)l.push(ze(f[h],{structs:u}));c={components:l}}else if(o.type in u)a="tuple",c={components:u[o.type]};else if(El.test(o.type))a=`${o.type}256`;else if(o.type==="address payable")a="address";else if(a=o.type,t?.type!=="struct"&&!ri(a))throw new Vn({type:a});if(o.modifier){if(!t?.modifiers?.has?.(o.modifier))throw new Qn({param:e,type:t?.type,modifier:o.modifier});if(Ln.has(o.modifier)&&!kl(a,!!o.array))throw new Gn({param:e,type:t?.type,modifier:o.modifier})}let d={type:`${a}${o.array??""}`,...s,...i,...c};return no.set(r,d),d}function he(e,t=[],r="",n=0){let o=e.trim().length;for(let s=0;s<o;s++){let i=e[s],u=e.slice(s+1);switch(i){case",":return n===0?he(u,[...t,r.trim()]):he(u,t,`${r}${i}`,n);case"(":return he(u,t,`${r}${i}`,n+1);case")":return he(u,t,`${r}${i}`,n-1);default:return he(u,t,`${r}${i}`,n)}}if(r==="")return t;if(n!==0)throw new ro({current:r,depth:n});return t.push(r.trim()),t}function ri(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Js.test(e)||Xs.test(e)}var Sl=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Pl(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Js.test(e)||Xs.test(e)||Sl.test(e)}function kl(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function oo(e){let t={},r=e.length;for(let i=0;i<r;i++){let u=e[i];if(!rr(u))continue;let a=Uu(u);if(!a)throw new Ce({signature:u,type:"struct"});let c=a.properties.split(";"),d=[],f=c.length;for(let l=0;l<f;l++){let h=c[l].trim();if(!h)continue;let p=ze(h,{type:"struct"});d.push(p)}if(!d.length)throw new eo({signature:u});t[a.name]=d}let n={},o=Object.entries(t),s=o.length;for(let i=0;i<s;i++){let[u,a]=o[i];n[u]=Qu(a,t)}return n}var Ml=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Qu(e,t,r=new Set){let n=[],o=e.length;for(let s=0;s<o;s++){let i=e[s];if(Kn.test(i.type))n.push(i);else{let a=ge(Ml,i.type);if(!a?.type)throw new Jn({abiParameter:i});let{array:c,type:d}=a;if(d in t){if(r.has(d))throw new to({type:d});n.push({...i,type:`tuple${c??""}`,components:Qu(t[d]??[],t,new Set([...r,d]))})}else if(ri(d))n.push(i);else throw new Wn({type:d})}}return n}function so(e){let t;if(typeof e=="string")t=ti(e);else{let r=oo(e),n=e.length;for(let o=0;o<n;o++){let s=e[o];if(!rr(s)){t=ti(s,r);break}}}if(!t)throw new $n({signature:e});return t}function io(e){let t=[];if(typeof e=="string"){let r=he(e),n=r.length;for(let o=0;o<n;o++)t.push(ze(r[o],{modifiers:ei}))}else{let r=oo(e),n=e.length;for(let o=0;o<n;o++){let s=e[o];if(rr(s))continue;let i=he(s),u=i.length;for(let a=0;a<u;a++)t.push(ze(i[a],{modifiers:ei,structs:r}))}}if(t.length===0)throw new Yn({params:e});return t}function Ju({checksumAddress:e,parameters:t,values:r}){let n=[];for(let o=0;o<t.length;o++)n.push(ni({checksumAddress:e,parameter:t[o],value:r[o]}));return n}function ni({checksumAddress:e=!1,parameter:t,value:r}){let n=t,o=_l(n.type);if(o){let[s,i]=o;return zl(r,{checksumAddress:e,length:s,parameter:{...n,type:i}})}if(n.type==="tuple")return Dl(r,{checksumAddress:e,parameter:n});if(n.type==="address")return Bl(r,{checksum:e});if(n.type==="bool")return Ol(r);if(n.type.startsWith("uint")||n.type.startsWith("int")){let s=n.type.startsWith("int"),[,,i="256"]=Xt.exec(n.type)??[];return Tl(r,{signed:s,size:Number(i)})}if(n.type.startsWith("bytes"))return Rl(r,{type:n.type});if(n.type==="string")return jl(r);throw new Zr(n.type)}function ao(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:u}=e[s];i?t+=32:t+=$(u)}let r=[],n=[],o=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:u}=e[s];i?(r.push(_(t+o,{size:32})),n.push(u),o+=$(u)):r.push(u)}return U(...r,...n)}function Bl(e,t){let{checksum:r=!1}=t;return tt(e,{strict:r}),{dynamic:!1,encoded:We(e.toLowerCase())}}function zl(e,t){let{checksumAddress:r,length:n,parameter:o}=t,s=n===null;if(!Array.isArray(e))throw new uo(e);if(!s&&e.length!==n)throw new co({expectedLength:n,givenLength:e.length,type:`${o.type}[${n}]`});let i=!1,u=[];for(let a=0;a<e.length;a++){let c=ni({checksumAddress:r,parameter:o,value:e[a]});c.dynamic&&(i=!0),u.push(c)}if(s||i){let a=ao(u);if(s){let c=_(u.length,{size:32});return{dynamic:!0,encoded:u.length>0?U(c,a):c}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:U(...u.map(({encoded:a})=>a))}}function Rl(e,{type:t}){let[,r]=t.split("bytes"),n=$(e);if(!r){let o=e;return n%32!==0&&(o=It(o,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:U(We(_(n,{size:32})),o)}}if(n!==Number.parseInt(r,10))throw new Fr({expectedSize:Number.parseInt(r,10),value:e});return{dynamic:!1,encoded:It(e)}}function Ol(e){if(typeof e!="boolean")throw new D(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:We(pn(e))}}function Tl(e,{signed:t,size:r}){if(typeof r=="number"){let n=2n**(BigInt(r)-(t?1n:0n))-1n,o=t?-n-1n:0n;if(e>n||e<o)throw new Na({max:n.toString(),min:o.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:_(e,{size:32,signed:t})}}function jl(e){let t=J(e),r=Math.ceil($(t)/32),n=[];for(let o=0;o<r;o++)n.push(It(L(t,o*32,(o+1)*32)));return{dynamic:!0,encoded:U(It(_($(t),{size:32})),...n)}}function Dl(e,t){let{checksumAddress:r,parameter:n}=t,o=!1,s=[];for(let i=0;i<n.components.length;i++){let u=n.components[i],a=Array.isArray(e)?i:u.name,c=ni({checksumAddress:r,parameter:u,value:e[a]});s.push(c),c.dynamic&&(o=!0)}return{dynamic:o,encoded:o?ao(s):U(...s.map(({encoded:i})=>i))}}function _l(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}var Cl={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new si({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new oi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new fo({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new fo({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Xu(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(Cl);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}var fo=class extends D{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},oi=class extends D{constructor({length:t,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},si=class extends D{constructor({count:t,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function He(e,t,r){let{checksumAddress:n=!1}=r??{};if(e.length!==t.length)throw new lo({expectedLength:e.length,givenLength:t.length});let o=Ju({checksumAddress:n,parameters:e,values:t}),s=ao(o);return s.length===0?"0x":s}function Gr(e,t){if(e.length!==t.length)throw new lo({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let o=e[n],s=t[n];r.push(Gr.encode(o,s))}return U(...r)}(function(e){function t(r,n,o=!1){if(r==="address"){let a=n;return tt(a),We(a.toLowerCase(),o?32:0)}if(r==="string")return J(n);if(r==="bytes")return n;if(r==="bool")return We(pn(n),o?32:1);let s=r.match(Xt);if(s){let[a,c,d="256"]=s,f=Number.parseInt(d,10)/8;return _(n,{size:o?32:f,signed:c==="int"})}let i=r.match(Cn);if(i){let[a,c]=i;if(Number.parseInt(c,10)!==(n.length-2)/2)throw new Fr({expectedSize:Number.parseInt(c,10),value:n});return It(n,o?32:0)}let u=r.match(Eu);if(u&&Array.isArray(n)){let[a,c]=u,d=[];for(let f=0;f<n.length;f++)d.push(t(c,n[f],!0));return d.length===0?"0x":U(...d)}throw new Zr(r)}e.encode=t})(Gr||(Gr={}));function po(e){return Array.isArray(e)&&typeof e[0]=="string"?io(e):typeof e=="string"?io(e):e}var co=class extends D{constructor({expectedLength:t,givenLength:r,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${t}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},Fr=class extends D{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${$(r)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},lo=class extends D{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},uo=class extends D{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Zr=class extends D{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function Ul(e){let{domain:t,message:r,primaryType:n,types:o}=e,s=(i,u)=>{for(let a of i){let{name:c,type:d}=a,f=u[c],l=d.match(Xt);if(l&&(typeof f=="number"||typeof f=="bigint")){let[,p,b]=l;_(f,{signed:p==="int",size:Number.parseInt(b??"",10)/8})}if(d==="address"&&typeof f=="string"&&!Be(f))throw new Qt({address:f,cause:new $r});let m=d.match(Cn);if(m){let[,p]=m;if(p&&$(f)!==Number.parseInt(p,10))throw new ii({expectedSize:Number.parseInt(p,10),givenSize:$(f)})}let h=o[d];h&&(Wl(d),s(h,f))}};if(o.EIP712Domain&&t){if(typeof t!="object")throw new ai({domain:t});s(o.EIP712Domain,t)}if(n!=="EIP712Domain")if(o[n])s(o[n],r);else throw new ci({primaryType:n,types:o})}function Kl(e){let{domain:t={},message:r,primaryType:n}=e,o={EIP712Domain:ed(t),...e.types};Ul({domain:t,message:r,primaryType:n,types:o});let s=["0x19","0x01"];return t&&s.push(Ll({domain:t,types:o})),n!=="EIP712Domain"&&s.push(td({data:r,primaryType:n,types:o})),U(...s)}function ql(e){let{primaryType:t,types:r}=e,n="",o=od({primaryType:t,types:r});o.delete(t);let s=[t,...Array.from(o).sort()];for(let i of s)n+=`${i}(${(r[i]??[]).map(({name:u,type:a})=>`${a} ${u}`).join(",")})`;return n}function ed(e){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function nr(e){return W(Kl(e))}function Ll(e){let{domain:t,types:r}=e;return td({data:t,primaryType:"EIP712Domain",types:{...r,EIP712Domain:r?.EIP712Domain||ed(t)}})}function td(e){let{data:t,primaryType:r,types:n}=e,o=rd({data:t,primaryType:r,types:n});return W(o)}var ii=class extends D{constructor({expectedSize:t,givenSize:r}){super(`Expected bytes${t}, got bytes${r}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.BytesSizeMismatchError"})}},ai=class extends D{constructor({domain:t}){super(`Invalid domain "${ve(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidDomainError"})}},ci=class extends D{constructor({primaryType:t,types:r}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{metaMessages:["Check that the primary type is a key in `types`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidPrimaryTypeError"})}},ui=class extends D{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidStructTypeError"})}};function rd(e){let{data:t,primaryType:r,types:n}=e,o=[{type:"bytes32"}],s=[$l({primaryType:r,types:n})];for(let i of n[r]??[]){let[u,a]=nd({types:n,name:i.name,type:i.type,value:t[i.name]});o.push(u),s.push(a)}return He(o,s)}function $l(e){let{primaryType:t,types:r}=e,n=J(ql({primaryType:t,types:r}));return W(n)}function nd(e){let{types:t,name:r,type:n,value:o}=e;if(t[n]!==void 0)return[{type:"bytes32"},W(rd({data:o,primaryType:n,types:t}))];if(n==="bytes")return o=`0x${(o.length%2?"0":"")+o.slice(2)}`,[{type:"bytes32"},W(o,{as:"Hex"})];if(n==="string")return[{type:"bytes32"},W($e(o),{as:"Hex"})];if(n.lastIndexOf("]")===n.length-1){let s=n.slice(0,n.lastIndexOf("[")),i=o.map(u=>nd({name:r,type:s,types:t,value:u}));return[{type:"bytes32"},W(He(i.map(([u])=>u),i.map(([,u])=>u)))]}return[{type:n},o]}function od(e,t=new Set){let{primaryType:r,types:n}=e,s=r.match(/^\w*/u)?.[0];if(t.has(s)||n[s]===void 0)return t;t.add(s);for(let i of n[s])od({primaryType:i.type,types:n},t);return t}function Wl(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new ui({type:e})}function fi(e){if(typeof e=="string"){if(!Co(e,{strict:!1}))throw new No({address:e});return{address:e,type:"json-rpc"}}if(!Co(e.address,{strict:!1}))throw new No({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}function ho(e){let t=!0,r="",n=0,o="",s=!1;for(let i=0;i<e.length;i++){let u=e[i];if(["(",")",","].includes(u)&&(t=!0),u==="("&&n++,u===")"&&n--,!!t){if(n===0){if(u===" "&&["event","function","error",""].includes(o))o="";else if(o+=u,u===")"){s=!0;break}continue}if(u===" "){e[i-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}o+=u,r+=u}}if(!s)throw new D("Unable to normalize signature.");return o}function mo(e,t){let r=typeof e,n=t.type;switch(n){case"address":return Be(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>mo(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(e)&&e.every(o=>mo(o,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function li(e,t,r){for(let n in e){let o=e[n],s=t[n];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return li(o.components,s.components,r[n]);let i=[o.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Be(r[n],{strict:!1}):i.includes("address")&&i.includes("bytes")?Be(r[n],{strict:!1}):!1)return i}}function mi(e,t={}){let{prepare:r=!0}=t,n=Array.isArray(e)?so(e):typeof e=="string"?so(e):e;return{...n,...r?{hash:or(n)}:{}}}function _t(e,t,r){let{args:n=[],prepare:o=!0}=r??{},s=Ee(t,{strict:!1}),i=e.filter(c=>s?c.type==="function"||c.type==="error"?sr(c)===L(t,0,4):c.type==="event"?or(c)===t:!1:"name"in c&&c.name===t);if(i.length===0)throw new pt({name:t});if(i.length===1)return{...i[0],...o?{hash:or(i[0])}:{}};let u;for(let c of i){if(!("inputs"in c))continue;if(!n||n.length===0){if(!c.inputs||c.inputs.length===0)return{...c,...o?{hash:or(c)}:{}};continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==n.length)continue;if(n.every((f,l)=>{let m="inputs"in c&&c.inputs[l];return m?mo(f,m):!1})){if(u&&"inputs"in u&&u.inputs){let f=li(c.inputs,u.inputs,n);if(f)throw new pi({abiItem:c,type:f[0]},{abiItem:u,type:f[1]})}u=c}}let a=(()=>{if(u)return u;let[c,...d]=i;return{...c,overloads:d}})();if(!a)throw new pt({name:t});return{...a,...o?{hash:or(a)}:{}}}function sr(...e){let t=(()=>{if(Array.isArray(e[0])){let[r,n]=e;return _t(r,n)}return e[0]})();return L(or(t),0,4)}function Yl(...e){let t=(()=>{if(Array.isArray(e[0])){let[n,o]=e;return _t(n,o)}return e[0]})(),r=typeof t=="string"?t:Yr(t);return ho(r)}function or(...e){let t=(()=>{if(Array.isArray(e[0])){let[r,n]=e;return _t(r,n)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:W(J(Yl(t)))}var pi=class extends D{constructor(t,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${ho(Yr(t.abiItem))}\`, and`,`\`${r.type}\` in \`${ho(Yr(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},pt=class extends D{constructor({name:t,data:r,type:n="item"}){let o=t?` with name "${t}"`:r?` with data "${r}"`:"";super(`ABI ${n}${o} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};function sd(...e){let[t,r=[]]=(()=>{if(Array.isArray(e[0])){let[c,d,f]=e;return[yo(c,d,{args:f}),f]}let[u,a]=e;return[u,a]})(),{overloads:n}=t,o=n?yo([t,...n],t.name,{args:r}):t,s=yi(o),i=r.length>0?He(o.inputs,r):void 0;return i?U(s,i):s}function yo(e,t,r){let n=_t(e,t,r);if(n.type!=="function")throw new pt({name:t,type:"function"});return n}function yi(e){return sr(e)}var ad=rt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Ql=ad.create(BigInt("-3")),Gl=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),gi=Jt({a:Ql,b:Gl,Fp:ad,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ft);var cd=rt(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),Jl=cd.create(BigInt("-3")),Xl=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),ub=Jt({a:Jl,b:Xl,Fp:cd,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},tu);var ud=rt(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),ep=ud.create(BigInt("-3")),tp=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),db=Jt({a:ep,b:tp,Fp:ud,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},eu);var ir=gi,go=gi;function dd(e){let{privateKey:t}=e,r=go.ProjectivePoint.fromPrivateKey(typeof t=="string"?t.slice(2):Z(t).slice(2));return _e(r)}function fd(e={}){let{as:t="Hex"}=e,r=go.utils.randomPrivateKey();return t==="Hex"?Z(r):r}function bi(e){let{extraEntropy:t=Dn,hash:r,payload:n,privateKey:o}=e,{r:s,s:i,recovery:u}=go.sign(n instanceof Uint8Array?n:Oe(n),o instanceof Uint8Array?o:Oe(o),{extraEntropy:typeof t=="boolean"?t:be(t).slice(2),lowS:!0,...r?{prehash:!0}:{}});return{r:s,s:i,yParity:u}}function bo(e,t=0){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new xi({value:e});let[r="",n="0"]=e.split("."),o=r.startsWith("-");if(o&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),t===0)Math.round(+`.${n}`)===1&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>t){let[s,i,u]=[n.slice(0,t-1),n.slice(t-1,t),n.slice(t)],a=Math.round(+`${i}.${u}`);a>9?n=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):n=`${s}${a}`,n.length>t&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,t)}else n=n.padEnd(t,"0");return BigInt(`${o?"-":""}${r}${n}`)}var xi=class extends D{constructor({value:t}){super(`Value \`${t}\` is not a valid decimal number.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Value.InvalidDecimalNumberError"})}};var np=new TextEncoder,op=new TextDecoder,xo=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),wo={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function sp(e,t={}){let{pad:r=!0,url:n=!1}=t,o=new Uint8Array(Math.ceil(e.length/3)*4);for(let a=0,c=0;c<e.length;a+=4,c+=3){let d=(e[c]<<16)+(e[c+1]<<8)+(e[c+2]|0);o[a]=xo[d>>18],o[a+1]=xo[d>>12&63],o[a+2]=xo[d>>6&63],o[a+3]=xo[d&63]}let s=e.length%3,i=Math.floor(e.length/3)*4+(s&&s+1),u=op.decode(new Uint8Array(o.buffer,0,i));return r&&s===1&&(u+="=="),r&&s===2&&(u+="="),n&&(u=u.replaceAll("+","-").replaceAll("/","_")),u}function pd(e,t={}){return sp(Oe(e),t)}function Ao(e){let t=e.replace(/=+$/,""),r=t.length,n=new Uint8Array(r+3);np.encodeInto(t+"===",n);for(let s=0,i=0;s<t.length;s+=4,i+=3){let u=(wo[n[s]]<<18)+(wo[n[s+1]]<<12)+(wo[n[s+2]]<<6)+wo[n[s+3]];n[i]=u>>16,n[i+1]=u>>8&255,n[i+2]=u&255}let o=(r>>2)*3+(r%4&&r%4-1);return new Uint8Array(n.buffer,0,o)}function md(e){let t=e[4]===0?5:4,r=t+32,n=e[r+2]===0?r+3:r+2,o=BigInt(Z(e.slice(t,r))),s=BigInt(Z(e.slice(n)));return{r:o,s:s>ir.CURVE.n/2n?ir.CURVE.n-s:s}}async function hd(e){try{let t=e.getPublicKey();if(!t)throw new Nt;let r=new Uint8Array(t),n=await crypto.subtle.importKey("spki",new Uint8Array(r),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),o=new Uint8Array(await crypto.subtle.exportKey("raw",n));return _e(o)}catch(t){if(t.message!=="Permission denied to access object")throw t;let r=new Uint8Array(e.attestationObject),n=32,o=88,s=a=>{let c=new Uint8Array([a,o,n]);for(let d=0;d<r.length-c.length;d++)if(c.every((f,l)=>r[d+l]===f))return d+c.length;throw new Nt},i=s(33),u=s(34);return _e(new Uint8Array([4,...r.slice(i,i+n),...r.slice(u,u+n)]))}}var up=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function yd(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...r}=e,n=lp(r);try{let o=await t(n);if(!o)throw new Nt;let s=o.response,i=await hd(s);return{id:o.id,publicKey:i,raw:o}}catch(o){throw new Nt({cause:o})}}function dp(e={}){let{flag:t=5,rpId:r=window.location.hostname,signCount:n=0}=e,o=bs(J(r)),s=_(t,{size:1}),i=_(n,{size:4});return U(o,s,i)}function fp(e){let{challenge:t,crossOrigin:r=!1,extraClientData:n,origin:o=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:pd(t,{url:!0,pad:!1}),origin:o,crossOrigin:r,...n})}function lp(e){let{attestation:t="none",authenticatorSelection:r={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:n=up,excludeCredentialIds:o,extensions:s,name:i,rp:u={id:window.location.hostname,name:window.document.title},user:a}=e,c=a?.name??i;return{publicKey:{attestation:t,authenticatorSelection:r,challenge:n,...o?{excludeCredentials:o?.map(d=>({id:Ao(d),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],...s&&{extensions:s},rp:u,user:{id:a?.id??W($e(c),{as:"Bytes"}),name:c,displayName:a?.displayName??c}}}}function pp(e){let{credentialId:t,challenge:r,extensions:n,rpId:o=window.location.hostname,userVerification:s="required"}=e;return{publicKey:{...t?{allowCredentials:Array.isArray(t)?t.map(i=>({id:Ao(i),type:"public-key"})):[{id:Ao(t),type:"public-key"}]}:{},challenge:Oe(r),...n&&{extensions:n},rpId:o,userVerification:s}}}function gd(e){let{challenge:t,crossOrigin:r,extraClientData:n,flag:o,origin:s,rpId:i,signCount:u,userVerification:a="required"}=e,c=dp({flag:o,rpId:i,signCount:u}),d=fp({challenge:t,crossOrigin:r,extraClientData:n,origin:s}),f=bs(J(d)),l=d.indexOf('"challenge"'),m=d.indexOf('"type"'),h={authenticatorData:c,clientDataJSON:d,challengeIndex:l,typeIndex:m,userVerificationRequired:a==="required"},p=U(c,f);return{metadata:h,payload:p}}async function Io(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...r}=e,n=pp(r);try{let o=await t(n);if(!o)throw new vo;let s=o.response,i=String.fromCharCode(...new Uint8Array(s.clientDataJSON)),u=i.indexOf('"challenge"'),a=i.indexOf('"type"'),c=md(new Uint8Array(s.signature));return{metadata:{authenticatorData:Z(new Uint8Array(s.authenticatorData)),clientDataJSON:i,challengeIndex:u,typeIndex:a,userVerificationRequired:n.publicKey.userVerification==="required"},signature:c,raw:o}}catch(o){throw new vo({cause:o})}}var Nt=class extends D{constructor({cause:t}={}){super("Failed to create credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}},vo=class extends D{constructor({cause:t}={}){super("Failed to request credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}};async function xd(e={}){let{extractable:t=!1}=e,r=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),n=await globalThis.crypto.subtle.exportKey("raw",r.publicKey),o=_e(new Uint8Array(n));return{privateKey:r.privateKey,publicKey:o}}async function wd(e){let{payload:t,privateKey:r}=e,n=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},r,Ie(t)),o=Da(new Uint8Array(n)),s=Yo(Vo(o,0,32)),i=Yo(Vo(o,32,64));return i>ir.CURVE.n/2n&&(i=ir.CURVE.n-i),{r:s,s:i}}var wi="0x3232323232323232323232323232323232323232",Ai="0x32323232";var yp={p256:"p256",secp256k1:"secp256k1",webauthnp256:"webauthn-p256"},gp={admin:"admin",normal:"session"};var bp={0:"minute",1:"hour",2:"day",3:"week",4:"month",5:"year"},xp={address:"secp256k1",p256:"p256",secp256k1:"secp256k1","webauthn-p256":"webauthnp256"},wp={admin:"admin",session:"normal"},Ap={address:2,p256:0,secp256k1:2,"webauthn-p256":1},Ad={day:2,hour:1,minute:0,month:4,week:3,year:5};async function vi(e){let{createFn:t,label:r,rpId:n,userId:o}=e,s=await yd({authenticatorSelection:{requireResidentKey:!0,residentKey:"required",userVerification:"required"},createFn:t,extensions:{credProps:!0},rp:n?{id:n,name:n}:void 0,user:{displayName:r,id:new Uint8Array(o??$e(r)),name:r}});return Ei({...e,credential:{id:s.id,publicKey:s.publicKey},id:o?xr(o):et(s.publicKey,{includePrefix:!1})})}function Ii(e={}){let t=fd();return vp({...e,privateKey:t})}async function vd(e={}){let t=await xd();return Ip({...e,keyPair:t})}function fe(e,t={}){let{chainId:r=e.chainId}=t,{expiry:n=0,id:o,prehash:s=!1,role:i="admin",type:u}=e,a=(()=>{let c=e.publicKey;return c==="0x"?c:u==="secp256k1"||u==="address"?$(c)===20||wr(L(c,0,12))===0n?L(c,-20):Gt(Zt(c)):c})();return{...e,chainId:r,expiry:n,hash:Ed({publicKey:a,type:u}),id:(o??a).toLowerCase(),prehash:s,publicKey:a.toLowerCase(),role:i,type:u}}function Id(e,t){let{chainId:r}=t,{publicKey:n}=e,o=$(n)===20||wr(L(n,0,12))===0n,s={};for(let i of e.permissions)i.type==="call"&&(s.calls??=[],s.calls.push({signature:i.selector,to:i.to===wi?void 0:i.to})),i.type==="spend"&&(s.spend??=[],s.spend.push({limit:i.limit,period:i.period,token:i.token}));return fe({chainId:r,expiry:e.expiry,permissions:s,publicKey:e.publicKey,role:gp[e.role],type:o?"address":yp[e.type]})}function Ei(e){let{credential:t,id:r,rpId:n}=e,o=et(t.publicKey,{includePrefix:!1});return fe({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,id:r,permissions:e.permissions,privateKey:{credential:t,rpId:n},publicKey:o,role:e.role,type:"webauthn-p256"})}function vp(e){let{privateKey:t}=e,r=et(dd({privateKey:t}),{includePrefix:!1});return fe({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,permissions:e.permissions,privateKey:{privateKey(){return t}},publicKey:r,role:e.role,type:"webauthn-p256"})}function Ip(e){let{chainId:t,expiry:r,feeToken:n,keyPair:o,permissions:s,role:i}=e,{privateKey:u}=o,a=et(o.publicKey,{includePrefix:!1});return fe({chainId:t,expiry:r,feeToken:n,permissions:s,prehash:!0,privateKey:u,publicKey:a,role:i,type:"p256"})}function Ed(e){let{type:t}=e,r=Sd(e.publicKey);return W(He([{type:"uint8"},{type:"bytes32"}],[Ap[t],W(r)]))}function Sd(e){return $(e)<32?We(e,32):e}async function Re(e,t){let{address:r,storage:n,webAuthn:o,wrap:s=!0}=t,{privateKey:i,publicKey:u,type:a}=e;if(!i)throw new Error(`Key does not have a private key to sign with.

Key:
`+ve(e,null,2));let c=r?nr({domain:{verifyingContract:r},message:{digest:t.payload},primaryType:"ERC1271Sign",types:{ERC1271Sign:[{name:"digest",type:"bytes32"}]}}):t.payload,[d,f]=await(async()=>{if(a==="p256"){let{privateKey:l}=e;if(typeof l=="function")return[tr(bi({payload:c,privateKey:l()})),!1];if(l instanceof CryptoKey)return[tr(await wd({payload:c,privateKey:l})),!0]}if(a==="secp256k1")return[tr(_n({payload:c,privateKey:i()})),!1];if(a==="webauthn-p256"){if(i.privateKey){let{payload:k,metadata:S}=gd({challenge:c,origin:"https://ithaca.xyz",rpId:"ithaca.xyz"}),{r:B,s:R}=bi({hash:!0,payload:k,privateKey:i.privateKey()});return[Eo({metadata:S,signature:{r:B,s:R}}),!1]}let{credential:l,rpId:m}=i,h=`porto.webauthnVerified.${e.hash}`,p=Date.now(),b=10*60*1e3,w=!0;if(n){let k=await n.getItem(h);w=!k||p-k>b}let{signature:{r:A,s:g},raw:y,metadata:x}=await Io({challenge:c,credentialId:l.id,getFn:o?.getFn,rpId:m,userVerification:w?"required":"preferred"}),v=y.response;if(!v?.userHandle)throw new Error("No user handle in response",{cause:{response:v}});let I=xr(new Uint8Array(v.userHandle));if(e.id&&Be(e.id)&&!K(e.id,I))throw new Error(`supplied webauthn key "${e.id}" does not match signature webauthn key "${I}"`,{cause:{id:I,key:e}});return w&&n&&await n.setItem(h,p),[Eo({metadata:x,signature:{r:A,s:g}}),!1]}throw new Error(`Key type "${a}" is not supported.

Key:
`+ve(e,null,2))})();return s?Pi(d,{keyType:a,prehash:f,publicKey:u}):d}function Jr(e,t={}){let{expiry:r=0,prehash:n=!1,publicKey:o,role:s="admin",type:i}=e,{feeTokens:u,orchestrator:a}=t,c=Object.entries(Si(e,{feeTokens:u})).map(([d,f])=>{if(d==="calls")return f.map(({signature:m,to:h})=>({selector:m?Ee(m)?m:yi(m):Ai,to:h??wi,type:"call"}));if(d!=="feeToken"){if(d==="spend")return f.map(({limit:m,period:h,token:p})=>({limit:m,period:h,token:p,type:"spend"}));throw new Error(`Invalid permission type "${d}".`)}}).flat().filter(Boolean);return e.role==="session"&&a&&c.push({selector:Ai,to:a,type:"call"}),{expiry:r,permissions:c??[],prehash:n,publicKey:Sd(o),role:wp[s],type:xp[i]}}function Si(e,t){let{permissions:r}=e,n=r?.calls?[...r.calls]:[],o=r?.spend?[...r.spend]:[],s=t.feeTokens?.filter(i=>i.feeToken);if(s&&s.length>0){let i=Ep(e,{feeTokens:s});if(i){let u=-1,a=Ad.year;for(let c=0;c<o.length;c++){let d=o[c];if(d.token&&K(i.address,d.token)){u=c;break}if(!d.token&&i.address===gt){u=c;break}let f=Ad[d.period];f<a&&(a=f)}u!==-1?(o[u]={...o[u],limit:o[u].limit+i.value},o.unshift(o.splice(u,1)[0])):typeof a=="number"&&o.unshift({limit:i.value,period:bp[a],token:i.address})}}return{...r,calls:n,spend:o}}function Ep(e,t){let{feeTokens:r}=t;if(!e.feeToken)return;let n=r.find(s=>e.feeToken.symbol===s.symbol?!0:e.feeToken.symbol?e.feeToken.symbol==="native"?s.address===gt:!1:s.address===gt);if(!n)return;let o=bo(e.feeToken.limit,n.decimals);return{...n,value:o}}function Eo(e){let{metadata:t,signature:r}=e;return He(po(["struct WebAuthnAuth { bytes authenticatorData; string clientDataJSON; uint256 challengeIndex; uint256 typeIndex; bytes32 r; bytes32 s; }","WebAuthnAuth auth"]),[{authenticatorData:t.authenticatorData,challengeIndex:BigInt(t.challengeIndex),clientDataJSON:t.clientDataJSON,r:_(r.r,{size:32}),s:_(r.s,{size:32}),typeIndex:BigInt(t.typeIndex)}])}function Pi(e,t){let{keyType:r,prehash:n=!1,publicKey:o}=t,s=Ed({publicKey:o,type:r});return Gr(["bytes","bytes32","bool"],[e,s,n])}function ee(e){let t=typeof e=="string"?{address:e}:e,{address:r,sign:n,signMessage:o,signTransaction:s,signTypedData:i,type:u}=fi({address:t.address,sign({hash:a}){if(t.source==="privateKey")return t.sign({hash:a});throw new Error("`sign` not supported on porto accounts.")},signMessage({message:a}){return this.sign({hash:na(a)})},signTransaction(){throw new Error("`signTransaction` not supported on porto accounts.")},signTypedData(a){return this.sign({hash:oa(a)})}});return{address:r,keys:t.keys??void 0,sign:n,signMessage:o,signTransaction:s,signTypedData:i,source:t.source??"porto",type:u}}function ki(e,t={}){let{keys:r}=t,n=Gt(qs({privateKey:e}));return ee({address:n,keys:r,async sign({hash:o}){return tr(_n({payload:o,privateKey:e}))},source:"privateKey"})}function cr(e,t={}){let{key:r,role:n}=t;if(r!==null){if(typeof r=="object")return r;if(e.keys&&e.keys.length>0)return typeof r=="number"?e.keys[r]:e.keys.find(o=>o.privateKey&&(!n||o.role===n))}}async function mt(e,t){let{storage:r,replaySafe:n=!0,wrap:o=!0,webAuthn:s}=t,i=cr(e,t),u=n?nr({domain:{verifyingContract:e.address},message:{digest:t.payload},primaryType:"ERC1271Sign",types:{ERC1271Sign:[{name:"digest",type:"bytes32"}]}}):t.payload,a=i?({hash:c})=>Re(i,{address:null,payload:c,storage:r,webAuthn:s,wrap:o}):e.source==="privateKey"?e.sign:void 0;if(!a)throw new Error("cannot find key to sign with.");return await a({hash:u})}function So(e){return{...e,setup:e.setup??(()=>()=>{})}}async function en(e){let{account:t,calls:r,permissionsId:n}=e;if(typeof n<"u"){if(n===null)return;let i=t.keys?.find(u=>u.publicKey===n&&u.privateKey);if(!i)throw new Error(`permission (id: ${n}) does not exist.`);return i}let o=t.keys?.find(i=>!i.privateKey||i.role!=="session"||i.expiry<BigInt(Math.floor(Date.now()/1e3))?!1:!!r.every(a=>i.permissions?.calls?.some(c=>{if(c.to&&c.to!==a.to)return!1;if(c.signature){if(!a.data)return!1;let d=L(a.data,0,4);if(Ee(c.signature)&&c.signature!==d||sr(c.signature)!==d)return!1}return!0}))),s=t.keys?.find(i=>i.role==="admin"&&i.privateKey);return o??s}var tn=Ka;function Mi(e,t){let{chainId:r,expiry:n,permissions:o,id:s,publicKey:i,type:u}=e,{address:a}=t;return{address:a,chainId:r,expiry:n,id:s,key:{publicKey:i,type:u},permissions:o??{}}}function Bi(e){let{chainId:t,expiry:r,key:n}=e;return fe({chainId:t,expiry:r,permissions:e.permissions??{},publicKey:n.publicKey,role:"session",type:n.type})}var rn=qa;function nn(e){let{expiry:t,feeToken:r,permissions:n,publicKey:o,type:s}=e;return{expiry:t,feeToken:r??null,key:{publicKey:o,type:s},permissions:n??{}}}async function Ue(e,t={}){if(!e)return;let r=t.chainId??e.chainId,n=e.expiry??0,o=e.key?.type??"secp256k1",s=e.feeToken,i=Si(e,{feeTokens:t.feeTokens}),u=e?.key?.publicKey??"0x",a=fe({chainId:r,expiry:n,feeToken:s,permissions:i,publicKey:u,role:"session",type:o});return e?.key?a:await vd({...a,role:"session"})}var Pp=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,kp=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,Mp=/^localhost(:[0-9]{1,5})?$/,Bp=/^[a-zA-Z0-9]{8,}$/,zp=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,Rp=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Op=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function zd(e){let{chainId:t,domain:r,expirationTime:n,issuedAt:o=new Date,nonce:s,notBefore:i,requestId:u,resources:a,scheme:c,uri:d,version:f}=e;{if(t!==Math.floor(t))throw new Ke({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${t}`]});if(!(Pp.test(r)||kp.test(r)||Mp.test(r)))throw new Ke({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${r}`]});if(!Bp.test(s))throw new Ke({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${s}`]});if(!Bd(d))throw new Ke({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${d}`]});if(f!=="1")throw new Ke({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${f}`]});if(c&&!zp.test(c))throw new Ke({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${c}`]});let w=e.statement;if(w?.includes(`
`))throw new Ke({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${w}`]})}let l=Ss(e.address,{checksum:!0}),m=c?`${c}://${r}`:r,h=e.statement?`${e.statement}
`:"",p=`${m} wants you to sign in with your Ethereum account:
${l}

${h}`,b=`URI: ${d}
Version: ${f}
Chain ID: ${t}
Nonce: ${s}
Issued At: ${o.toISOString()}`;if(n&&(b+=`
Expiration Time: ${n.toISOString()}`),i&&(b+=`
Not Before: ${i.toISOString()}`),u&&(b+=`
Request ID: ${u}`),a){let w=`
Resources:`;for(let A of a){if(!Bd(A))throw new Ke({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${A}`]});w+=`
- ${A}`}b+=w}return`${p}
${b}`}function Bd(e){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e)||/%[^0-9a-f]/i.test(e)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;let t=Tp(e),r=t[1],n=t[2],o=t[3],s=t[4],i=t[5];if(!(r?.length&&o&&o.length>=0))return!1;if(n?.length){if(!(o.length===0||/^\//.test(o)))return!1}else if(/^\/\//.test(o))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(r.toLowerCase()))return!1;let u="";return u+=`${r}:`,n?.length&&(u+=`//${n}`),u+=o,s?.length&&(u+=`?${s}`),i?.length&&(u+=`#${i}`),u}function Tp(e){return e.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}function Rd(e){let{scheme:t,statement:r,...n}=e.match(Rp)?.groups??{},{chainId:o,expirationTime:s,issuedAt:i,notBefore:u,requestId:a,...c}=e.match(Op)?.groups??{},d=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...c,...o?{chainId:Number(o)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...u?{notBefore:new Date(u)}:{},...a?{requestId:a}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}var Ke=class extends D{constructor(t){let{field:r,metaMessages:n}=t;super(`Invalid Sign-In with Ethereum message field "${r}".`,{metaMessages:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Siwe.InvalidMessageFieldError"})}};async function Ri(e){let{address:t,authUrl:r,message:n,signature:o}=e,{chainId:s}=Rd(n);return await fetch(r.verify,{body:JSON.stringify({address:t,chainId:s,message:n,signature:o,walletAddress:t}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}).then(i=>i.json())}async function Po(e,t,r){let{chainId:n=e.chain?.id,domain:o,uri:s,resources:i,version:u="1"}=t,{address:a}=r,c=t.authUrl?Oi(t.authUrl):void 0;if(!n)throw new Error("`chainId` is required.");if(!o)throw new Error("`domain` is required.");if(!t.nonce&&!c?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");if(!s)throw new Error("`uri` is required.");let d=await(async()=>{if(t.nonce)return t.nonce;if(!c?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");let m=await(await fetch(c.nonce,{body:JSON.stringify({address:a,chainId:n,walletAddress:a}),headers:{"Content-Type":"application/json"},method:"POST"})).json().catch(()=>{});if(!m?.nonce)throw new Error("`nonce` or `authUrl.nonce` is required.");return m.nonce})();return zd({...t,address:r.address,chainId:n,domain:o,nonce:d,resources:i,uri:s,version:u})}function Oi(e,t=""){if(!e)return;let r=(()=>{if(typeof e=="string"){let n=e.replace(/\/$/,"");return{logout:n+"/logout",nonce:n+"/nonce",verify:n+"/verify"}}return e})();return{logout:zi(r.logout,t),nonce:zi(r.nonce,t),verify:zi(r.verify,t)}}function zi(e,t){return!t||!e.startsWith("/")?e:t+e}function Dp(e){let t=be(e);return U("0x19",J(`Ethereum Signed Message:
`+$(t)),t)}function on(e){return W(Dp(e))}function ko(e,t={}){return mi(e,t)}function Dd(e,t,r){if(t==="Error")return Td;if(t==="Panic")return jd;if(Ee(t,{strict:!1})){let o=L(t,0,4);if(o===Np)return Td;if(o===Cp)return jd}let n=_t(e,t,r);if(n.type!=="error")throw new pt({name:t,type:"error"});return n}var Td=ko({inputs:[{name:"message",type:"string"}],name:"Error",type:"error"}),Np="0x08c379a0",jd=ko({inputs:[{name:"reason",type:"uint8"}],name:"Panic",type:"error"}),Cp="0x4e487b71";function Up(e,t){let{as:r}=t,n=Nd(e),o=Xu(new Uint8Array(n.length));return n.encode(o),r==="Hex"?Z(o.bytes):o.bytes}function _d(e,t={}){let{as:r="Hex"}=t;return Up(e,{as:r})}function Nd(e){return Array.isArray(e)?Kp(e.map(t=>Nd(t))):qp(e)}function Kp(e){let t=e.reduce((o,s)=>o+s.length,0),r=Cd(t);return{length:t<=55?1+t:1+r+t,encode(o){t<=55?o.pushByte(192+t):(o.pushByte(247+r),r===1?o.pushUint8(t):r===2?o.pushUint16(t):r===3?o.pushUint24(t):o.pushUint32(t));for(let{encode:s}of e)s(o)}}}function qp(e){let t=typeof e=="string"?Oe(e):e,r=Cd(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(o){t.length===1&&t[0]<128?o.pushBytes(t):t.length<=55?(o.pushByte(128+t.length),o.pushBytes(t)):(o.pushByte(183+r),r===1?o.pushUint8(t.length):r===2?o.pushUint16(t.length):r===3?o.pushUint24(t.length):o.pushUint32(t.length),o.pushBytes(t))}}}function Cd(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new D("Length is too large.")}function Hd(e){return $p(e,{presign:!0})}function $p(e,t={}){let{presign:r}=t;return W(U("0x05",_d(Wp(r?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function Wp(e){let{address:t,chainId:r,nonce:n}=e,o=Pu(e);return[r?_(r):"0x",t,n?_(n):"0x",...o?ku(o):[]]}var Mo=class extends un{constructor(){super("Function is not recognized.",{metaMessages:["This could be due to any of the following:","  - The contract does not have the function,","  - The address is not a contract."],name:"FunctionSelectorNotRecognizedError"})}};function Ud(e,t={}){return sa(e,t)}function Kd(e){return ia(e)}function Ti(e,t){let r=e.walk(o=>"data"in o);if(!r?.data)return e;if(r.data===Kd(Ud("error FnSelectorNotRecognized()")))return new Mo;let n=null;for(let o of t.calls){let s=o;if(s.abi)try{if(!!!ea({abi:s.abi,data:r.data}))continue;n=s}catch{}}return n?ta(r,{abi:n.abi,address:n.to,args:n.args,functionName:n.functionName}):e}async function ji(e,t){let{account:r=e.account}=t,n=r?ee(r):void 0;if(!n)throw new Error("account is required.");let{domain:{name:o,version:s}}=await ra(e,{address:n.address});if(!e.chain)throw new Error("client.chain is required");return{chainId:e.chain.id,name:o,verifyingContract:n.address,version:s}}async function Ni(e,t){try{let r="wallet_getAuthorization",n=await yr(()=>e.request({method:r,params:[q(Go.Parameters,t)]}),{cacheKey:`${e.uid}.${r}.${t.address}`});return G(Go.Response,n)}catch(r){throw we(r),r}}async function st(e,t={}){let r=(()=>{if(t.chainId)return[t.chainId];if(t.chainIds!=="all")return t.chainIds?t.chainIds:[e.chain.id]})();try{let n="wallet_getCapabilities",o=await yr(()=>e.request({method:n,params:r?[r]:void 0},{retryCount:0}),{cacheKey:`${e.uid}.${n}.${r?.join(",")}`}),s=t.raw?o:G(Ca.Response,o);return t.chainIds?s:Object.values(s)[0]}catch(n){throw we(n),n}}async function Ci(e,t){let{account:r,assetFilter:n,assetTypeFilter:o,chainFilter:s}=t;try{let u=await e.request({method:"wallet_getAssets",params:[q(Jo.Parameters,{account:r,assetFilter:n,assetTypeFilter:o,chainFilter:s})]}),a=G(Jo.Response,u),c=Object.entries(a).reduce((f,[l,m])=>(f[Et(l)]=m,f),{}),d={};for(let f of Object.values(c))for(let l of f){let m=JSON.stringify(l.metadata);d[m]={...l,balance:l.balance+(d[m]?.balance??0n)}}return{...c,0:Object.values(d)}}catch(i){throw we(i),i}}async function Bo(e,t){let{id:r}=t;try{let o=await e.request({method:"wallet_getCallsStatus",params:[r]});return G(Ha.Response,o)}catch(n){throw we(n),n}}async function qd(e,t){let{address:r,chainIds:n}=t;try{let s=await e.request({method:"wallet_getKeys",params:[q(Xo.Parameters,{address:r,chainIds:n})]});return G(Xo.Response,s)}catch(o){throw we(o),o}}async function Ld(e,t){let{address:r,capabilities:n,chain:o=e.chain,key:s}=t,i=t.calls.map(u=>({data:u.abi?sd(yo(u.abi,u.functionName),u.args):u.data??"0x",to:u.to,value:u.value??0n}));try{let a=await e.request({method:"wallet_prepareCalls",params:[q(es.Parameters,{calls:i,capabilities:{...n,meta:{...n?.meta}},chainId:o?.id,from:r,key:s?{prehash:s.prehash,publicKey:s.publicKey,type:s.type}:void 0})]},{retryCount:0});return G(es.Response,a)}catch(u){throw we(u),ur(u,{calls:t.calls}),u}}async function $d(e,t){let{address:r,chain:n=e.chain,delegation:o,...s}=t;try{let u=await e.request({method:"wallet_prepareUpgradeAccount",params:[q(ts.Parameters,Te({address:r,capabilities:s,chainId:n?.id,delegation:o}))]},{retryCount:0});return G(ts.Response,u)}catch(i){throw we(i),ur(i),i}}async function Wd(e,t){let{capabilities:r,context:n,key:o,signature:s}=t;try{let u=await e.request({method:"wallet_sendPreparedCalls",params:[q(rs.Parameters,{capabilities:r,context:{preCall:n.preCall,quote:n.quote},key:o?{prehash:o.prehash,publicKey:o.publicKey,type:o.type}:void 0,signature:s})]},{retryCount:0});return G(rs.Response,u)}catch(i){throw we(i),ur(i),i}}async function Vd(e,t){let{email:r,walletAddress:n}=t;try{let s=await e.request({method:"account_setEmail",params:[q(Zo.Parameters,{email:r,walletAddress:n})]},{retryCount:0});return G(Zo.Response,s)}catch(o){throw we(o),ur(o),o}}async function Yd(e,t){let{context:r,signatures:n}=t;try{await e.request({method:"wallet_upgradeAccount",params:[q(Ua.Parameters,{context:r,signatures:n})]},{retryCount:0})}catch(o){throw we(o),ur(o),o}}async function Fd(e,t){let{chainId:r,email:n,signature:o,token:s,walletAddress:i}=t;try{let a=await e.request({method:"account_verifyEmail",params:[q(Qo.Parameters,{chainId:r,email:n,signature:o,token:s,walletAddress:i})]},{retryCount:0});return G(Qo.Response,a)}catch(u){throw we(u),ur(u),u}}async function zo(e,t){let{address:r,chain:n=e.chain,digest:o,signature:s}=t;try{async function i(){return{proof:null,valid:await aa(e,{address:r,hash:o,signature:s})}}let u="wallet_verifySignature",a=await(async()=>{let c=await e.request({method:u,params:[q(ns.Parameters,{address:r,chainId:n?.id,digest:o,signature:s})]},{retryCount:0}).catch(i);return c.valid?c:i()})();return G(ns.Response,a)}catch(i){throw we(i),i}}function ur(e,{calls:t}={}){if(!(e instanceof un))return;let r=s=>{try{if(s.name==="ContractFunctionExecutionError"){let c=s.cause.name==="ContractFunctionRevertedError"?s.cause.data:void 0;if(c)return Dd([c.abiItem],c.errorName)}let i=s.walk(c=>!(c instanceof Error)&&c.code===3);if(!i)return;let{data:u,message:a}=i;return u==="0xd0d5039b"?ko("error Unauthorized()"):{inputs:[],name:(a??u).split("(")[0],type:"error"}}catch{return}},n=Ti(e,{calls:t??[]}),o=r(n);if(!(n===e&&!o))throw new Di(Object.assign(n,{abiError:o}))}function we(e){if(e.name==="$ZodError")throw mn(e)}var Di=class extends D{constructor(t){super("An error occurred while executing calls.",{cause:t,metaMessages:[t.abiError&&"Reason: "+t.abiError.name].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Rpc.ExecutionError"}),Object.defineProperty(this,"abiError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiError=t.abiError}};var Zd=["anvil.localhost","app.ens.domains","app.uniswap.org","bluestake.vercel.app","bungee.exchange","cartel.sh","cctp.exchange","cut-v2.mattlovan.dev","daimo.ngrok.app","eco.com","happypath.enso.build","id.porto.sh","jumper.exchange","localhost","paper.ink","pay.daimo.com","playground.li.fi","playground.porto.sh","portal.eco.com","porto.sh","preview.porto.sh","rath.fi","relay.link","sponsor-porto.vercel.app","stg.localhost","swap.defillama.com","uniswap.org","www.bungee.exchange"];async function Ui(e,t){let{account:r=e.account,chainIds:n}=t,o=r?ee(r):void 0;if(!o)throw new Error("account is required.");let s=await qd(e,{address:o.address,chainIds:n});return Object.entries(s).flatMap(([i,u])=>u.map(a=>Id(a,{chainId:Number(i)})))}async function dr(e,t){let{account:r=e.account,calls:n,chain:o=e.chain,feePayer:s,merchantUrl:i,nonce:u,preCalls:a,requiredFunds:c,revokeKeys:d}=t,f=r?ee(r):void 0,l=t.key??(f?cr(f,{role:"admin"}):void 0),m=t.authorizeKeys?.some(S=>S.role==="session"),{contracts:h,fees:{tokens:p}}=await st(e),b=m?h.orchestrator.address:void 0,w=(t.authorizeKeys??[]).map(S=>Jr(S,{feeTokens:p,orchestrator:b})),A=t.feeToken?t.feeToken:l?.permissions?.spend?.[0]?.token,g=typeof a=="boolean"?a:!1,y=typeof a=="object"?a.map(({context:S,signature:B})=>({...S.preCall,signature:B})):void 0;async function x(S){if(!o)throw new Error("chain is required.");return await Ld(S,{address:f?.address,calls:n??[],capabilities:{authorizeKeys:w,meta:{feePayer:s,feeToken:A,nonce:u},preCall:g,preCalls:y,requiredFunds:c,revokeKeys:d?.map(B=>({hash:B.hash}))},chain:o,key:l?Jr(l,{feeTokens:p}):void 0})}let{capabilities:v,context:I,digest:P,typedData:k}=await(async()=>{if(i){let S=new URL(i).hostname;if(!Zd.includes(S)&&!o?.testnet)throw new Error('Merchant hostname "'+S+`" is not trusted.
Open a PR to add your hostname: https://github.com/ithacaxyz/porto/edit/main/src/trusted-hosts.ts`);let B=dn({chain:e.chain,transport:xt(i)});return await x(B).catch(R=>(console.error(R),x(e)))}return await x(e)})();return{capabilities:{...v,quote:I.quote},context:I,digest:P,key:l,typedData:k}}async function Ki(e,t){let{address:r,authorizeKeys:n,chain:o=e.chain}=t;if(!o)throw new Error("chain is required.");let{contracts:s,fees:{tokens:i}}=await st(e),u=t.delegation??s.accountProxy.address,c=n.some(w=>w.role==="session")?s.orchestrator.address:void 0,d=n.map(w=>{let A=w.role==="session"?w.permissions:{};return Jr({...w,permissions:A},{feeTokens:i,orchestrator:c})}),{capabilities:f,chainId:l,context:m,digests:h,typedData:p}=await $d(e,{address:r,authorizeKeys:d,chain:o,delegation:u}),b=ee({address:r,keys:n});return{capabilities:f,chainId:l,context:{...m,account:b},digests:h,typedData:p}}async function sn(e,t){let{account:r=e.account,chain:n=e.chain}=t;if(!n)throw new Error("`chain` is required.");let o=r?ee(r):void 0;if(!o)throw new Error("`account` is required.");let s=t.key??cr(o,t);if(!s&&!o.sign)throw new Error("`key` or `account` with `sign` is required");let i=await Promise.all((t.preCalls??[]).map(async f=>{if(f.signature)return f;let{authorizeKeys:l,key:m,calls:h,revokeKeys:p}=f,{context:b,digest:w}=await dr(e,{account:o,authorizeKeys:l,calls:h,chain:n,feeToken:t.feeToken,key:m,preCalls:!0,revokeKeys:p}),A=await Re(m,{address:null,payload:w});return{context:b,signature:A}})),{capabilities:u,context:a,digest:c}=await dr(e,{...t,account:o,chain:n,key:s,preCalls:i}),d=await(async()=>s?await Re(s,{address:null,payload:c,wrap:!1}):await o.sign({hash:c}))();return await an(e,{capabilities:u.feeSignature?{feeSignature:u.feeSignature}:void 0,context:a,key:s,signature:d})}async function an(e,t){let{capabilities:r,context:n,key:o,signature:s}=t;return await Wd(e,{capabilities:r,context:n,key:o?Jr(o):void 0,signature:s})}async function qi(e,t){let{email:r,walletAddress:n}=t;return await Vd(e,{email:r,walletAddress:n})}async function Ro(e,t){if(t.account){let{account:s}=t,i=[...s.keys??[],...t.authorizeKeys??[]].filter((d,f,l)=>l.findIndex(m=>m.id===d.id)===f),{digests:u,...a}=await Ki(e,{...t,address:s.address,authorizeKeys:i}),c={auth:await s.sign({hash:u.auth}),exec:await s.sign({hash:u.exec})};return await Ro(e,{...a,signatures:c})}let{context:r,signatures:n}=t,o=ee(r.account);return await Yd(e,{context:r,signatures:n}),o}async function Qd(e,t){let{chainId:r,email:n,signature:o,token:s,walletAddress:i}=t;return await Fd(e,{chainId:r,email:n,signature:o,token:s,walletAddress:i})}var Gd="0x8010801080108010801080108010801080108010801080108010801080108010",Gp=po("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Jp(e){if(typeof e=="string"){if(L(e,-32)!==Gd)throw new $i(e)}else Hn(e.authorization)}function Jd(e){let{data:t,signature:r}=e;Jp(e);let n=Iu({payload:Hd(e.authorization),signature:Qs(e.authorization)}),o=He(Gp,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??n,t??"0x"]),s=_($(o),{size:32});return U(r,o,s,Gd)}var $i=class extends D{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};async function fr(e,t){let{address:r}=t,{authorization:n,data:o,to:s}=await Ni(e,{address:r});return Jd({authorization:{...n,nonce:BigInt(n.nonce),r:BigInt(n.r),s:BigInt(n.s)},data:o,signature:t.signature,to:s})}function Wi(e,t){let{tokens:r}=t,n=r.filter(o=>o.interop);return e.map(o=>{if(o.address)return o;let s=n.find(i=>i.symbol===o.symbol);if(!s)throw new Error(`interop token not found: ${o.symbol}`);return{address:s.address,value:bo(o.value,s.decimals)}})}async function it(e,t){let{chain:r=e.chain}=t??{};return await st(e,{chainId:r?.id}).then(o=>o.fees.tokens)}async function Vi(e,t){let{addressOrSymbol:r}=t;return(await it(e,t)).find(Vi.predicate(r))}(function(e){function t(r){return n=>r?Be(r)?K(n.address,r):r==="native"?n.address===gt:r===n.symbol:!1}e.predicate=t})(Vi||(Vi={}));async function Ct(e,t){let{chain:r=e.chain,store:n}=t??{},o=n?.getState()??{},s=t?.addressOrSymbol??o.feeToken;return(await it(e,{chain:r}).then(a=>a.filter(c=>c.feeToken)))?.find(a=>s?s==="native"&&a.address===gt||Be(s)&&K(a.address,s)?!0:s===a.symbol:!1)}function Oo(e={}){let t=e,{mock:r,multichain:n=!0,webAuthn:o}=t,s,i,u=(()=>{if(t.keystoreHost!=="self"&&!(typeof window<"u"&&window.location?.hostname==="localhost"))return t.keystoreHost})();return So({actions:{async addFunds(){throw new Qe},async createAccount(a){let{admins:c,email:d,label:f,permissions:l,internal:m,signInWithEthereum:h}=a,{client:p}=m,b=ki(Ls()),w=await it(p),A=r?Ii():await vi({createFn:o?.createFn,label:f||`${b.address.slice(0,8)}\u2026${b.address.slice(-6)}`,rpId:u,userId:Ie(b.address)}),g=await Ue(l,{chainId:p.chain.id,feeTokens:w}),y=c?.map(I=>fe(I)),x=await Ro(p,{account:b,authorizeKeys:[A,...y??[],...g?[g]:[]]});s=b.address,d&&f&&await qi(p,{email:f,walletAddress:x.address});let v=await(async()=>{if(!h)return;let I=await Po(p,h,{address:x.address}),P=await mt(b,{payload:on(J(I))}),k=await fr(p,{address:x.address,signature:P});return{message:I,signature:k}})();return{account:{...x,signInWithEthereum:v}}},async getAccountVersion(a){let{address:c,internal:d}=a,{client:f}=d,{contracts:l}=await st(f),{accountImplementation:m}=l,h=await ji(f,{account:ee(m)}).then(b=>b.version),p=await ji(f,{account:c}).then(b=>b.version).catch(()=>h);if(!p||!h)throw new Error("version not found.");return{current:p,latest:h}},async getAssets(a){let{account:c,chainFilter:d,assetFilter:f,assetTypeFilter:l,internal:m}=a,{client:h}=m;return await Ci(h,{account:c,assetFilter:f,assetTypeFilter:l,chainFilter:d})},async getCallsStatus(a){let{id:c,internal:d}=a,{client:f}=d,l=await Bo(f,{id:c});return{atomic:!0,chainId:_(f.chain.id),id:c,receipts:l.receipts?.map(m=>({blockHash:m.blockHash,blockNumber:_(m.blockNumber),gasUsed:_(m.gasUsed),logs:m.logs,status:m.status,transactionHash:m.transactionHash})),status:l.status,version:"1.0"}},async getCapabilities(a){let{chainIds:c,internal:d}=a,{getClient:f}=d,l={atomic:{status:"supported"},atomicBatch:{supported:!0},feeToken:{supported:!0,tokens:[]},merchant:{supported:!0},permissions:{supported:!0},requiredFunds:{supported:!!n,tokens:[]}};return await Promise.all(c.map(async h=>{let p=await(async()=>{try{return await st(f(h),{raw:!0})}catch{return null}})();return{[h]:{...l,...p?{feeToken:{supported:!0,tokens:p.fees.tokens},requiredFunds:{supported:!!n,tokens:n?p.fees.tokens.filter(b=>b.interop):[]}}:{}}}})).then(h=>h.reduce((p,b)=>({...p,...b}),{}))},async getKeys(a){let{account:c,chainIds:d,internal:f}=a,{client:l}=f,m=await Ui(l,{account:c,chainIds:d});return wn([...m,...c.keys??[]],h=>h.publicKey)},async grantAdmin(a){let{account:c,internal:d}=a,{client:f}=d,l=fe(a.key,{chainId:f.chain.id}),m=await Ct(f,{addressOrSymbol:a.feeToken,store:d.store}),{id:h}=await sn(f,{account:c,authorizeKeys:[l],feeToken:m?.address});return await bt(f,{id:h,pollingInterval:500}),{key:l}},async grantPermissions(a){let{account:c,internal:d,permissions:f}=a,{client:l}=d,m=await it(l),h=await Ue(f,{chainId:l.chain.id,feeTokens:m});if(!h)throw new Error("key to authorize not found.");let p=c.keys?.find(g=>g.role==="admin"&&g.privateKey);if(!p)throw new Error("admin key not found.");let{context:b,digest:w}=await dr(l,{account:c,authorizeKeys:[h],key:p,preCalls:!0}),A=await Re(p,{address:null,payload:w});return await an(l,{context:b,key:p,signature:A}),{key:h}},async loadAccounts(a){let{internal:c,permissions:d,signInWithEthereum:f}=a,{client:l}=c,m=await it(l),h=await Ue(d,{chainId:l.chain.id,feeTokens:m}),{digest:p,digestType:b,message:w}=await(async()=>{if(f&&a.address){let S=await Po(l,f,{address:a.address});return{context:void 0,digest:on(J(S)),digestType:"siwe",message:S}}return{context:void 0,digest:"0x",message:void 0}})(),{address:A,credentialId:g,webAuthnSignature:y}=await(async()=>{if(r){if(!s)throw new Error("address_internal not found.");return{address:s,credentialId:void 0}}if(a.address&&a.key)return{address:a.address,credentialId:a.key.credentialId};let S=await Io({challenge:p,getFn:o?.getFn,rpId:u}),B=S.raw.response,R=xr(new Uint8Array(B.userHandle)),z=S.raw.id;return{address:R,credentialId:z,webAuthnSignature:S}})(),x=await Ui(l,{account:A,chainIds:[l.chain.id]}),v=ee({address:A,keys:[...x,...h?[h]:[]].map((S,B)=>B===0&&S.type==="webauthn-p256"?Ei({...S,credential:{id:g,publicKey:Zt(S.publicKey)},id:A}):S)}),I=cr(v,{role:"admin"}),P=await(async()=>{if(p!=="0x")return y?Pi(Eo(y),{keyType:"webauthn-p256",publicKey:I.publicKey}):await Re(I,{address:v.address,payload:p})})();if(h){let{context:S,digest:B}=await dr(l,{account:v,authorizeKeys:[h],preCalls:!0}),R=await Re(I,{address:null,payload:B});await an(l,{context:S,key:I,signature:R})}let k=await(async()=>{if(f){if(b==="siwe"&&w&&P){let S=await fr(l,{address:v.address,signature:P});return{message:w,signature:S}}{let S=await Po(l,f,{address:v.address}),B=await mt(v,{payload:on(J(S)),role:"admin"}),R=await fr(l,{address:v.address,signature:B});return{message:S,signature:R}}}})();return{accounts:[{...v,signInWithEthereum:k}]}},async prepareCalls(a){let{account:c,calls:d,internal:f,merchantUrl:l}=a,{client:m}=f,h=a.key??await en({account:c,calls:d});if(!h)throw new Error("cannot find authorized key to sign with.");let[p,b]=await Promise.all([it(m),Ct(m,{addressOrSymbol:a.feeToken,store:f.store})]),w=Wi(a.requiredFunds??[],{tokens:p}),{capabilities:A,context:g,digest:y,typedData:x}=await dr(m,{account:c,calls:d,feeToken:b?.address,key:h,merchantUrl:l,requiredFunds:n?w:void 0}),v=g.quote?.quotes??[],I=v[v.length-1];return{account:c,capabilities:{...A,quote:g.quote},chainId:m.chain.id,context:{...g,account:c,calls:d,nonce:I?.intent.nonce},digest:y,key:h,typedData:x}},async prepareUpgradeAccount(a){let{address:c,email:d,label:f,internal:l,permissions:m}=a,{client:h}=l,[p,b]=await Promise.all([it(h),Ct(h,{store:l.store})]),w=r?Ii():await vi({createFn:o?.createFn,label:f||`${c.slice(0,8)}\u2026${c.slice(-6)}`,rpId:u,userId:Ie(c)}),A=await Ue(m,{chainId:h.chain.id,feeTokens:p}),{context:g,digests:y}=await Ki(h,{address:c,authorizeKeys:[w,...A?[A]:[]],feeToken:b?.address});return d&&(i=f),{context:g,digests:y}},async revokeAdmin(a){let{account:c,id:d,internal:f}=a,{client:l}=f,m=c.keys?.find(h=>h.id===d);if(m){if(m.type==="webauthn-p256"&&c.keys?.filter(h=>h.type==="webauthn-p256").length===1)throw new Error("revoke the only WebAuthn key left.");try{let h=await Ct(l,{addressOrSymbol:a.feeToken,store:f.store}),{id:p}=await sn(l,{account:c,feeToken:h?.address,revokeKeys:[m]});await bt(l,{id:p})}catch(h){let p=h;if(p.name==="Rpc.ExecutionError"&&p.abiError?.name==="KeyDoesNotExist")return;throw h}}},async revokePermissions(a){let{account:c,id:d,internal:f}=a,{client:l}=f,m=c.keys?.find(h=>h.id===d);if(m){if(m.role==="admin")throw new Error("cannot revoke admins.");try{let h=await Ct(l,{addressOrSymbol:a.feeToken,store:f.store}),{id:p}=await sn(l,{account:c,feeToken:h?.address,revokeKeys:[m]});await bt(l,{id:p})}catch(h){let p=h;if(p.name==="Rpc.ExecutionError"&&p.abiError?.name==="KeyDoesNotExist")return;throw h}}},async sendCalls(a){let{account:c,asTxHash:d,calls:f,internal:l,merchantUrl:m}=a,{client:h}=l,p=await en({account:c,calls:f,permissionsId:a.permissionsId}),[b,w]=await Promise.all([it(h),Ct(h,{addressOrSymbol:a.feeToken,store:l.store})]),A=Wi(a.requiredFunds??[],{tokens:b}),g=await sn(h,{account:c,calls:f,feeToken:w?.address,key:p,merchantUrl:m,requiredFunds:n?A:void 0});if(d){let{id:y,receipts:x,status:v}=await bt(h,{id:g.id,pollingInterval:500});if(!x?.[0])throw v==="success"?new Ge({message:"Call bundle with id: "+y+" not found."}):new Ye({message:"Transaction failed under call bundle id: "+y+"."});return{id:x[0].transactionHash}}return g},async sendPreparedCalls(a){let{context:c,key:d,internal:f,signature:l}=a,{client:m}=f,{id:h}=await an(m,{context:c,key:d,signature:l});return h},async signPersonalMessage(a){let{account:c,data:d,internal:f}=a,{client:l}=f,m=c.keys?.find(p=>p.role==="admin"&&p.privateKey);if(!m)throw new Error("cannot find admin key to sign with.");let h=await mt(c,{key:m,payload:on(d),webAuthn:o});return fr(l,{address:c.address,signature:h})},async signTypedData(a){let{account:c,internal:d}=a,{client:f}=d,l=c.keys?.find(b=>b.role==="admin"&&b.privateKey);if(!l)throw new Error("cannot find admin key to sign with.");let m=ja(a.data),h=m.domain?.name==="Orchestrator",p=await mt(c,{key:l,payload:nr(m),replaySafe:!h,webAuthn:o});return h?p:fr(f,{address:c.address,signature:p})},async upgradeAccount(a){let{account:c,context:d,internal:f,signatures:l}=a,{client:m}=f;return await Ro(m,{context:d,signatures:l}),i&&await qi(m,{email:i,walletAddress:c.address}),{account:c}},async verifyEmail(a){let{account:c,chainId:d,email:f,token:l,internal:m,walletAddress:h}=a,{client:p}=m,b=c.keys?.find(A=>A.role==="admin"&&A.privateKey);if(!b)throw new Error("cannot find admin key to sign with.");let w=await mt(c,{key:b,payload:W(J(`${f}${l}`)),webAuthn:o});return await Qd(p,{chainId:d,email:f,signature:w,token:l,walletAddress:h})}},config:e,name:"rpc"})}function Xd(e={}){let{fallback:t=Oo(),host:r=In.prod,renderer:n=Ic(),theme:o,themeController:s}=e,i=new Set,u=kc();function a(c){return bn({async request(d){let f=u.prepare(d);return c.setState(l=>{let m=l.accounts[0],h=m?.keys?.find(p=>p.role==="admin"&&p.type==="webauthn-p256");return{...l,requestQueue:[...l.requestQueue,{account:m?{address:m.address,key:h?{credentialId:h?.credentialId,publicKey:h.publicKey}:void 0}:void 0,request:f,status:"pending"}]}}),new Promise((l,m)=>{let h=p=>{let b=p.find(w=>w.request.id===f.id);if(!b&&p.length===0){i.delete(h),m(new Se);return}b&&(b.status!=="success"&&b.status!=="error"||(i.delete(h),b.status==="success"?l(b.result):m(us(b.error)),c.setState(w=>({...w,requestQueue:w.requestQueue.filter(A=>A.request.id!==f.id)}))))};i.add(h)})}},{schema:Mc()})}return So({actions:{async addFunds(c){let{internal:d}=c,{request:f,store:l}=d;if(f.method!=="wallet_addFunds")throw new Error("Cannot add funds for method: "+f.method);return await a(l).request(f)},async createAccount(c){let{internal:d}=c,{client:f,config:l,request:m,store:h}=d,{storage:p}=l,b=a(h);return{account:await(async()=>{if(m.method==="wallet_connect"){let[{capabilities:A,chainIds:g}]=m._decoded.params??[{}],y=Yi(A?.signInWithEthereum?.authUrl??l.authUrl,{storage:p}),x=m.params?.[0]?.capabilities?.signInWithEthereum,v=await Ue(A?.grantPermissions,{chainId:f.chain.id}),I=v?q(rn,nn(v)):void 0,{accounts:P}=await b.request({...m,params:[{capabilities:{...m.params?.[0]?.capabilities,grantPermissions:I,signInWithEthereum:y||x?{...x,authUrl:y}:void 0},chainIds:g?.map(z=>_(z))}]}),[k]=P;if(!k)throw new Error("no account found.");let S=k.capabilities?.admins?.map(z=>fe(z,{chainId:f.chain.id})).filter(Boolean),B=k.capabilities?.permissions?.map(z=>{try{let T=Bi(G(tn,z));return T.id===v?.id?{...T,...v,permissions:T.permissions}:T}catch{return}}).filter(Boolean),R=await(async()=>{if(!k.capabilities?.signInWithEthereum)return;let{message:z,signature:T}=k.capabilities.signInWithEthereum;if(!y)return{message:z,signature:T};let{token:E}=await Ri({address:k.address,authUrl:y,message:z,signature:T});return{message:z,signature:T,token:E}})();return{...ee({address:k.address,keys:[...S,...B]}),signInWithEthereum:R}}throw new Error(`Account creation not supported on method: ${m.method}`)})()}},async disconnect(c){let{internal:d}=c,{config:f}=d,{storage:l}=f,m=await l.getItem("porto.authUrl")||void 0,h=Yi(f.authUrl??m,{storage:l});h&&await fetch(h.logout,{credentials:"include",method:"POST"}).catch(()=>{})},async getAccountVersion(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_getAccountVersion")throw new Error("Cannot get version for method: "+l.method);return n.supportsHeadless?await a(f).request(l):t.actions.getAccountVersion(c)},async getAssets(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_getAssets")throw new Error("Cannot get assets for method: "+l.method);if(!n.supportsHeadless)return t.actions.getAssets(c);let h=await a(f).request(l);return G($t.Response,h)},async getCallsStatus(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_getCallsStatus")throw new Error("Cannot get status for method: "+l.method);return n.supportsHeadless?await a(f).request(l):t.actions.getCallsStatus(c)},async getCapabilities(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_getCapabilities")throw new Error("Cannot get capabilities for method: "+l.method);return n.supportsHeadless?await a(f).request(l):t.actions.getCapabilities(c)},async getKeys(c){let{account:d,chainIds:f,internal:l}=c,{store:m}=l,h=await(async()=>{if(!n.supportsHeadless)return t.actions.getKeys(c);let b=await a(m).request({method:"wallet_getKeys",params:[q(St.Parameters,{address:d.address,chainIds:f})]});return G(St.Response,b)})();return wn([...h,...d.keys??[]],p=>p.publicKey)},async grantAdmin(c){let{internal:d}=c,{request:f,store:l}=d;if(f.method!=="wallet_grantAdmin")throw new Error("Cannot authorize admin for method: "+f.method);let[m]=f._decoded.params,h=fe(m.key);if(!h)throw new Error("no key found.");let p=await To(d,c);return await a(l).request({method:"wallet_grantAdmin",params:[{...f.params?.[0],capabilities:{...f.params?.[0]?.capabilities,feeToken:p}}]}),{key:h}},async grantPermissions(c){let{internal:d}=c,{client:f,request:l,store:m}=d;if(l.method!=="wallet_grantPermissions")throw new Error("Cannot grant permissions for method: "+l.method);let[{address:h,...p}]=l._decoded.params,b=await Ue(p,{chainId:f.chain.id});if(!b)throw new Error("no key found.");let w=q(rn,nn(b));return await a(m).request({method:"wallet_grantPermissions",params:[w]}),{key:b}},async loadAccounts(c){let{internal:d}=c,{client:f,config:l,store:m}=d,{storage:h}=l,p=a(m),b=d.request;if(b.method!=="wallet_connect"&&b.method!=="eth_requestAccounts")throw new Error("Cannot load accounts for method: "+b.method);return{accounts:await(async()=>{let[A]=b._decoded.params??[],{capabilities:g}=A??{},y=Yi(g?.signInWithEthereum?.authUrl??l.authUrl,{storage:h}),x=b.params?.[0]?.capabilities?.signInWithEthereum,v=await Ue(g?.grantPermissions,{chainId:f.chain.id}),I=v?q(rn,nn(v)):void 0,{accounts:P}=await p.request({method:"wallet_connect",params:[{...b.params?.[0],capabilities:{...b.params?.[0]?.capabilities,grantPermissions:I,signInWithEthereum:y||x?{...x,authUrl:y}:void 0}}]});return Promise.all(P.map(async k=>{let S=k.capabilities?.admins?.map(z=>fe(z)).filter(Boolean),B=k.capabilities?.permissions?.map(z=>{try{let T=Bi(G(tn,z));return T.id===v?.id?{...T,...v,permissions:T.permissions}:T}catch{return}}).filter(Boolean),R=await(async()=>{if(!k.capabilities?.signInWithEthereum)return;let{message:z,signature:T}=k.capabilities.signInWithEthereum;if(!y)return{message:z,signature:T};let{token:E}=await Ri({address:k.address,authUrl:y,message:z,signature:T});return{message:z,signature:T,token:E}})();return{...ee({address:k.address,keys:[...S,...B]}),signInWithEthereum:R}}))})()}},async prepareCalls(c){let{account:d,internal:f}=c,{store:l,request:m}=f;if(m.method!=="wallet_prepareCalls")throw new Error("Cannot prepare calls for method: "+m.method);if(!n.supportsHeadless)return t.actions.prepareCalls(c);let h=await To(f,c),p=a(l),b=G(Pt.Response,await p.request({...m,params:[{...m.params?.[0],capabilities:{...m.params?.[0]?.capabilities,feeToken:h}}]}));return{account:d,chainId:Number(b.chainId),context:b.context,digest:b.digest,key:b.key,typedData:b.typedData}},async prepareUpgradeAccount(c){let{internal:d}=c,{client:f,store:l,request:m}=d;if(m.method!=="wallet_prepareUpgradeAccount")throw new Error("Cannot prepare upgrade for method: "+m.method);if(!n.supportsHeadless)return t.actions.prepareUpgradeAccount(c);let[{capabilities:h}]=m._decoded.params??[{}],p=await Ue(h?.grantPermissions,{chainId:f.chain.id}),b=p?q(rn,nn(p)):void 0,w=a(l),{context:A,digests:g}=await w.request({...m,params:[{...m.params?.[0],capabilities:{...m.params?.[0]?.capabilities,grantPermissions:b}}]}),y=A.account.keys?.map(x=>x.id===p?.id?{...x,...p}:x);return{context:{...A,account:{...A.account,keys:y}},digests:g}},async revokeAdmin(c){let{account:d,id:f,internal:l}=c,{store:m,request:h}=l;if(h.method!=="wallet_revokeAdmin")throw new Error("Cannot revoke admin for method: "+h.method);let p=d.keys?.find(A=>A.id===f);if(!p)return;if(p.type==="webauthn-p256"&&d.keys?.filter(A=>A.type==="webauthn-p256").length===1)throw new Error("revoke the only WebAuthn key left.");let b=await To(l,c);return await a(m).request({...h,params:[{...h.params?.[0],capabilities:{...h.params?.[0]?.capabilities,feeToken:b}}]})},async revokePermissions(c){let{account:d,id:f,internal:l}=c,{store:m,request:h}=l;if(h.method!=="wallet_revokePermissions")throw new Error("Cannot revoke permissions for method: "+h.method);let p=d.keys?.find(w=>w.id===f);if(!p)return;if(p.role==="admin")throw new Error("cannot revoke permissions.");return await a(m).request(h)},async sendCalls(c){let{account:d,asTxHash:f,calls:l,internal:m,merchantUrl:h,requiredFunds:p}=c,{client:b,store:w,request:A}=m,g=a(w),y=await To(m,c),x=await en({account:d,calls:l,permissionsId:c.permissionsId});if(x&&x.role==="session"){if(!n.supportsHeadless)return t.actions.sendCalls(c);try{let v=await g.request(q(Pt.Request,{method:"wallet_prepareCalls",params:[{calls:l,capabilities:{...A._decoded.method==="wallet_sendCalls"?A._decoded.params?.[0]?.capabilities:void 0,feeToken:y,merchantUrl:h,requiredFunds:p},chainId:b.chain.id,from:d.address,key:x}]})),I=v.capabilities?.quote?.quotes??[];if(I.some((R,z)=>z===I.length-1&&I.length>1?!1:wr(R.feeTokenDeficit)>0n))throw new Error("insufficient funds");let k=await Re(x,{address:null,payload:v.digest,wrap:!1}),B=(await g.request({method:"wallet_sendPreparedCalls",params:[{...v,signature:k}]}))[0];if(!B)throw new Error("id not found");if(f){let{id:R,receipts:z,status:T}=await bt(b,{id:B.id,pollingInterval:500});if(!z?.[0])throw T==="success"?new Ge({message:"Call bundle with id: "+R+" not found."}):new Ye({message:"Transaction failed under call bundle id: "+R+"."});return{id:z[0].transactionHash}}return B}catch{}}if(A.method==="eth_sendTransaction")return{id:await g.request({...A,params:[{...A.params?.[0],capabilities:{feeToken:y,merchantUrl:h}}]})};if(A.method==="wallet_sendCalls")return await g.request({method:"wallet_sendCalls",params:[{...A.params?.[0],capabilities:{...A.params?.[0]?.capabilities,feeToken:y,merchantUrl:h}}]});throw new Error("Cannot execute for method: "+A.method)},async sendPreparedCalls(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_sendPreparedCalls")throw new Error("Cannot send prepared calls for method: "+l.method);if(!n.supportsHeadless)return t.actions.sendPreparedCalls(c);let p=(await a(f).request(l))[0]?.id;if(!p)throw new Error("id not found");return p},async signPersonalMessage(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="personal_sign")throw new Error("Cannot sign personal message for method: "+l.method);return await a(f).request(l)},async signTypedData(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="eth_signTypedData_v4")throw new Error("Cannot sign typed data for method: "+l.method);return await a(f).request(l)},async switchChain(c){let{internal:d}=c,{store:f,request:l}=d;if(l.method!=="wallet_switchEthereumChain")throw new Error("Cannot switch chain for method: "+l.method);return n.supportsHeadless?await a(f).request(l):void 0},async upgradeAccount(c){let{account:d,internal:f}=c,{store:l,request:m}=f;if(m.method!=="wallet_upgradeAccount")throw new Error("Cannot upgrade account for method: "+m.method);return await a(l).request(m),{account:d}},async verifyEmail(c){let{internal:d}=c,{request:f,store:l}=d;if(f.method!=="account_verifyEmail")throw new Error("Cannot verify email for method: "+f.method);return await a(l).request(f)}},config:e,name:"dialog",setup(c){let{internal:d}=c,{store:f}=d,l=n.setup({host:r,internal:d,theme:o,themeController:s}),m=f.subscribe(h=>h.requestQueue,h=>{for(let b of i)b(h);let p=h.map(b=>b.status==="pending"?b:void 0).filter(Boolean);l.syncRequests(p).catch(()=>{}),p.length===0&&l.close()});return()=>{m(),l.destroy()}}})}async function To(e,t){let{config:{feeToken:r}}=e,{feeToken:n}=t??{};return n??r}function Yi(e,{storage:t}){if(!e)return;let r=Oi(e,typeof window<"u"?window.location.origin:void 0);return r&&t.setItem("porto.authUrl",r),r}var ef={anvil:{http:"http://localhost:9119"},prod:{http:"https://rpc.porto.sh"},stg:{http:"https://stg-rpc.porto.sh"}};function lr(e){return t=>{let r=e.public(t),n=e.relay(t);return ca({key:lr.type,name:"Relay Proxy",async request({method:o,params:s},i){return nm(o)?n.request({method:o,params:s},i):r.request({method:o,params:s},i)},type:lr.type})}}(function(e){e.type="relayProxy"})(lr||(lr={}));function nm(e){return!!(e.startsWith("wallet_")||e.startsWith("account_")||e==="health")}var Fi=new Map;function tf(e,t={}){let{config:r,id:n,store:o}=e._internal,{chains:s,relay:i}=r,u=o.getState(),a=t.chainId??u.chainIds[0],c=s.find(m=>m.id===a);if(!c)throw new Error(["Could not find a compatible Porto chain on the given chain configuration.","",`Provided chains: [${s.map(m=>`${m.name} (id: ${m.id})`).join(", ")}]`,`Needed chain (id): ${a}`,"Please add this chain (id) to your chain configuration."].join(`
`));let d=lr({public:r.transports[c.id]??ua(c.rpcUrls.default.http.map(m=>xt(m))),relay:i}),f=[n,ve(c)].filter(Boolean).join(":");if(Fi.has(f))return Fi.get(f);let l=dn({...t,chain:c,pollingInterval:1e3,transport:d});return Fi.set(f,l),l}var Zi=Ra("method",[La.Request,$a.Request,Wa.Request,Va.Request,Ya.Request,Fa.Request,Za.Request,Qa.Request,Ar.Request,Ga.Request,hn.Request,yn.Request,cc.Request,Ja.Request,Xa.Request,tc.Request,rc.Request,nc.Request,oc.Request,sc.Request,$t.Request,ic.Request,ac.Request,St.Request,Pt.Request,uc.Request,dc.Request,ec.Request,fc.Request]);function Qi(e,t){let r=za(e,t);if(r.error){let n=r.error.issues.at(0);throw n?.code==="invalid_union"&&n.note==="No matching discriminator"?new Fe:new Ze(mn(r.error))}return{...t,_decoded:r.data}}async function Gi(e){e.persist.hasHydrated()||await new Promise(t=>{e.persist.onFinishHydration(()=>t(!0)),setTimeout(()=>t(!0),100)})}function jo(e){if(e)return e.startsWith("/")?`${window.location.origin}${e}`:e}function rf(e){let{config:t,getMode:r,id:n,store:o}=e,{announceProvider:s}=t;function i(h){let{chainIds:p}=h,b=h.request??Qi(Zi,{method:"wallet_getCapabilities",params:[void 0,p]});return yr(()=>r().actions.getCapabilities({chainIds:p,internal:{config:t,getClient:u,request:b,store:o}}),{cacheKey:`getCapabilities.${n}.${p.join(",")}`})}function u(h){let p=typeof h=="string"?Et(h):h;return tf({_internal:e},{chainId:p})}let a=new Map,c=[],d=gc(),f=bn({...d,async request(h){await Gi(o);let p;try{p=Qi(Zi,h)}catch(w){let A=w;if(!(A instanceof Fe))throw A;if(h.method.startsWith("wallet_"))throw new Qe;return u().request(h)}let b=o.getState();switch(p.method){case"account_verifyEmail":{if(b.accounts.length===0)throw new Y;let[w]=p._decoded.params,{chainId:A,email:g,token:y,walletAddress:x}=w,v=u(A);if(A&&A!==v.chain.id)throw new Pe;let I=x?b.accounts.find(P=>K(P.address,x)):b.accounts[0];if(!I)throw new V;return await r().actions.verifyEmail({account:I,chainId:A,email:g,internal:{client:v,config:t,request:p,store:o},token:y,walletAddress:x})}case"wallet_addFunds":{if(b.accounts.length===0)throw new Y;let{address:w,value:A,token:g}=p.params[0]??{},y=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!y)throw new V;let x=u(),v=await r().actions.addFunds({address:y.address,internal:{client:x,config:t,request:p,store:o},token:g,value:A});return d.emit("message",{data:null,type:"assetsChanged"}),v}case"eth_accounts":{if(b.accounts.length===0)throw new Y;return b.accounts.map(w=>w.address)}case"eth_chainId":return _(b.chainIds[0]);case"eth_requestAccounts":{if(b.accounts.length>0&&a.get("eth_requestAccounts"))return b.accounts.map(g=>g.address);let w=u(),{accounts:A}=await r().actions.loadAccounts({internal:{client:w,config:t,request:p,store:o}});return o.setState(g=>({...g,accounts:A})),d.emit("connect",{chainId:_(w.chain.id)}),a.set("eth_requestAccounts",!0),setTimeout(()=>a.delete("eth_requestAccounts"),1e3),A.map(g=>g.address)}case"eth_sendTransaction":{if(b.accounts.length===0)throw new Y;let[{capabilities:w,chainId:A,data:g="0x",from:y,to:x,value:v}]=p._decoded.params,I=u(A);if(A&&A!==I.chain.id)throw new Pe;let P=y?b.accounts.find(S=>K(S.address,y)):b.accounts[0];if(!P)throw new V;let{id:k}=await r().actions.sendCalls({account:P,asTxHash:!0,calls:[{data:g,to:x,value:v}],internal:{client:I,config:t,request:p,store:o},merchantUrl:jo(t.merchantUrl??w?.merchantUrl)});return k}case"eth_signTypedData_v4":{if(b.accounts.length===0)throw new Y;let[w,A]=p._decoded.params,g=b.accounts.find(v=>K(v.address,w));if(!g)throw new V;let y=u();return await r().actions.signTypedData({account:g,data:A,internal:{client:y,config:t,request:p,store:o}})}case"wallet_grantAdmin":{if(b.accounts.length===0)throw new Y;let[{address:w,capabilities:A,chainId:g,key:y}]=p._decoded.params??[{}],x=w?b.accounts.find(S=>K(S.address,w)):b.accounts[0];if(!x)throw new V;let v=u(g);if(cn([...x.keys??[]])?.some(S=>S.publicKey?.toLowerCase()===y.publicKey.toLowerCase()))throw new Ze({message:"Key already granted as admin."});let{key:P}=await r().actions.grantAdmin({account:x,feeToken:A?.feeToken,internal:{client:v,config:t,request:p,store:o},key:y});o.setState(S=>{let B=S.accounts.findIndex(R=>x?K(R.address,x.address):!0);return B===-1?S:{...S,accounts:S.accounts.map((R,z)=>z===B?{...R,keys:[...R.keys??[],P]}:R)}});let k=cn([...x.keys??[],P]);return d.emit("message",{data:null,type:"adminsChanged"}),q(hn.Response,{address:x.address,chainId:v.chain.id,key:k.at(-1)})}case"wallet_grantPermissions":{if(b.accounts.length===0)throw new Y;let[{address:w,chainId:A,...g}]=p._decoded.params??[{}],y=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!y)throw new V;let x=u(A),{key:v}=await r().actions.grantPermissions({account:y,internal:{client:x,config:t,request:p,store:o},permissions:g});return o.setState(I=>{let P=I.accounts.findIndex(k=>y?K(k.address,y.address):!0);return P===-1?I:{...I,accounts:I.accounts.map((k,S)=>S===P?{...k,keys:[...k.keys??[],v]}:k)}}),d.emit("message",{data:null,type:"permissionsChanged"}),q(yn.Response,{...Mi(v,{address:y.address})})}case"wallet_getAdmins":{if(b.accounts.length===0)throw new Y;let[{address:w,chainId:A}]=p._decoded.params??[{}],g=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!g)throw new V;let y=u(A),x=await r().actions.getKeys({account:g,internal:{client:y,config:t,request:p,store:o}}),v=cn(x);return q(Ar.Response,{address:g.address,chainId:y.chain.id,keys:v})}case"wallet_prepareUpgradeAccount":{let[{address:w,capabilities:A,chainId:g}]=p._decoded.params??[{}],{email:y,label:x,grantPermissions:v}=A??{},I=u(g),{context:P,digests:k}=await r().actions.prepareUpgradeAccount({address:w,email:y,internal:{client:I,config:t,request:p,store:o},label:x,permissions:v});return c.push(P.account),{context:P,digests:k}}case"wallet_getAccountVersion":{if(b.accounts.length===0)throw new Y;let[{address:w}]=p._decoded.params??[{}],A=w?b.accounts.find(v=>K(v.address,w)):b.accounts[0];if(!A)throw new V;let g=u(),{current:y,latest:x}=await r().actions.getAccountVersion({address:A.address,internal:{client:g,config:t,request:p,store:o}});return{current:y,latest:x}}case"wallet_getKeys":{if(b.accounts.length===0)throw new Y;let[{address:w,chainIds:A}]=p._decoded.params??[{}],g=b.accounts.find(v=>K(v.address,w));if(!g)throw new V;let y=u(),x=await r().actions.getKeys({account:g,chainIds:A,internal:{client:y,config:t,request:p,store:o}});return q(St.Response,x)}case"wallet_getPermissions":{if(b.accounts.length===0)throw new Y;let[{address:w,chainIds:A}]=p._decoded.params??[{}],g=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!g)throw new V;let y=u(),x=await r().actions.getKeys({account:g,chainIds:A,internal:{client:y,config:t,request:p,store:o}});return Ji(x,{address:g.address})}case"wallet_revokeAdmin":{if(b.accounts.length===0)throw new Y;let[{address:w,capabilities:A,id:g}]=p._decoded.params,y=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!y)throw new V;let x=u();await r().actions.revokeAdmin({account:y,feeToken:A?.feeToken,id:g,internal:{client:x,config:t,request:p,store:o}});let v=y.keys?.filter(I=>I.id.toLowerCase()!==g.toLowerCase());o.setState(I=>({...I,accounts:I.accounts.map(P=>K(P.address,y.address)?{...P,keys:v}:P)})),d.emit("message",{data:null,type:"adminsChanged"});return}case"wallet_revokePermissions":{if(b.accounts.length===0)throw new Y;let[{address:w,capabilities:A,id:g}]=p._decoded.params,y=w?b.accounts.find(I=>K(I.address,w)):b.accounts[0];if(!y)throw new V;let x=u();await r().actions.revokePermissions({account:y,feeToken:A?.feeToken,id:g,internal:{client:x,config:t,request:p,store:o}});let v=y.keys?.filter(I=>I.id.toLowerCase()!==g.toLowerCase());o.setState(I=>({...I,accounts:I.accounts.map(P=>K(P.address,y.address)?{...P,keys:v}:P)})),d.emit("message",{data:null,type:"permissionsChanged"});return}case"wallet_upgradeAccount":{let[{context:w,signatures:A}]=p._decoded.params??[{}],g=u(),y=c.find(P=>K(P.address,w.account.address));if(!y)throw new V;let{account:x}=await r().actions.upgradeAccount({account:y,context:w,internal:{client:g,config:t,request:p,store:o},signatures:A}),v=cn(x.keys??[]),I=Ji(x.keys??[],{address:x.address});return o.setState(P=>({...P,accounts:[x]})),d.emit("connect",{chainId:_(g.chain.id)}),{address:x.address,capabilities:{admins:v,...I.length>0?{permissions:I}:{}}}}case"porto_ping":return"pong";case"personal_sign":{if(b.accounts.length===0)throw new Y;let[w,A]=p._decoded.params,g=b.accounts.find(v=>K(v.address,A));if(!g)throw new V;let y=u();return await r().actions.signPersonalMessage({account:g,data:w,internal:{client:y,config:t,request:p,store:o}})}case"wallet_connect":{let[{capabilities:w,chainIds:A}]=p._decoded.params??[{}],g=u(A?.[0]),y=g.chain.id,{createAccount:x,email:v,grantAdmins:I,grantPermissions:P,selectAccount:k,signInWithEthereum:S}=w??{},B={client:g,config:t,request:p,store:o},{accounts:R}=await(async()=>{if(v||x){let{label:j=void 0}=typeof x=="object"?x:{},{account:N}=await r().actions.createAccount({admins:I,email:v,internal:B,label:j,permissions:P,signInWithEthereum:S});return{accounts:[N]}}let T=b.accounts[0],{address:E,key:M}=(()=>{if(k)return typeof k=="object"?k:{address:void 0,key:void 0};for(let j of T?.keys??[])if(j.type==="webauthn-p256"&&j.role==="admin")return{address:T?.address,key:{credentialId:j.credentialId??j.privateKey?.credential?.id,publicKey:j.publicKey}};return{address:void 0,key:void 0}})(),O={internal:B,permissions:P,signInWithEthereum:S};try{return await r().actions.loadAccounts({address:E,key:M,...O})}catch(j){if(j instanceof Se)throw j;if(E&&M)return await r().actions.loadAccounts(O);throw j}})();o.setState(T=>({...T,accounts:R}));let z=[y,...o.getState().chainIds.filter(T=>T!==y)];return d.emit("connect",{chainId:_(z[0])}),{accounts:R.map(T=>({address:T.address,capabilities:{admins:T.keys?cn(T.keys):[],permissions:T.keys?Ji(T.keys,{address:T.address}):[],...T.signInWithEthereum&&{signInWithEthereum:T.signInWithEthereum}}})),chainIds:z.map(T=>_(T))}}case"wallet_disconnect":{let w=u();await r().actions.disconnect?.({internal:{client:w,config:t,request:p,store:o}}),o.setState(A=>({...A,accounts:[]})),d.emit("disconnect",new Y);return}case"wallet_getAssets":{let[w]=p._decoded.params??[],{account:A,chainFilter:g,assetFilter:y,assetTypeFilter:x}=w,v=u(),I=await r().actions.getAssets({account:A,assetFilter:y,assetTypeFilter:x,chainFilter:g,internal:{client:v,config:t,request:p,store:o}}),P=Object.entries(I).reduce((k,[S,B])=>(k[_(Number(S))]=B,k),{});return q($t.Response,P)}case"wallet_getCallsStatus":{let[w]=p._decoded.params??[],A=u();return await r().actions.getCallsStatus({id:w,internal:{client:A,config:t,request:p,store:o}})}case"wallet_getCapabilities":{let[w,A]=p.params??[];return await i({chainIds:A??[_(b.chainIds[0])],request:p})}case"wallet_prepareCalls":{let[w]=p._decoded.params,{calls:A,capabilities:g,chainId:y,key:x,from:v}=w,I=u(y),P=v??b.accounts[0];if(!P)throw new V;if(y&&y!==I.chain.id)throw new Pe;let{digest:k,...S}=await r().actions.prepareCalls({account:ee(P),calls:A,feeToken:g?.feeToken,internal:{client:I,config:t,request:p,store:o},key:x,merchantUrl:jo(t.merchantUrl??g?.merchantUrl),requiredFunds:g?.requiredFunds});return q(Pt.Response,{capabilities:S.capabilities,chainId:_(S.chainId??I.chain.id),context:{...S.context,account:{address:S.account.address},calls:S.context.calls??[],nonce:S.context.nonce??0n},digest:k,key:S.key,typedData:S.typedData})}case"wallet_sendPreparedCalls":{let[w]=p._decoded.params,{chainId:A,context:g,key:y,signature:x}=w,{account:v}=w.context,I=u(A);if(A&&Et(A)!==I.chain.id)throw new Pe;return[{id:await r().actions.sendPreparedCalls({account:ee(v),context:g,internal:{client:I,config:t,request:p,store:o},key:y,signature:x})}]}case"wallet_sendCalls":{if(b.accounts.length===0)throw new Y;let[w]=p._decoded.params,{calls:A,capabilities:g,chainId:y,from:x}=w,v=u(y);if(y&&y!==v.chain.id)throw new Pe;let I=x?b.accounts.find(k=>K(k.address,x)):b.accounts[0];if(!I)throw new V;let{id:P}=await r().actions.sendCalls({account:I,calls:A,feeToken:g?.feeToken,internal:{client:v,config:t,request:p,store:o},merchantUrl:jo(t.merchantUrl??g?.merchantUrl),permissionsId:g?.permissions?.id,requiredFunds:g?.requiredFunds});return{id:P}}case"wallet_switchEthereumChain":{let[w]=p._decoded.params,{chainId:A}=w,g=Et(A);if(!t.chains.find(v=>v.id===g))throw new kt;let x=u(A);await r().actions.switchChain?.({chainId:x.chain.id,internal:{client:x,config:t,request:p,store:o}}),o.setState(v=>({...v,chainIds:[g,...v.chainIds.filter(I=>I!==g)]}));return}case"wallet_verifySignature":{let[w]=p._decoded.params,{address:A,chainId:g,digest:y,signature:x}=w,v=u(g);return{...await zo(v,{address:A,digest:y,signature:x}),address:A,chainId:_(v.chain.id)}}}}});function l(){let h=()=>{},p=()=>{};Gi(o).then(()=>{let w=o.getState().chainIds[0];i({chainIds:[_(w)]}).catch(()=>{}),h(),h=o.subscribe(A=>A.accounts,A=>{d.emit("accountsChanged",A.map(g=>g.address))},{equalityFn:(A,g)=>A.every((y,x)=>y.address===g[x]?.address)}),p(),p=o.subscribe(A=>A.chainIds[0],(A,g)=>{A!==g&&(i({chainIds:[_(A)]}).catch(()=>{}),d.emit("chainChanged",_(A)))})});let b=dm(f,s);return()=>{h(),p(),b()}}let m=l();return Object.assign(f,{_internal:{destroy:m}})}function dm(e,t){if(!t)return()=>{};if(typeof window>"u"||!window.dispatchEvent)return()=>{};let{icon:r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIyIiBoZWlnaHQ9IjQyMiIgdmlld0JveD0iMCAwIDQyMiA0MjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MjIiIGhlaWdodD0iNDIyIiBmaWxsPSJibGFjayIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMV8xNSkiPgo8cGF0aCBkPSJNODEgMjg2LjM2NkM4MSAyODAuODkzIDg1LjQ1MDUgMjc2LjQ1NSA5MC45NDA0IDI3Ni40NTVIMzI5LjUxMUMzMzUuMDAxIDI3Ni40NTUgMzM5LjQ1MiAyODAuODkzIDMzOS40NTIgMjg2LjM2NlYzMDYuMTg4QzMzOS40NTIgMzExLjY2MiAzMzUuMDAxIDMxNi4wOTkgMzI5LjUxMSAzMTYuMDk5SDkwLjk0MDRDODUuNDUwNSAzMTYuMDk5IDgxIDMxMS42NjIgODEgMzA2LjE4OFYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAyMzQuODI4Qzg1LjQ1MDUgMjM0LjgyOCA4MSAyMzkuMjY2IDgxIDI0NC43MzlWMjcxLjUzMUM4My44NDMyIDI2OS42MzMgODcuMjYyMiAyNjguNTI2IDkwLjk0MDQgMjY4LjUyNkgzMjkuNTExQzMzMy4xODggMjY4LjUyNiAzMzYuNjA4IDI2OS42MzMgMzM5LjQ1MiAyNzEuNTMxVjI0NC43MzlDMzM5LjQ1MiAyMzkuMjY2IDMzNS4wMDEgMjM0LjgyOCAzMjkuNTExIDIzNC44MjhIOTAuOTQwNFpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgwLjg5MyAzMzUuMDAxIDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTlDODEgMzExLjY2NCA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2NCAzMzkuNDUyIDMwNi4xOVYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAxOTMuMjAxQzg1LjQ1MDUgMTkzLjIwMSA4MSAxOTcuNjM4IDgxIDIwMy4xMTJWMjI5LjkwM0M4My44NDMyIDIyOC4wMDYgODcuMjYyMiAyMjYuODk5IDkwLjk0MDQgMjI2Ljg5OUgzMjkuNTExQzMzMy4xODggMjI2Ljg5OSAzMzYuNjA4IDIyOC4wMDYgMzM5LjQ1MiAyMjkuOTAzVjIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNFpNMzM5LjQ1MiAyNDQuNzM5QzMzOS40NTIgMjM5LjI2NSAzMzUuMDAxIDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNDODEuMjE3NSAyNzEuMzg1IDgxLjQzODMgMjcxLjI0NSA4MS42NjI0IDI3MS4xMDlDODMuODMyNSAyNjkuNzk0IDg2LjMwNTQgMjY4LjkyNyA4OC45NTIzIDI2OC42MzVDODkuNjA1MSAyNjguNTYzIDkwLjI2ODQgMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMzAuMTgzIDI2OC41MjYgMzMwLjg0NiAyNjguNTYzIDMzMS40OTggMjY4LjYzNUMzMzQuNDE5IDI2OC45NTcgMzM3LjEyOCAyNjkuOTggMzM5LjQ1MiAyNzEuNTNWMjQ0LjczOVpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgxLjAyMSAzMzUuMjA2IDI3Ni42NjMgMzI5Ljg5MyAyNzYuNDYyQzMyOS43NjcgMjc2LjQ1NyAzMjkuNjQgMjc2LjQ1NSAzMjkuNTExIDI3Ni40NTVIOTAuOTQwNEM4NS40NTA1IDI3Ni40NTUgODEgMjgwLjg5MyA4MSAyODYuMzY2VjMwNi4xODhDODEgMzExLjY2MiA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2MiAzMzkuNDUyIDMwNi4xODhWMjg2LjM2NloiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNSIvPgo8cGF0aCBvcGFjaXR5PSIwLjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTguMDE0NiAxMDRDODguNjE3NyAxMDQgODEgMTExLjU5NSA4MSAxMjAuOTY1VjE4OC4yNzZDODMuODQzMiAxODYuMzc5IDg3LjI2MjIgMTg1LjI3MiA5MC45NDA0IDE4NS4yNzJIMzI5LjUxMUMzMzMuMTg4IDE4NS4yNzIgMzM2LjYwOCAxODYuMzc5IDMzOS40NTIgMTg4LjI3NlYxMjAuOTY1QzMzOS40NTIgMTExLjU5NSAzMzEuODMzIDEwNCAzMjIuNDM3IDEwNEg5OC4wMTQ2Wk0zMzkuNDUyIDIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNEM4NS40NTA1IDE5My4yMDEgODEgMTk3LjYzOCA4MSAyMDMuMTEyVjIyOS45MDNDODEuMjE3NSAyMjkuNzU4IDgxLjQzODMgMjI5LjYxOCA4MS42NjI0IDIyOS40ODJDODMuODMyNSAyMjguMTY3IDg2LjMwNTQgMjI3LjMgODguOTUyMyAyMjcuMDA4Qzg5LjYwNTEgMjI2LjkzNiA5MC4yNjg0IDIyNi44OTkgOTAuOTQwNCAyMjYuODk5SDMyOS41MTFDMzMwLjE4MyAyMjYuODk5IDMzMC44NDYgMjI2LjkzNiAzMzEuNDk4IDIyNy4wMDhDMzM0LjQxOSAyMjcuMzMgMzM3LjEyOCAyMjguMzUyIDMzOS40NTIgMjI5LjkwM1YyMDMuMTEyWk0zMzkuNDUyIDI0NC43MzlDMzM5LjQ1MiAyMzkuMzkzIDMzNS4yMDYgMjM1LjAzNiAzMjkuODkzIDIzNC44MzVDMzI5Ljc2NyAyMzQuODMgMzI5LjY0IDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNMODEuMDcwNyAyNzEuNDgzQzgxLjI2NTMgMjcxLjM1NSA4MS40NjI1IDI3MS4yMyA4MS42NjI0IDI3MS4xMDlDODEuOTA4MyAyNzAuOTYgODIuMTU4MSAyNzAuODE3IDgyLjQxMTcgMjcwLjY3OUM4NC4zOTUzIDI2OS42MDUgODYuNjA1NCAyNjguODk0IDg4Ljk1MjMgMjY4LjYzNUM4OS4wMDUyIDI2OC42MjkgODkuMDU4IDI2OC42MjQgODkuMTExIDI2OC42MThDODkuNzEyNSAyNjguNTU3IDkwLjMyMjggMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMjkuNzM4IDI2OC41MjYgMzI5Ljk2NSAyNjguNTMgMzMwLjE5MiAyNjguNTM5QzMzMC42MzEgMjY4LjU1NSAzMzEuMDY3IDI2OC41ODcgMzMxLjQ5OCAyNjguNjM1QzMzNC40MTkgMjY4Ljk1NyAzMzcuMTI4IDI2OS45OCAzMzkuNDUyIDI3MS41M1YyNDQuNzM5Wk0zMzkuNDUyIDI4Ni4zNjZDMzM5LjQ1MiAyODEuMDIxIDMzNS4yMDYgMjc2LjY2MyAzMjkuODkzIDI3Ni40NjJMMzI5Ljg2NSAyNzYuNDYxQzMyOS43NDggMjc2LjQ1NyAzMjkuNjI5IDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTg4QzgxIDMxMS42NjIgODUuNDUwNSAzMTYuMTAxIDkwLjk0MDQgMzE2LjEwMUgzMjkuNTExQzMzNS4wMDEgMzE2LjEwMSAzMzkuNDUyIDMxMS42NjIgMzM5LjQ1MiAzMDYuMTg4VjI4Ni4zNjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjY5Ljg2OCAxMzEuNzUyQzI2OS44NjggMTI2LjI3OCAyNzQuMzE4IDEyMS44NCAyNzkuODA4IDEyMS44NEgzMTEuNjE4QzMxNy4xMDggMTIxLjg0IDMyMS41NTggMTI2LjI3OCAzMjEuNTU4IDEzMS43NTJWMTYxLjQ4NUMzMjEuNTU4IDE2Ni45NTkgMzE3LjEwOCAxNzEuMzk2IDMxMS42MTggMTcxLjM5NkgyNzkuODA4QzI3NC4zMTggMTcxLjM5NiAyNjkuODY4IDE2Ni45NTkgMjY5Ljg2OCAxNjEuNDg1VjEzMS43NTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzFfMTUiPgo8cmVjdCB3aWR0aD0iMjU5IiBoZWlnaHQ9IjIxMyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgxIDEwNCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",name:n="Porto",rdns:o="xyz.ithaca.porto"}=typeof t=="object"?t:{};return da({info:{icon:r,name:n,rdns:o,uuid:globalThis.crypto.randomUUID()},provider:e})}function cn(e){return e.map(t=>{if(t.role==="admin")try{return q(Ar.Key,{id:t.id??t.publicKey,publicKey:t.publicKey,type:t.type,...t.type==="webauthn-p256"?{credentialId:t.privateKey?.credential?.id,privateKey:{credential:{id:t.privateKey?.credential?.id},rpId:t.privateKey?.rpId}}:{}})}catch{return}}).filter(Boolean)}function Ji(e,{address:t}){return e.map(r=>{if(r.chainId&&r.role==="session"&&!(r.expiry>0&&r.expiry<BigInt(Math.floor(Date.now()/1e3))))try{return q(tn,Mi(r,{address:t}))}catch{return}}).filter(Boolean)}function nf(){let e=typeof indexedDB<"u"?Pa("porto","store"):void 0;return{async getItem(t){let r=await ka(t,e);return r===null?null:r},async removeItem(t){await Ba(t,e)},async setItem(t,r){await Ma(t,Te(r),e)},sizeLimit:1024*1024*50}}function of(){let e=new Map;return{getItem(t){return e.get(t)??null},removeItem(t){e.delete(t)},setItem(t,r){e.set(t,r)},sizeLimit:Number.POSITIVE_INFINITY}}var sf=typeof window<"u"&&typeof document<"u",pr={announceProvider:!0,chains:lc,mode:sf?Xd({host:In.prod}):Oo(),relay:xt(ef.prod.http),storage:sf?nf():of(),storageKey:"porto.store"};function k0(e={}){let t=e.chains??pr.chains,r=Object.fromEntries(t.map(c=>[c.id,e.transports?.[c.id]??xt()])),n={announceProvider:e.announceProvider??pr.announceProvider,authUrl:e.authUrl,chains:t,feeToken:e.feeToken,merchantUrl:e.merchantUrl,mode:e.mode??pr.mode,relay:e.relay??pr.relay,storage:e.storage??pr.storage,storageKey:e.storageKey??pr.storageKey,transports:r},o=Sa(va(Ia(Ea(c=>({accounts:[],chainIds:n.chains.map(d=>d.id),feeToken:n.feeToken,requestQueue:[]}),{merge(c,d){let f=c,l=n.chains.find(h=>h.id===f.chainIds[0])?.id??n.chains[0].id,m=[l,...n.chains.map(h=>h.id).filter(h=>h!==l)];return{...d,...f,chainIds:m}},name:n.storageKey,partialize:c=>({accounts:c.accounts.map(d=>Te(d)),chainIds:c.chainIds}),storage:n.storage,version:5})))),s=n.mode,i={config:n,getMode(){return s},id:globalThis.crypto.randomUUID(),setMode(c){return a?.(),s=c,a=c.setup({internal:i}),a},store:o},u=rf(i),a=s!==null?s.setup({internal:i}):()=>{};return{_internal:i,config:n,destroy(){a(),u._internal.destroy()},provider:u}}export{k0 as create,pr as defaultConfig};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/nist.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
