import{$ as vr,$a as _r,$b as Xr,A as xr,Aa as Ns,Ab as G,B as _,Ba as Rs,Bb as ft,Ca as Ar,Cb as je,D as $,Da as Ot,Db as Ve,E as yr,Ea as Ss,Eb as U,F as L,Fa as st,Fb as V,G as w,Gb as yn,H as we,Ha as it,Hb as Gs,I as Ee,Ia as qe,Ib as Kt,J as K,Ja as kr,Jb as qs,K as ve,Ka as hn,Kb as $s,L as bs,La as Cr,Lb as Os,M as F,Ma as Nr,Mb as js,N as rt,Na as Rr,Nb as Jr,O as te,Oa as Sr,Ob as Vs,P as mn,Pa as $e,Pb as Ws,Q as ot,Qa as Ne,Qb as Yr,R as gs,Ra as Hr,Rb as Ks,S as br,Sa as Fr,Sb as mt,T as pn,Ta as at,Tb as pt,U as gr,Ua as ct,Ub as Zs,V as ke,Va as jt,Vb as dt,W as re,Wa as zr,Wb as lt,X as ws,Xa as Oe,Xb as Re,Y as wr,Ya as Ur,Z as Er,Za as Lr,Zb as Qr,_ as Ce,_a as Dr,_b as Js,a as Gt,aa as Es,ab as Mr,ac as eo,b as pr,ba as Pr,bb as Gr,bc as le,c as ds,cb as qr,cc as Pe,d as an,da as dn,db as $r,e as cn,ea as ln,eb as Or,f as un,fa as nt,fb as jr,g as qt,ga as Ir,gb as Vr,ha as ne,hb as Wr,hc as Se,i as dr,ia as M,ib as xn,j as fe,ja as vs,jb as C,k as ee,ka as Ps,kb as Kr,l as B,la as $t,lb as Hs,m as ls,ma as pe,mb as Vt,n as et,na as O,nb as Fs,o as hs,ob as Wt,p as xs,pa as z,pb as zs,q as lr,qb as Us,r as fn,ra as Is,rb as Ls,s as hr,sa as Ge,sb as de,t as ge,ta as Ts,tb as Ds,u as Ae,ua as Bs,ub as _s,v as ys,va as As,vb as Ms,w as ae,wa as ks,wb as D,x as tt,xa as Cs,xb as ut,y as me,ya as Tr,yb as Zr,z as j,za as Br,zb as X}from"./pretix-eth-5-chunk-ZWRX4H4Q.js";import{a as Ys,b as ht}from"./pretix-eth-5-chunk-ERWRNXFQ.js";import{d as ps}from"./pretix-eth-5-chunk-BIK4PATU.js";var Qs="/docs/contract/decodeEventLog";function We(e){let{abi:t,data:r,strict:o,topics:n}=e,s=o??!0,[i,...a]=n;if(!i)throw new xs({docsPath:Qs});let c=t.find(l=>l.type==="event"&&i===nt(dr(l)));if(!(c&&"name"in c)||c.type!=="event")throw new lr(i,{docsPath:Qs});let{name:u,inputs:m}=c,p=m?.some(l=>!("name"in l&&l.name)),f=p?[]:{},d=m.map((l,h)=>[l,h]).filter(([l])=>"indexed"in l&&l.indexed);for(let l=0;l<d.length;l++){let[h,x]=d[l],g=a[l];if(!g)throw new Ae({abiItem:c,param:h});f[p?x:h.name||x]=sc({param:h,value:g})}let y=m.filter(l=>!("indexed"in l&&l.indexed));if(y.length>0){if(r&&r!=="0x")try{let l=vr(y,r);if(l)if(p)for(let h=0;h<m.length;h++)f[h]=f[h]??l.shift();else for(let h=0;h<y.length;h++)f[y[h].name]=l[h]}catch(l){if(s)throw l instanceof ls||l instanceof gs?new ge({abiItem:c,data:r,params:y,size:ee(r)}):l}else if(s)throw new ge({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function sc({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(vr([e],t)||[])[0]}var Xs=`Ethereum Signed Message:
`;function ei(e){let t=typeof e=="string"?we(e):typeof e.raw=="string"?e.raw:L(e.raw),r=we(`${Xs}${ee(t)}`);return ke([r,t])}function Zt(e,t){return F(ei(e),t)}var to=class extends B{constructor({domain:t}){super(`Invalid domain "${z(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},ro=class extends B{constructor({primaryType:t,types:r}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},oo=class extends B{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};function ti(e){let{domain:t,message:r,primaryType:o,types:n}=e,s=(i,a)=>{for(let c of i){let{name:u,type:m}=c,p=a[u],f=m.match(Er);if(f&&(typeof p=="number"||typeof p=="bigint")){let[l,h,x]=f;w(p,{signed:h==="int",size:Number.parseInt(x,10)/8})}if(m==="address"&&typeof p=="string"&&!te(p))throw new ae({address:p});let d=m.match(wr);if(d){let[l,h]=d;if(h&&ee(p)!==Number.parseInt(h,10))throw new hr({expectedSize:Number.parseInt(h,10),givenSize:ee(p)})}let y=n[m];y&&(ic(m),s(y,p))}};if(n.EIP712Domain&&t){if(typeof t!="object")throw new to({domain:t});s(n.EIP712Domain,t)}if(o!=="EIP712Domain")if(n[o])s(n[o],r);else throw new ro({primaryType:o,types:n})}function ri({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function ic(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new oo({type:e})}function bn(e){let{domain:t={},message:r,primaryType:o}=e,n={EIP712Domain:ri({domain:t}),...e.types};ti({domain:t,message:r,primaryType:o,types:n});let s=["0x1901"];return t&&s.push(oi({domain:t,types:n})),o!=="EIP712Domain"&&s.push(gn({data:r,primaryType:o,types:n})),F(ke(s))}function oi({domain:e,types:t}){return gn({data:e,primaryType:"EIP712Domain",types:t})}function gn({data:e,primaryType:t,types:r}){let o=ni({data:e,primaryType:t,types:r});return F(o)}function ni({data:e,primaryType:t,types:r}){let o=[{type:"bytes32"}],n=[ac({primaryType:t,types:r})];for(let s of r[t]){let[i,a]=ii({types:r,name:s.name,type:s.type,value:e[s.name]});o.push(i),n.push(a)}return Ce(o,n)}function ac({primaryType:e,types:t}){let r=$(cc({primaryType:e,types:t}));return F(r)}function cc({primaryType:e,types:t}){let r="",o=si({primaryType:e,types:t});o.delete(e);let n=[e,...Array.from(o).sort()];for(let s of n)r+=`${s}(${t[s].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return r}function si({primaryType:e,types:t},r=new Set){let n=e.match(/^\w*/u)?.[0];if(r.has(n)||t[n]===void 0)return r;r.add(n);for(let s of t[n])si({primaryType:s.type,types:t},r);return r}function ii({types:e,name:t,type:r,value:o}){if(e[r]!==void 0)return[{type:"bytes32"},F(ni({data:o,primaryType:r,types:e}))];if(r==="bytes")return o=`0x${(o.length%2?"0":"")+o.slice(2)}`,[{type:"bytes32"},F(o)];if(r==="string")return[{type:"bytes32"},F($(o))];if(r.lastIndexOf("]")===r.length-1){let n=r.slice(0,r.lastIndexOf("[")),s=o.map(i=>ii({name:t,type:n,types:e,value:i}));return[{type:"bytes32"},F(Ce(s.map(([i])=>i),s.map(([,i])=>i)))]}return[{type:r},o]}function E(e,t,r){let o=e[t.name];if(typeof o=="function")return o;let n=e[r];return typeof n=="function"?n:s=>t(e,s)}var no=class extends B{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};var ai="/docs/contract/encodeEventTopics";function he(e){let{abi:t,eventName:r,args:o}=e,n=t[0];if(r){let c=Ir({abi:t,name:r});if(!c)throw new fn(r,{docsPath:ai});n=c}if(n.type!=="event")throw new fn(void 0,{docsPath:ai});let s=dr(n),i=nt(s),a=[];if(o&&"inputs"in n){let c=n.inputs?.filter(m=>"indexed"in m&&m.indexed),u=Array.isArray(o)?o:Object.values(o).length>0?c?.map(m=>o[m.name])??[]:[];u.length>0&&(a=c?.map((m,p)=>Array.isArray(u[p])?u[p].map((f,d)=>ci({param:m,value:u[p][d]})):typeof u[p]<"u"&&u[p]!==null?ci({param:m,value:u[p]}):null)??[])}return[i,...a]}function ci({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return F(Ee(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new no(e.type);return Ce([e],[t])}function He(e,{method:t}){let r={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:o,response:n,status:s,transport:i})=>{s==="success"&&t===o&&(r[n]=i.request)}),o=>r[o]||e.request}async function so(e,t){let{address:r,abi:o,args:n,eventName:s,fromBlock:i,strict:a,toBlock:c}=t,u=He(e,{method:"eth_newFilter"}),m=s?he({abi:o,args:n,eventName:s}):void 0,p=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:typeof i=="bigint"?w(i):i,toBlock:typeof c=="bigint"?w(c):c,topics:m}]});return{abi:o,args:n,eventName:s,id:p,request:u(p),strict:!!a,type:"event"}}var uc=3;function ce(e,{abi:t,address:r,args:o,docsPath:n,functionName:s,sender:i}){let a=e instanceof st?e:e instanceof B?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:m,message:p,shortMessage:f}=a,d=e instanceof et?new Ss({functionName:s}):[uc,$e.code].includes(c)&&(u||m||p||f)?new Ot({abi:t,data:typeof u=="object"?u.data:u,functionName:s,message:a instanceof kr?m:f??p}):e;return new Ar(d,{abi:t,args:o,contractAddress:r,docsPath:n,functionName:s,sender:i})}function ui(e){let t=F(`0x${e.substring(4)}`).substring(26);return mn(`0x${t}`)}async function mi({hash:e,signature:t}){let r=fe(e)?e:$(e),{secp256k1:o}=await import("./pretix-eth-5-secp256k1-VFMHQMJP.js");return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:u,s:m,v:p,yParity:f}=t,d=Number(f??p),y=fi(d);return new o.Signature(j(u),j(m)).addRecoveryBit(y)}let i=fe(t)?t:$(t);if(ee(i)!==65)throw new Error("invalid signature length");let a=_(`0x${i.slice(130)}`),c=fi(a);return o.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function fi(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function io({hash:e,signature:t}){return ui(await mi({hash:e,signature:t}))}function Ie(e,t="hex"){let r=pi(e),o=br(new Uint8Array(r.length));return r.encode(o),t==="hex"?L(o.bytes):o.bytes}function pi(e){return Array.isArray(e)?fc(e.map(t=>pi(t))):mc(e)}function fc(e){let t=e.reduce((n,s)=>n+s.length,0),r=di(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),r===1?n.pushUint8(t):r===2?n.pushUint16(t):r===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:s}of e)s(n)}}}function mc(e){let t=typeof e=="string"?K(e):e,r=di(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(183+r),r===1?n.pushUint8(t.length):r===2?n.pushUint16(t.length):r===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function di(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new B("Length is too large.")}function li(e){let{chainId:t,nonce:r,to:o}=e,n=e.contractAddress??e.address,s=F(re(["0x05",Ie([t?w(t):"0x",n,r?w(r):"0x"])]));return o==="bytes"?K(s):s}async function xt(e){let{authorization:t,signature:r}=e;return io({hash:li(t),signature:r??t})}var ao=class extends B{constructor(t,{account:r,docsPath:o,chain:n,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:m,to:p,value:f}){let d=Ts({from:r?.address,to:p,value:typeof f<"u"&&`${Is(f)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${Ge(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ge(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ge(u)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}};function hi(e,{docsPath:t,...r}){let o=(()=>{let n=pt(e,r);return n instanceof mt?e:n})();return new ao(o,{docsPath:t,...r})}var co=class extends B{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},Fe=class extends B{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},uo=class extends B{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ge(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};var yt=class extends B{constructor({blockHash:t,blockNumber:r}){let o="Block";t&&(o=`Block at hash "${t}"`),r&&(o=`Block at number "${r}"`),super(`${o} could not be found.`,{name:"BlockNotFoundError"})}};var wn={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Jt(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?_(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?_(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?wn[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=pc(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}var Gm=lt("transaction",Jt);function pc(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Yt(e){let t=(e.transactions??[]).map(r=>typeof r=="string"?r:Jt(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}var jm=lt("block",Yt);async function Z(e,{blockHash:t,blockNumber:r,blockTag:o=e.experimental_blockTag??"latest",includeTransactions:n}={}){let s=n??!1,i=r!==void 0?w(r):void 0,a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||o,s]},{dedupe:!!i}),!a)throw new yt({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||Yt)(a)}async function bt(e){let t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function xi(e,t){return En(e,t)}async function En(e,t){let{block:r,chain:o=e.chain,request:n}=t||{};try{let s=o?.fees?.maxPriorityFeePerGas??o?.fees?.defaultPriorityFee;if(typeof s=="function"){let a=r||await E(e,Z,"getBlock")({}),c=await s({block:a,client:e,request:n});if(c===null)throw new Error;return c}if(typeof s<"u")return s;let i=await e.request({method:"eth_maxPriorityFeePerGas"});return j(i)}catch{let[s,i]=await Promise.all([r?Promise.resolve(r):E(e,Z,"getBlock")({}),E(e,bt,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new Fe;let a=i-s.baseFeePerGas;return a<0n?0n:a}}async function yi(e,t){return fo(e,t)}async function fo(e,t){let{block:r,chain:o=e.chain,request:n,type:s="eip1559"}=t||{},i=await(async()=>typeof o?.fees?.baseFeeMultiplier=="function"?o.fees.baseFeeMultiplier({block:r,client:e,request:n}):o?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new co;let c=10**(i.toString().split(".")[1]?.length??0),u=f=>f*BigInt(Math.ceil(i*c))/BigInt(c),m=r||await E(e,Z,"getBlock")({});if(typeof o?.fees?.estimateFeesPerGas=="function"){let f=await o.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:n,type:s});if(f!==null)return f}if(s==="eip1559"){if(typeof m.baseFeePerGas!="bigint")throw new Fe;let f=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await En(e,{block:m,chain:o,request:n}),d=u(m.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??d+f,maxPriorityFeePerGas:f}}return{gasPrice:n?.gasPrice??u(await E(e,bt,"getGasPrice")({}))}}async function gt(e,{address:t,blockTag:r="latest",blockNumber:o}){let n=await e.request({method:"eth_getTransactionCount",params:[t,typeof o=="bigint"?w(o):r]},{dedupe:!!o});return _(n)}function wt(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),o=typeof e.blobs[0]=="string"?e.blobs.map(s=>K(s)):e.blobs,n=[];for(let s of o)n.push(Uint8Array.from(t.blobToKzgCommitment(s)));return r==="bytes"?n:n.map(s=>L(s))}function Et(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),o=typeof e.blobs[0]=="string"?e.blobs.map(i=>K(i)):e.blobs,n=typeof e.commitments[0]=="string"?e.commitments.map(i=>K(i)):e.commitments,s=[];for(let i=0;i<o.length;i++){let a=o[i],c=n[i];s.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(i=>L(i))}var bi=Ys;function gi(e,t){let r=t||"hex",o=bi(fe(e,{strict:!1})?Ee(e):e);return r==="bytes"?o:$(o)}function wi(e){let{commitment:t,version:r=1}=e,o=e.to??(typeof t=="string"?"hex":"bytes"),n=gi(t,"bytes");return n.set([r],0),o==="bytes"?n:L(n)}function mo(e){let{commitments:t,version:r}=e,o=e.to??(typeof t[0]=="string"?"hex":"bytes"),n=[];for(let s of t)n.push(wi({commitment:s,to:o,version:r}));return n}var po=class extends B{constructor({maxSize:t,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}},vt=class extends B{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},lo=class extends B{constructor({hash:t,size:r}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}},ho=class extends B{constructor({hash:t,version:r}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}};function Ei(e){let t=e.to??(typeof e.data=="string"?"hex":"bytes"),r=typeof e.data=="string"?K(e.data):e.data,o=ee(r);if(!o)throw new vt;if(o>761855)throw new po({maxSize:761855,size:o});let n=[],s=!0,i=0;for(;s;){let a=br(new Uint8Array(131072)),c=0;for(;c<4096;){let u=r.slice(i,i+31);if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),s=!1;break}c++,i+=31}n.push(a)}return t==="bytes"?n.map(a=>a.bytes):n.map(a=>L(a.bytes))}function xo(e){let{data:t,kzg:r,to:o}=e,n=e.blobs??Ei({data:t,to:o}),s=e.commitments??wt({blobs:n,kzg:r,to:o}),i=e.proofs??Et({blobs:n,commitments:s,kzg:r,to:o}),a=[];for(let c=0;c<n.length;c++)a.push({blob:n[c],commitment:s[c],proof:i[c]});return a}function yo(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new As({transaction:e})}async function Pt(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return _(t)}var vn=["blobVersionedHashes","chainId","fees","gas","nonce","type"],vi=new Map;async function It(e,t){let{account:r=e.account,blobs:o,chain:n,gas:s,kzg:i,nonce:a,nonceManager:c,parameters:u=vn,type:m}=t,p=r&&O(r),f={...t,...p?{from:p?.address}:{}},d;async function y(){return d||(d=await E(e,Z,"getBlock")({blockTag:"latest"}),d)}let l;async function h(){return l||(n?n.id:typeof t.chainId<"u"?t.chainId:(l=await E(e,Pt,"getChainId")({}),l))}if(u.includes("nonce")&&typeof a>"u"&&p)if(c){let x=await h();f.nonce=await c.consume({address:p.address,chainId:x,client:e})}else f.nonce=await E(e,gt,"getTransactionCount")({address:p.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&o&&i){let x=wt({blobs:o,kzg:i});if(u.includes("blobVersionedHashes")){let g=mo({commitments:x,to:"hex"});f.blobVersionedHashes=g}if(u.includes("sidecars")){let g=Et({blobs:o,commitments:x,kzg:i}),b=xo({blobs:o,commitments:x,proofs:g,to:"hex"});f.sidecars=b}}if(u.includes("chainId")&&(f.chainId=await h()),(u.includes("fees")||u.includes("type"))&&typeof m>"u")try{f.type=yo(f)}catch{let x=vi.get(e.uid);typeof x>"u"&&(x=typeof(await y())?.baseFeePerGas=="bigint",vi.set(e.uid,x)),f.type=x?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){let x=await y(),{maxFeePerGas:g,maxPriorityFeePerGas:b}=await fo(e,{block:x,chain:n,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<b)throw new uo({maxPriorityFeePerGas:b});f.maxPriorityFeePerGas=b,f.maxFeePerGas=g}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Fe;if(typeof t.gasPrice>"u"){let x=await y(),{gasPrice:g}=await fo(e,{block:x,chain:n,request:f,type:"legacy"});f.gasPrice=g}}return u.includes("gas")&&typeof s>"u"&&(f.gas=await E(e,Tt,"estimateGas")({...f,account:p&&{address:p.address,type:"json-rpc"}})),le(f),delete f.parameters,f}async function bo(e,{address:t,blockNumber:r,blockTag:o=e.experimental_blockTag??"latest"}){let n=typeof r=="bigint"?w(r):void 0,s=await e.request({method:"eth_getBalance",params:[t,n||o]});return BigInt(s)}async function Tt(e,t){let{account:r=e.account}=t,o=r?O(r):void 0;try{let S=function(W){let{block:oe,request:be,rpcStateOverride:Be}=W;return e.request({method:"eth_estimateGas",params:Be?[be,oe??e.experimental_blockTag??"latest",Be]:oe?[be,oe]:[be]})},{accessList:n,authorizationList:s,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:m,gas:p,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:y,maxPriorityFeePerGas:l,nonce:h,value:x,stateOverride:g,...b}=await It(e,{...t,parameters:o?.type==="local"?void 0:["blobVersionedHashes"]}),P=(typeof c=="bigint"?w(c):void 0)||u,I=Xr(g),T=await(async()=>{if(b.to)return b.to;if(s&&s.length>0)return await xt({authorization:s[0]}).catch(()=>{throw new B("`to` is required. Could not infer from `authorizationList`")})})();le(t);let A=e.chain?.formatters?.transactionRequest?.format,N=(A||Re)({...dt(b,{format:A}),from:o?.address,accessList:n,authorizationList:s,blobs:i,blobVersionedHashes:a,data:m,gas:p,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:y,maxPriorityFeePerGas:l,nonce:h,to:T,value:x}),R=BigInt(await S({block:P,request:N,rpcStateOverride:I}));if(s){let W=await bo(e,{address:N.from}),oe=await Promise.all(s.map(async be=>{let{address:Be}=be,_t=await S({block:P,request:{authorizationList:void 0,data:m,from:o?.address,to:Be,value:w(W)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(_t)}));R+=oe.reduce((be,Be)=>be+Be,0n)}return R}catch(n){throw hi(n,{...t,account:o,chain:e.chain})}}async function Pi(e,t){let{abi:r,address:o,args:n,functionName:s,dataSuffix:i,...a}=t,c=M({abi:r,args:n,functionName:s});try{return await E(e,Tt,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:o,...a})}catch(u){let m=a.account?O(a.account):void 0;throw ce(u,{abi:r,address:o,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:m?.address})}}function Bt(e){let{abi:t,args:r,logs:o,strict:n=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return o.map(i=>{try{let a=t.find(u=>u.type==="event"&&i.topics[0]===nt(u));if(!a)return null;let c=We({...i,abi:[a],strict:n});return s&&!s.includes(c.eventName)||!hc({args:c.args,inputs:a.inputs,matchArgs:r})?null:{...c,...i}}catch(a){let c,u;if(a instanceof lr)return null;if(a instanceof ge||a instanceof Ae){if(n)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(m=>!("name"in m&&m.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function hc(e){let{args:t,inputs:r,matchArgs:o}=e;if(!o)return!0;if(!t)return!1;function n(s,i,a){try{return s.type==="address"?Pe(i,a):s.type==="string"||s.type==="bytes"?F(Ee(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(o)?o.every((s,i)=>{if(s==null)return!0;let a=r[i];return a?(Array.isArray(s)?s:[s]).some(u=>n(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof o=="object"&&!Array.isArray(o)?Object.entries(o).every(([s,i])=>{if(i==null)return!0;let a=r.find(u=>u.name===s);return a?(Array.isArray(i)?i:[i]).some(u=>n(a,u,t[s])):!1}):!1}function J(e,{args:t,eventName:r}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function At(e,{address:t,blockHash:r,fromBlock:o,toBlock:n,event:s,events:i,args:a,strict:c}={}){let u=c??!1,m=i??(s?[s]:void 0),p=[];m&&(p=[m.flatMap(l=>he({abi:[l],eventName:l.name,args:i?void 0:a}))],s&&(p=p[0]));let f;r?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:r}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:typeof o=="bigint"?w(o):o,toBlock:typeof n=="bigint"?w(n):n}]});let d=f.map(y=>J(y));return m?Bt({abi:m,args:a,logs:d,strict:u}):d}async function go(e,t){let{abi:r,address:o,args:n,blockHash:s,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,m=i?Ir({abi:r,name:i}):void 0,p=m?void 0:r.filter(f=>f.type==="event");return E(e,At,"getLogs")({address:o,args:n,blockHash:s,event:m,events:p,fromBlock:a,toBlock:c,strict:u})}async function q(e,t){let{abi:r,address:o,args:n,functionName:s,...i}=t,a=M({abi:r,args:n,functionName:s});try{let{data:c}=await E(e,Se,"call")({...i,data:a,to:o});return ne({abi:r,args:n,functionName:s,data:c||"0x"})}catch(c){throw ce(c,{abi:r,address:o,args:n,docsPath:"/docs/contract/readContract",functionName:s})}}async function Ii(e,t){let{abi:r,address:o,args:n,dataSuffix:s,functionName:i,...a}=t,c=a.account?O(a.account):e.account,u=M({abi:r,args:n,functionName:i});try{let{data:m}=await E(e,Se,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:o,...a,account:c}),p=ne({abi:r,args:n,functionName:i,data:m||"0x"}),f=r.filter(d=>"name"in d&&d.name===t.functionName);return{result:p,request:{abi:f,address:o,args:n,dataSuffix:s,functionName:i,...a,account:c}}}catch(m){throw ce(m,{abi:r,address:o,args:n,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}var Pn=new Map,Ti=new Map,xc=0;function Y(e,t,r){let o=++xc,n=()=>Pn.get(e)||[],s=()=>{let m=n();Pn.set(e,m.filter(p=>p.id!==o))},i=()=>{let m=n();if(!m.some(f=>f.id===o))return;let p=Ti.get(e);if(m.length===1&&p){let f=p();f instanceof Promise&&f.catch(()=>{})}s()},a=n();if(Pn.set(e,[...a,{id:o,fns:t}]),a&&a.length>0)return i;let c={};for(let m in t)c[m]=(...p)=>{let f=n();if(f.length!==0)for(let d of f)d.fns[m]?.(...p)};let u=r(c);return typeof u=="function"&&Ti.set(e,u),i}async function Ke(e){return new Promise(t=>setTimeout(t,e))}function se(e,{emitOnBegin:t,initialWaitTime:r,interval:o}){let n=!0,s=()=>n=!1;return(async()=>{let a;t&&(a=await e({unpoll:s}));let c=await r?.(a)??o;await Ke(c);let u=async()=>{n&&(await e({unpoll:s}),await Ke(o),u())};u()})(),s}var yc=new Map,bc=new Map;function Bi(e){let t=(n,s)=>({clear:()=>s.delete(n),get:()=>s.get(n),set:i=>s.set(n,i)}),r=t(e,yc),o=t(e,bc);return{clear:()=>{r.clear(),o.clear()},promise:r,response:o}}async function Ai(e,{cacheKey:t,cacheTime:r=Number.POSITIVE_INFINITY}){let o=Bi(t),n=o.response.get();if(n&&r>0&&Date.now()-n.created.getTime()<r)return n.data;let s=o.promise.get();s||(s=e(),o.promise.set(s));try{let i=await s;return o.response.set({created:new Date,data:i}),i}finally{o.promise.clear()}}var gc=e=>`blockNumber.${e}`;async function xe(e,{cacheTime:t=e.cacheTime}={}){let r=await Ai(()=>e.request({method:"eth_blockNumber"}),{cacheKey:gc(e.uid),cacheTime:t});return BigInt(r)}async function ze(e,{filter:t}){let r="strict"in t&&t.strict,o=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof o[0]=="string")return o;let n=o.map(s=>J(s));return!("abi"in t)||!t.abi?n:Bt({abi:t.abi,logs:n,strict:r})}async function Ue(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function ki(e,t){let{abi:r,address:o,args:n,batch:s=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:m,pollingInterval:p=e.pollingInterval,strict:f}=t;return(typeof m<"u"?m:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{let h=f??!1,x=z(["watchContractEvent",o,n,s,e.uid,i,p,h,a]);return Y(x,{onLogs:u,onError:c},g=>{let b;a!==void 0&&(b=a-1n);let v,P=!1,I=se(async()=>{if(!P){try{v=await E(e,so,"createContractEventFilter")({abi:r,address:o,args:n,eventName:i,strict:h,fromBlock:a})}catch{}P=!0;return}try{let T;if(v)T=await E(e,ze,"getFilterChanges")({filter:v});else{let A=await E(e,xe,"getBlockNumber")({});b&&b<A?T=await E(e,go,"getContractEvents")({abi:r,address:o,args:n,eventName:i,fromBlock:b+1n,toBlock:A,strict:h}):T=[],b=A}if(T.length===0)return;if(s)g.onLogs(T);else for(let A of T)g.onLogs([A])}catch(T){v&&T instanceof Ne&&(P=!1),g.onError?.(T)}},{emitOnBegin:!0,interval:p});return async()=>{v&&await E(e,Ue,"uninstallFilter")({filter:v}),I()}})})():(()=>{let h=f??!1,x=z(["watchContractEvent",o,n,s,e.uid,i,p,h]),g=!0,b=()=>g=!1;return Y(x,{onLogs:u,onError:c},v=>((async()=>{try{let P=(()=>{if(e.transport.type==="fallback"){let A=e.transport.transports.find(H=>H.config.type==="webSocket"||H.config.type==="ipc");return A?A.value:e.transport}return e.transport})(),I=i?he({abi:r,eventName:i,args:n}):[],{unsubscribe:T}=await P.subscribe({params:["logs",{address:o,topics:I}],onData(A){if(!g)return;let H=A.result;try{let{eventName:N,args:S}=We({abi:r,data:H.data,topics:H.topics,strict:f}),R=J(H,{args:S,eventName:N});v.onLogs([R])}catch(N){let S,R;if(N instanceof ge||N instanceof Ae){if(f)return;S=N.abiItem.name,R=N.abiItem.inputs?.some(oe=>!("name"in oe&&oe.name))}let W=J(H,{args:R?[]:{},eventName:S});v.onLogs([W])}},onError(A){v.onError?.(A)}});b=T,g||b()}catch(P){c?.(P)}})(),()=>b()))})()}var wo=class extends B{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},kt=class extends B{constructor({docsPath:t,metaMessages:r,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:t,metaMessages:r,name:"AccountTypeNotSupportedError"})}};function Ci({chain:e,currentChainId:t}){if(!e)throw new Ps;if(t!==e.id)throw new vs({chain:e,currentChainId:t})}function Ni(e,{docsPath:t,...r}){let o=(()=>{let n=pt(e,r);return n instanceof mt?e:n})();return new Cs(o,{docsPath:t,...r})}async function Eo(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var In=new rt(128);async function s0(e,t){let{account:r=e.account,chain:o=e.chain,accessList:n,authorizationList:s,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,type:y,value:l,...h}=t;if(typeof r>"u")throw new wo({docsPath:"/docs/actions/wallet/sendTransaction"});let x=r?O(r):null;try{le(t);let g=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await xt({authorization:s[0]}).catch(()=>{throw new B("`to` is required. Could not infer from `authorizationList`.")})})();if(x?.type==="json-rpc"||x===null){let b;o!==null&&(b=await E(e,Pt,"getChainId")({}),Ci({currentChainId:b,chain:o}));let v=e.chain?.formatters?.transactionRequest?.format,I=(v||Re)({...dt(h,{format:v}),accessList:n,authorizationList:s,blobs:i,chainId:b,data:a,from:x?.address,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,to:g,type:y,value:l}),T=In.get(e.uid),A=T?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:A,params:[I]},{retryCount:0})}catch(H){if(T===!1)throw H;let N=H;if(N.name==="InvalidInputRpcError"||N.name==="InvalidParamsRpcError"||N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[I]},{retryCount:0}).then(S=>(In.set(e.uid,!0),S)).catch(S=>{let R=S;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(In.set(e.uid,!1),N):R});throw N}}if(x?.type==="local"){let b=await E(e,It,"prepareTransactionRequest")({account:x,accessList:n,authorizationList:s,blobs:i,chain:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,nonceManager:x.nonceManager,parameters:[...vn,"sidecars"],type:y,value:l,...h,to:g}),v=o?.serializers?.transaction,P=await x.signTransaction(b,{serializer:v});return await E(e,Eo,"sendRawTransaction")({serializedTransaction:P})}throw x?.type==="smart"?new kt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new kt({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(g){throw g instanceof kt?g:Ni(g,{...t,account:x,chain:t.chain||void 0})}}var vo=class extends B{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}};function Le(e,{delay:t=100,retryCount:r=2,shouldRetry:o=()=>!0}={}){return new Promise((n,s)=>{let i=async({count:a=0}={})=>{let c=async({error:u})=>{let m=typeof t=="function"?t({count:a,error:u}):t;m&&await Ke(m),i({count:a+1})};try{let u=await e();n(u)}catch(u){if(a<r&&await o({count:a,error:u}))return c({error:u});s(u)}};i()})}var Tn={"0x0":"reverted","0x1":"success"};function Bn(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>J(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?_(e.transactionIndex):null,status:e.status?Tn[e.status]:null,type:e.type?wn[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}var h0=lt("transactionReceipt",Bn);var Ri="0x5792579257925792579257925792579257925792579257925792579257925792",Si=w(0,{size:32});async function Hi(e,t){async function r(m){if(m.endsWith(Ri.slice(2))){let f=me(gr(m,-64,-32)),d=gr(m,0,-64).slice(2).match(/.{1,64}/g),y=await Promise.all(d.map(h=>Si.slice(2)!==h?e.request({method:"eth_getTransactionReceipt",params:[`0x${h}`]},{dedupe:!0}):void 0)),l=y.some(h=>h===null)?100:y.every(h=>h?.status==="0x1")?200:y.every(h=>h?.status==="0x0")?500:600;return{atomic:!1,chainId:_(f),receipts:y.filter(Boolean),status:l,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[m]})}let{atomic:o=!1,chainId:n,receipts:s,version:i="2.0.0",...a}=await r(t.id),[c,u]=(()=>{let m=a.status;return m>=100&&m<200?["pending",m]:m>=200&&m<300?["success",m]:m>=300&&m<700?["failure",m]:m==="CONFIRMED"?["success",200]:m==="PENDING"?["pending",100]:[void 0,m]})();return{...a,atomic:o,chainId:n?_(n):void 0,receipts:s?.map(m=>({...m,blockNumber:j(m.blockNumber),gasUsed:j(m.gasUsed),status:Tn[m.status]}))??[],statusCode:u,status:c,version:i}}async function F0(e,t){let{id:r,pollingInterval:o=e.pollingInterval,status:n=({statusCode:l})=>l===200||l>=300,retryCount:s=4,retryDelay:i=({count:l})=>~~(1<<l)*200,timeout:a=6e4,throwOnFailure:c=!1}=t,u=z(["waitForCallsStatus",e.uid,r]),{promise:m,resolve:p,reject:f}=Qr(),d,y=Y(u,{resolve:p,reject:f},l=>{let h=se(async()=>{let x=g=>{clearTimeout(d),h(),g(),y()};try{let g=await Le(async()=>{let b=await E(e,Hi,"getCallsStatus")({id:r});if(c&&b.status==="failure")throw new vo(b);return b},{retryCount:s,delay:i});if(!n(g))return;x(()=>l.resolve(g))}catch(g){x(()=>l.reject(g))}},{interval:o,emitOnBegin:!0});return h});return d=a?setTimeout(()=>{y(),clearTimeout(d),f(new An({id:r}))},a):void 0,await m}var An=class extends B{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}};var Po=256,Io;function To(e=11){if(!Io||Po+e>256*2){Io="",Po=0;for(let t=0;t<256;t++)Io+=(256+Math.random()*256|0).toString(16).substring(1)}return Io.substring(Po,Po+++e)}function kn(e){let{batch:t,chain:r,ccipRead:o,key:n="base",name:s="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof r?.experimental_preconfirmationTime=="number"?"pending":void 0),c=r?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),m=e.pollingInterval??u,p=e.cacheTime??m,f=e.account?O(e.account):void 0,{config:d,request:y,value:l}=e.transport({chain:r,pollingInterval:m}),h={...d,...l},x={account:f,batch:t,cacheTime:p,ccipRead:o,chain:r,key:n,name:s,pollingInterval:m,request:y,transport:h,type:i,uid:To(),...a?{experimental_blockTag:a}:{}};function g(b){return v=>{let P=v(b);for(let T in x)delete P[T];let I={...b,...P};return Object.assign(I,{extend:g(I)})}}return Object.assign(x,{extend:g(x)})}function Ct(e){if(!(e instanceof B))return!1;let t=e.walk(r=>r instanceof Ot);return t instanceof Ot?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}function Bo(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;let t=`0x${e.slice(1,65)}`;return fe(t)?t:null}function Qt(e){let t=new Uint8Array(32).fill(0);if(!e)return L(t);let r=e.split(".");for(let o=r.length-1;o>=0;o-=1){let n=Bo(r[o]),s=n?Ee(n):F(ve(r[o]),"bytes");t=F(ke([t,s]),"bytes")}return L(t)}function Fi(e){return`[${e.slice(2)}]`}function zi(e){let t=new Uint8Array(32).fill(0);return e?Bo(e)||F(ve(e)):L(t)}function Nt(e){let t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let r=new Uint8Array(ve(t).byteLength+2),o=0,n=t.split(".");for(let s=0;s<n.length;s++){let i=ve(n[s]);i.byteLength>255&&(i=ve(Fi(zi(n[s])))),r[o]=i.length,r.set(i,o+1),o+=i.length+1}return r.byteLength!==o+1?r.slice(0,o+1):r}async function Ui(e,t){let{blockNumber:r,blockTag:o,coinType:n,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),m=c?.ensTlds;if(m&&!m.some(f=>s.endsWith(f)))return null;let p=n!=null?[Qt(s),BigInt(n)]:[Qt(s)];try{let f=M({abi:cn,functionName:"addr",args:p}),d={address:u,abi:pr,functionName:"resolveWithGateways",args:[$(Nt(s)),f,i??[it]],blockNumber:r,blockTag:o},l=await E(e,q,"readContract")(d);if(l[0]==="0x")return null;let h=ne({abi:cn,args:p,functionName:"addr",data:l[0]});return h==="0x"||me(h)==="0x00"?null:h}catch(f){if(a)throw f;if(Ct(f))return null;throw f}}var Ao=class extends B{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},De=class extends B{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},Rt=class extends B{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},ko=class extends B{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var wc=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Ec=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,vc=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Pc=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ic(e){try{let t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(r=>{let o=new Image;o.onload=()=>{r(!0)},o.onerror=()=>{r(!1)},o.src=e})}}function Li(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Cn({uri:e,gatewayUrls:t}){let r=vc.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let o=Li(t?.ipfs,"https://ipfs.io"),n=Li(t?.arweave,"https://arweave.net"),s=e.match(wc),{protocol:i,subpath:a,target:c,subtarget:u=""}=s?.groups||{},m=i==="ipns:/"||a==="ipns/",p=i==="ipfs:/"||a==="ipfs/"||Ec.test(e);if(e.startsWith("http")&&!m&&!p){let d=e;return t?.arweave&&(d=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:d,isOnChain:!1,isEncoded:!1}}if((m||p)&&c)return{uri:`${o}/${m?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${n}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(Pc,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Rt({uri:e})}function Nn(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Ao({data:e});return e.image||e.image_url||e.image_data}async function Di({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(n=>n.json());return await Co({gatewayUrls:e,uri:Nn(r)})}catch{throw new Rt({uri:t})}}async function Co({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:o}=Cn({uri:t,gatewayUrls:e});if(o||await Ic(r))return r;throw new Rt({uri:t})}function _i(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,o,n]=t.split("/"),[s,i]=r.split(":"),[a,c]=o.split(":");if(!s||s.toLowerCase()!=="eip155")throw new De({reason:"Only EIP-155 supported"});if(!i)throw new De({reason:"Chain ID not found"});if(!c)throw new De({reason:"Contract address not found"});if(!n)throw new De({reason:"Token ID not found"});if(!a)throw new De({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:n}}async function Mi(e,{nft:t}){if(t.namespace==="erc721")return q(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return q(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new ko({namespace:t.namespace})}async function Gi(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?Tc(e,{gatewayUrls:t,record:r}):Co({uri:r,gatewayUrls:t})}async function Tc(e,{gatewayUrls:t,record:r}){let o=_i(r),n=await Mi(e,{nft:o}),{uri:s,isOnChain:i,isEncoded:a}=Cn({uri:n,gatewayUrls:t});if(i&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let u=a?atob(s.replace("data:application/json;base64,","")):s,m=JSON.parse(u);return Co({uri:Nn(m),gatewayUrls:t})}let c=o.tokenID;return o.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Di({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,c)})}async function No(e,t){let{blockNumber:r,blockTag:o,key:n,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),m=c?.ensTlds;if(m&&!m.some(p=>s.endsWith(p)))return null;try{let p={address:u,abi:pr,args:[$(Nt(s)),M({abi:an,functionName:"text",args:[Qt(s),n]}),i??[it]],functionName:"resolveWithGateways",blockNumber:r,blockTag:o},d=await E(e,q,"readContract")(p);if(d[0]==="0x")return null;let y=ne({abi:an,functionName:"text",data:d[0]});return y===""?null:y}catch(p){if(a)throw p;if(Ct(p))return null;throw p}}async function qi(e,{blockNumber:t,blockTag:r,assetGatewayUrls:o,name:n,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=await E(e,No,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:n,universalResolverAddress:a,gatewayUrls:s,strict:i});if(!c)return null;try{return await Gi(e,{record:c,gatewayUrls:o})}catch{return null}}async function $i(e,t){let{address:r,blockNumber:o,blockTag:n,coinType:s=60n,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:o,chain:c,contract:"ensUniversalResolver"})})();try{let m={address:u,abi:ds,args:[r,s,i??[it]],functionName:"reverseWithGateways",blockNumber:o,blockTag:n},p=E(e,q,"readContract"),[f]=await p(m);return f||null}catch(m){if(a)throw m;if(Ct(m))return null;throw m}}async function Oi(e,t){let{blockNumber:r,blockTag:o,name:n}=t,{chain:s}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:s,contract:"ensUniversalResolver"})})(),a=s?.ensTlds;if(a&&!a.some(u=>n.endsWith(u)))throw new Error(`${n} is not a valid ENS TLD (${a?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[c]=await E(e,q,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[$(Nt(n))],blockNumber:r,blockTag:o});return c}async function Ro(e,t){let{account:r=e.account,blockNumber:o,blockTag:n="latest",blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:p,to:f,value:d,...y}=t,l=r?O(r):void 0;try{le(t);let x=(typeof o=="bigint"?w(o):void 0)||n,g=e.chain?.formatters?.transactionRequest?.format,v=(g||Re)({...dt(y,{format:g}),from:l?.address,blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:p,to:f,value:d}),P=await e.request({method:"eth_createAccessList",params:[v,x]});return{accessList:P.accessList,gasUsed:BigInt(P.gasUsed)}}catch(h){throw Zs(h,{...t,account:l,chain:e.chain})}}async function ji(e){let t=He(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}async function So(e,{address:t,args:r,event:o,events:n,fromBlock:s,strict:i,toBlock:a}={}){let c=n??(o?[o]:void 0),u=He(e,{method:"eth_newFilter"}),m=[];c&&(m=[c.flatMap(d=>he({abi:[d],eventName:d.name,args:r}))],o&&(m=m[0]));let p=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?w(s):s,toBlock:typeof a=="bigint"?w(a):a,...m.length?{topics:m}:{}}]});return{abi:c,args:r,eventName:o?o.name:void 0,fromBlock:s,id:p,request:u(p),strict:!!i,toBlock:a,type:"event"}}async function Ho(e){let t=He(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}async function Vi(e){let t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Wi(e,{blockHash:t,blockNumber:r,blockTag:o="latest"}={}){let n=r!==void 0?w(r):void 0,s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[n||o]},{dedupe:!!n}),_(s)}async function Xt(e,{address:t,blockNumber:r,blockTag:o="latest"}){let n=r!==void 0?w(r):void 0,s=await e.request({method:"eth_getCode",params:[t,n||o]},{dedupe:!!n});if(s!=="0x")return s}var Fo=class extends B{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function Ki(e,t){let{address:r,factory:o,factoryData:n}=t;try{let[s,i,a,c,u,m,p]=await E(e,q,"readContract")({abi:Bc,address:r,functionName:"eip712Domain",factory:o,factoryData:n});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:m},extensions:p,fields:s}}catch(s){let i=s;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Fo({address:r}):i}}var Bc=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Zi(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(r=>BigInt(r)))}}async function Ji(e,{blockCount:t,blockNumber:r,blockTag:o="latest",rewardPercentiles:n}){let s=typeof r=="bigint"?w(r):void 0,i=await e.request({method:"eth_feeHistory",params:[w(t),s||o,n]},{dedupe:!!s});return Zi(i)}async function Yi(e,{filter:t}){let r=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>J(s));return t.abi?Bt({abi:t.abi,logs:n,strict:r}):n}function Ac(e,t){if(e.length!==t.length)throw new hs({expectedLength:e.length,givenLength:t.length});let r=[];for(let o=0;o<e.length;o++){let n=e[o],s=t[o];r.push(Qi(n,s))}return re(r)}function Qi(e,t,r=!1){if(e==="address"){let i=t;if(!te(i))throw new ae({address:i});return tt(i.toLowerCase(),{size:r?32:null})}if(e==="string")return we(t);if(e==="bytes")return t;if(e==="bool")return tt(yr(t),{size:r?32:1});let o=e.match(Er);if(o){let[i,a,c="256"]=o,u=Number.parseInt(c,10)/8;return w(t,{size:r?32:u,signed:a==="int"})}let n=e.match(wr);if(n){let[i,a]=n;if(Number.parseInt(a,10)!==(t.length-2)/2)throw new hr({expectedSize:Number.parseInt(a,10),givenSize:(t.length-2)/2});return tt(t,{dir:"right",size:r?32:null})}let s=e.match(ws);if(s&&Array.isArray(t)){let[i,a]=s,c=[];for(let u=0;u<t.length;u++)c.push(Qi(a,t[u],!0));return c.length===0?"0x":re(c)}throw new ys(e)}function Xi(e){let{authorizationList:t}=e;if(t)for(let r of t){let{chainId:o}=r,n=r.address;if(!te(n))throw new ae({address:n});if(o<0)throw new $t({chainId:o})}zo(e)}function ea(e){let{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new vt;for(let r of t){let o=ee(r),n=_(pn(r,0,1));if(o!==32)throw new lo({hash:r,size:o});if(n!==1)throw new ho({hash:r,version:n})}}zo(e)}function zo(e){let{chainId:t,maxPriorityFeePerGas:r,maxFeePerGas:o,to:n}=e;if(t<=0)throw new $t({chainId:t});if(n&&!te(n))throw new ae({address:n});if(o&&o>eo)throw new Yr({maxFeePerGas:o});if(r&&o&&r>o)throw new Ks({maxFeePerGas:o,maxPriorityFeePerGas:r})}function ta(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:o,maxFeePerGas:n,to:s}=e;if(t<=0)throw new $t({chainId:t});if(s&&!te(s))throw new ae({address:s});if(r||n)throw new B("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(o&&o>eo)throw new Yr({maxFeePerGas:o})}function ra(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:o,maxFeePerGas:n,to:s}=e;if(s&&!te(s))throw new ae({address:s});if(typeof t<"u"&&t<=0)throw new $t({chainId:t});if(r||n)throw new B("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(o&&o>eo)throw new Yr({maxFeePerGas:o})}function er(e){if(!e||e.length===0)return[];let t=[];for(let r=0;r<e.length;r++){let{address:o,storageKeys:n}=e[r];for(let s=0;s<n.length;s++)if(n[s].length-2!==64)throw new ks({storageKey:n[s]});if(!te(o,{strict:!1}))throw new ae({address:o});t.push([o,n])}return t}function by(e,t){let r=yo(e);return r==="eip1559"?Nc(e,t):r==="eip2930"?Rc(e,t):r==="eip4844"?Cc(e,t):r==="eip7702"?kc(e,t):Sc(e,t)}function kc(e,t){let{authorizationList:r,chainId:o,gas:n,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:m,data:p}=e;Xi(e);let f=er(m),d=oa(r);return re(["0x04",Ie([w(o),s?w(s):"0x",u?w(u):"0x",c?w(c):"0x",n?w(n):"0x",i??"0x",a?w(a):"0x",p??"0x",f,d,...St(e,t)])])}function Cc(e,t){let{chainId:r,gas:o,nonce:n,to:s,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:m,data:p}=e;ea(e);let f=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof f>"u"||typeof d>"u")){let b=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(I=>L(I)),v=e.kzg,P=wt({blobs:b,kzg:v});if(typeof f>"u"&&(f=mo({commitments:P})),typeof d>"u"){let I=Et({blobs:b,commitments:P,kzg:v});d=xo({blobs:b,commitments:P,proofs:I})}}let y=er(m),l=[w(r),n?w(n):"0x",u?w(u):"0x",c?w(c):"0x",o?w(o):"0x",s??"0x",i?w(i):"0x",p??"0x",y,a?w(a):"0x",f??[],...St(e,t)],h=[],x=[],g=[];if(d)for(let b=0;b<d.length;b++){let{blob:v,commitment:P,proof:I}=d[b];h.push(v),x.push(P),g.push(I)}return re(["0x03",d?Ie([l,h,x,g]):Ie(l)])}function Nc(e,t){let{chainId:r,gas:o,nonce:n,to:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:m}=e;zo(e);let p=er(u),f=[w(r),n?w(n):"0x",c?w(c):"0x",a?w(a):"0x",o?w(o):"0x",s??"0x",i?w(i):"0x",m??"0x",p,...St(e,t)];return re(["0x02",Ie(f)])}function Rc(e,t){let{chainId:r,gas:o,data:n,nonce:s,to:i,value:a,accessList:c,gasPrice:u}=e;ta(e);let m=er(c),p=[w(r),s?w(s):"0x",u?w(u):"0x",o?w(o):"0x",i??"0x",a?w(a):"0x",n??"0x",m,...St(e,t)];return re(["0x01",Ie(p)])}function Sc(e,t){let{chainId:r=0,gas:o,data:n,nonce:s,to:i,value:a,gasPrice:c}=e;ra(e);let u=[s?w(s):"0x",c?w(c):"0x",o?w(o):"0x",i??"0x",a?w(a):"0x",n??"0x"];if(t){let m=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+t.v-27n);let d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new Bs({v:t.v});return d})(),p=me(t.r),f=me(t.s);u=[...u,w(m),p==="0x00"?"0x":p,f==="0x00"?"0x":f]}else r>0&&(u=[...u,w(r),"0x","0x"]);return Ie(u)}function St(e,t){let r=t??e,{v:o,yParity:n}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof o>"u"&&typeof n>"u")return[];let s=me(r.r),i=me(r.s);return[typeof n=="number"?n?w(1):"0x":o===0n?"0x":o===1n?w(1):o===27n?"0x":w(1),s==="0x00"?"0x":s,i==="0x00"?"0x":i]}function oa(e){if(!e||e.length===0)return[];let t=[];for(let r of e){let{chainId:o,nonce:n,...s}=r,i=r.address;t.push([o?$(o):"0x",i,n?$(n):"0x",...St({},s)])}return t}async function na({address:e,authorization:t,signature:r}){return Pe(ot(e),await xt({authorization:t,signature:r}))}var Uo=new rt(8192);function sa(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(Uo.get(r))return Uo.get(r);let o=e().finally(()=>Uo.delete(r));return Uo.set(r,o),o}function ia(e,t={}){return async(r,o={})=>{let{dedupe:n=!1,methods:s,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...o},{method:u}=r;if(s?.exclude?.includes(u))throw new ct(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new ct(new Error("method not supported"),{method:u});let m=n?we(`${c}.${z(r)}`):void 0;return sa(()=>Le(async()=>{try{return await e(r)}catch(p){let f=p;switch(f.code){case Cr.code:throw new Cr(f);case Nr.code:throw new Nr(f);case Rr.code:throw new Rr(f,{method:r.method});case Sr.code:throw new Sr(f);case $e.code:throw new $e(f);case Ne.code:throw new Ne(f);case Hr.code:throw new Hr(f);case Fr.code:throw new Fr(f);case at.code:throw new at(f);case ct.code:throw new ct(f,{method:r.method});case jt.code:throw new jt(f);case zr.code:throw new zr(f);case Oe.code:throw new Oe(f);case Ur.code:throw new Ur(f);case Lr.code:throw new Lr(f);case Dr.code:throw new Dr(f);case _r.code:throw new _r(f);case Mr.code:throw new Mr(f);case Gr.code:throw new Gr(f);case qr.code:throw new qr(f);case $r.code:throw new $r(f);case Or.code:throw new Or(f);case jr.code:throw new jr(f);case Vr.code:throw new Vr(f);case Wr.code:throw new Wr(f);case 5e3:throw new Oe(f);default:throw p instanceof B?p:new xn(f)}}},{delay:({count:p,error:f})=>{if(f&&f instanceof qe){let d=f?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d,10)*1e3}return~~(1<<p)*i},retryCount:a,shouldRetry:({error:p})=>Hc(p)}),{enabled:n,id:m})}}function Hc(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===jt.code||e.code===$e.code:e instanceof qe&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function Fc(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}function zc(e){let{source:t}=e,r=new Map,o=new rt(8192),n=new Map,s=({address:i,chainId:a})=>`${i}.${a}`;return{async consume({address:i,chainId:a,client:c}){let u=s({address:i,chainId:a}),m=this.get({address:i,chainId:a,client:c});this.increment({address:i,chainId:a});let p=await m;return await t.set({address:i,chainId:a},p),o.set(u,p),p},async increment({address:i,chainId:a}){let c=s({address:i,chainId:a}),u=r.get(c)??0;r.set(c,u+1)},async get({address:i,chainId:a,client:c}){let u=s({address:i,chainId:a}),m=n.get(u);return m||(m=(async()=>{try{let f=await t.get({address:i,chainId:a,client:c}),d=o.get(u)??0;return d>0&&f<=d?d+1:(o.delete(u),f)}finally{this.reset({address:i,chainId:a})}})(),n.set(u,m)),(r.get(u)??0)+await m},reset({address:i,chainId:a}){let c=s({address:i,chainId:a});r.delete(c),n.delete(c)}}}function Uc(){return{async get(e){let{address:t,client:r}=e;return gt(r,{address:t,blockTag:"pending"})},set(){}}}var My=zc({source:Uc()});function Rn(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:o}){return new Promise((n,s)=>{(async()=>{let i;try{let a=new AbortController;r>0&&(i=setTimeout(()=>{o?a.abort():s(t)},r)),n(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(t),s(a)}finally{clearTimeout(i)}})()})}function Lc(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var Sn=Lc();function aa(e,t={}){return{async request(r){let{body:o,fetchFn:n=t.fetchFn??fetch,onRequest:s=t.onRequest,onResponse:i=t.onResponse,timeout:a=t.timeout??1e4}=r,c={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:m,signal:p}=c;try{let f=await Rn(async({signal:y})=>{let l={...c,body:Array.isArray(o)?z(o.map(b=>({jsonrpc:"2.0",id:b.id??Sn.take(),...b}))):z({jsonrpc:"2.0",id:o.id??Sn.take(),...o}),headers:{"Content-Type":"application/json",...u},method:m||"POST",signal:p||(a>0?y:null)},h=new Request(e,l),x=await s?.(h,l)??{...l,url:e};return await n(x.url??e,x)},{errorInstance:new hn({body:o,url:e}),timeout:a,signal:!0});i&&await i(f);let d;if(f.headers.get("Content-Type")?.startsWith("application/json"))d=await f.json();else{d=await f.text();try{d=JSON.parse(d||"{}")}catch(y){if(f.ok)throw y;d={error:d}}}if(!f.ok)throw new qe({body:o,details:z(d.error)||f.statusText,headers:f.headers,status:f.status,url:e});return d}catch(f){throw f instanceof qe||f instanceof hn?f:new qe({body:o,cause:f,url:e})}}}}var ca="0x6492649264926492649264926492649264926492649264926492649264926492";var cr={};ps(cr,{InvalidWrappedSignatureError:()=>Yo,assert:()=>Qo,from:()=>wu,magicBytes:()=>ns,suffixParameters:()=>ss,unwrap:()=>Ca,validate:()=>vu,wrap:()=>Eu});var Lo=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){let o=this.keys().next().value;o&&this.delete(o)}return this}};var Dc={checksum:new Lo(8192)},Do=Dc.checksum;function Ze(e,t={}){let{as:r=typeof e=="string"?"Hex":"Bytes"}=t,o=bs(Hs(e));return r==="Bytes"?o:X(o)}function ua(e,t={}){let{compressed:r}=t,{prefix:o,x:n,y:s}=e;if(r===!1||typeof n=="bigint"&&typeof s=="bigint"){if(o!==4)throw new _o({prefix:o,cause:new Un});return}if(r===!0||typeof n=="bigint"&&typeof s>"u"){if(o!==3&&o!==2)throw new _o({prefix:o,cause:new zn});return}throw new Fn({publicKey:e})}function fa(e){let t=(()=>{if(Kt(e))return ma(e);if(Ms(e))return Gc(e);let{prefix:r,x:o,y:n}=e;return typeof o=="bigint"&&typeof n=="bigint"?{prefix:r??4,x:o,y:n}:{prefix:r,x:o}})();return ua(t),t}function Gc(e){return ma(X(e))}function ma(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Ln({publicKey:e});if(e.length===130){let o=BigInt(U(e,0,32)),n=BigInt(U(e,32,64));return{prefix:4,x:o,y:n}}if(e.length===132){let o=Number(U(e,0,1)),n=BigInt(U(e,1,33)),s=BigInt(U(e,33,65));return{prefix:o,x:n,y:s}}let t=Number(U(e,0,1)),r=BigInt(U(e,1,33));return{prefix:t,x:r}}function Dn(e,t={}){ua(e);let{prefix:r,x:o,y:n}=e,{includePrefix:s=!0}=t;return D(s?G(r,{size:1}):"0x",G(o,{size:32}),typeof n=="bigint"?G(n,{size:32}):"0x")}var Fn=class extends C{constructor({publicKey:t}){super(`Value \`${Kr(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},_o=class extends C{constructor({prefix:t,cause:r}){super(`Prefix "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},zn=class extends C{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},Un=class extends C{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},Ln=class extends C{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${V(ut(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var qc=/^0x[a-fA-F0-9]{40}$/;function Je(e,t={}){let{strict:r=!0}=t;if(!qc.test(e))throw new Mo({address:e,cause:new _n});if(r){if(e.toLowerCase()===e)return;if(Go(e)!==e)throw new Mo({address:e,cause:new Mn})}}function Go(e){if(Do.has(e))return Do.get(e);Je(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=Ze(Fs(t),{as:"Bytes"}),o=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&o[s]&&(o[s]=o[s].toUpperCase()),(r[s>>1]&15)>=8&&o[s+1]&&(o[s+1]=o[s+1].toUpperCase());let n=`0x${o.join("")}`;return Do.set(e,n),n}function $c(e,t={}){let{checksum:r=!1}=t;return Je(e),r?Go(e):e}function da(e,t={}){let r=Ze(`0x${Dn(e).slice(4)}`).substring(26);return $c(`0x${r}`,t)}function qo(e,t={}){let{strict:r=!0}=t??{};try{return Je(e,{strict:r}),!0}catch{return!1}}var Mo=class extends C{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},_n=class extends C{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},Mn=class extends C{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};var la=/^(.*)\[([0-9]*)\]$/,ha=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Oo=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Xy=2n**(8n-1n)-1n,eb=2n**(16n-1n)-1n,tb=2n**(24n-1n)-1n,rb=2n**(32n-1n)-1n,ob=2n**(40n-1n)-1n,nb=2n**(48n-1n)-1n,sb=2n**(56n-1n)-1n,ib=2n**(64n-1n)-1n,ab=2n**(72n-1n)-1n,cb=2n**(80n-1n)-1n,ub=2n**(88n-1n)-1n,fb=2n**(96n-1n)-1n,mb=2n**(104n-1n)-1n,pb=2n**(112n-1n)-1n,db=2n**(120n-1n)-1n,lb=2n**(128n-1n)-1n,hb=2n**(136n-1n)-1n,xb=2n**(144n-1n)-1n,yb=2n**(152n-1n)-1n,bb=2n**(160n-1n)-1n,gb=2n**(168n-1n)-1n,wb=2n**(176n-1n)-1n,Eb=2n**(184n-1n)-1n,vb=2n**(192n-1n)-1n,Pb=2n**(200n-1n)-1n,Ib=2n**(208n-1n)-1n,Tb=2n**(216n-1n)-1n,Bb=2n**(224n-1n)-1n,Ab=2n**(232n-1n)-1n,kb=2n**(240n-1n)-1n,Cb=2n**(248n-1n)-1n,Nb=2n**(256n-1n)-1n,Rb=-(2n**(8n-1n)),Sb=-(2n**(16n-1n)),Hb=-(2n**(24n-1n)),Fb=-(2n**(32n-1n)),zb=-(2n**(40n-1n)),Ub=-(2n**(48n-1n)),Lb=-(2n**(56n-1n)),Db=-(2n**(64n-1n)),_b=-(2n**(72n-1n)),Mb=-(2n**(80n-1n)),Gb=-(2n**(88n-1n)),qb=-(2n**(96n-1n)),$b=-(2n**(104n-1n)),Ob=-(2n**(112n-1n)),jb=-(2n**(120n-1n)),Vb=-(2n**(128n-1n)),Wb=-(2n**(136n-1n)),Kb=-(2n**(144n-1n)),Zb=-(2n**(152n-1n)),Jb=-(2n**(160n-1n)),Yb=-(2n**(168n-1n)),Qb=-(2n**(176n-1n)),Xb=-(2n**(184n-1n)),eg=-(2n**(192n-1n)),tg=-(2n**(200n-1n)),rg=-(2n**(208n-1n)),og=-(2n**(216n-1n)),ng=-(2n**(224n-1n)),sg=-(2n**(232n-1n)),ig=-(2n**(240n-1n)),ag=-(2n**(248n-1n)),cg=-(2n**(256n-1n)),ug=2n**8n-1n,fg=2n**16n-1n,mg=2n**24n-1n,pg=2n**32n-1n,dg=2n**40n-1n,lg=2n**48n-1n,hg=2n**56n-1n,xg=2n**64n-1n,yg=2n**72n-1n,bg=2n**80n-1n,gg=2n**88n-1n,wg=2n**96n-1n,Eg=2n**104n-1n,vg=2n**112n-1n,Pg=2n**120n-1n,Ig=2n**128n-1n,Tg=2n**136n-1n,Bg=2n**144n-1n,Ag=2n**152n-1n,kg=2n**160n-1n,Cg=2n**168n-1n,Ng=2n**176n-1n,Rg=2n**184n-1n,Sg=2n**192n-1n,Hg=2n**200n-1n,Fg=2n**208n-1n,zg=2n**216n-1n,Ug=2n**224n-1n,Lg=2n**232n-1n,Dg=2n**240n-1n,_g=2n**248n-1n,Gn=2n**256n-1n;function Ye(e,t,r){let{checksumAddress:o,staticPosition:n}=r,s=On(t.type);if(s){let[i,a]=s;return jc(e,{...t,type:a},{checksumAddress:o,length:i,staticPosition:n})}if(t.type==="tuple")return Zc(e,t,{checksumAddress:o,staticPosition:n});if(t.type==="address")return Oc(e,{checksum:o});if(t.type==="bool")return Vc(e);if(t.type.startsWith("bytes"))return Wc(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Kc(e,t);if(t.type==="string")return Jc(e,{staticPosition:n});throw new Ht(t.type)}var ya=32,qn=32;function Oc(e,t={}){let{checksum:r=!1}=t,o=e.readBytes(32);return[(s=>r?Go(s):s)(X(zs(o,-20))),32]}function jc(e,t,r){let{checksumAddress:o,length:n,staticPosition:s}=r;if(!n){let c=de(e.readBytes(qn)),u=s+c,m=u+ya;e.setPosition(u);let p=de(e.readBytes(ya)),f=rr(t),d=0,y=[];for(let l=0;l<p;++l){e.setPosition(m+(f?l*32:d));let[h,x]=Ye(e,t,{checksumAddress:o,staticPosition:m});d+=x,y.push(h)}return e.setPosition(s+32),[y,32]}if(rr(t)){let c=de(e.readBytes(qn)),u=s+c,m=[];for(let p=0;p<n;++p){e.setPosition(u+p*32);let[f]=Ye(e,t,{checksumAddress:o,staticPosition:u});m.push(f)}return e.setPosition(s+32),[m,32]}let i=0,a=[];for(let c=0;c<n;++c){let[u,m]=Ye(e,t,{checksumAddress:o,staticPosition:s+i});i+=m,a.push(u)}return[a,i]}function Vc(e){return[Ls(e.readBytes(32),{size:32}),32]}function Wc(e,t,{staticPosition:r}){let[o,n]=t.type.split("bytes");if(!n){let i=de(e.readBytes(32));e.setPosition(r+i);let a=de(e.readBytes(32));if(a===0)return e.setPosition(r+32),["0x",32];let c=e.readBytes(a);return e.setPosition(r+32),[X(c),32]}return[X(e.readBytes(Number.parseInt(n,10),32)),32]}function Kc(e,t){let r=t.type.startsWith("int"),o=Number.parseInt(t.type.split("int")[1]||"256",10),n=e.readBytes(32);return[o>48?Us(n,{signed:r}):de(n,{signed:r}),32]}function Zc(e,t,r){let{checksumAddress:o,staticPosition:n}=r,s=t.components.length===0||t.components.some(({name:c})=>!c),i=s?[]:{},a=0;if(rr(t)){let c=de(e.readBytes(qn)),u=n+c;for(let m=0;m<t.components.length;++m){let p=t.components[m];e.setPosition(u+a);let[f,d]=Ye(e,p,{checksumAddress:o,staticPosition:u});a+=d,i[s?m:p?.name]=f}return e.setPosition(n+32),[i,32]}for(let c=0;c<t.components.length;++c){let u=t.components[c],[m,p]=Ye(e,u,{checksumAddress:o,staticPosition:n});i[s?c:u?.name]=m,a+=p}return[i,a]}function Jc(e,{staticPosition:t}){let r=de(e.readBytes(32)),o=t+r;e.setPosition(o);let n=de(e.readBytes(32));if(n===0)return e.setPosition(t+32),["",32];let s=e.readBytes(n,32),i=Ds(_s(s));return e.setPosition(t+32),[i,32]}function ba({checksumAddress:e,parameters:t,values:r}){let o=[];for(let n=0;n<t.length;n++)o.push($n({checksumAddress:e,parameter:t[n],value:r[n]}));return o}function $n({checksumAddress:e=!1,parameter:t,value:r}){let o=t,n=On(o.type);if(n){let[s,i]=n;return Qc(r,{checksumAddress:e,length:s,parameter:{...o,type:i}})}if(o.type==="tuple")return ou(r,{checksumAddress:e,parameter:o});if(o.type==="address")return Yc(r,{checksum:e});if(o.type==="bool")return eu(r);if(o.type.startsWith("uint")||o.type.startsWith("int")){let s=o.type.startsWith("int"),[,,i="256"]=Oo.exec(o.type)??[];return tu(r,{signed:s,size:Number(i)})}if(o.type.startsWith("bytes"))return Xc(r,{type:o.type});if(o.type==="string")return ru(r);throw new Ht(o.type)}function jo(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?t+=32:t+=V(a)}let r=[],o=[],n=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?(r.push(G(t+n,{size:32})),o.push(a),n+=V(a)):r.push(a)}return D(...r,...o)}function Yc(e,t){let{checksum:r=!1}=t;return Je(e,{strict:r}),{dynamic:!1,encoded:je(e.toLowerCase())}}function Qc(e,t){let{checksumAddress:r,length:o,parameter:n}=t,s=o===null;if(!Array.isArray(e))throw new Wo(e);if(!s&&e.length!==o)throw new Vo({expectedLength:o,givenLength:e.length,type:`${n.type}[${o}]`});let i=!1,a=[];for(let c=0;c<e.length;c++){let u=$n({checksumAddress:r,parameter:n,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(s||i){let c=jo(a);if(s){let u=G(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?D(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:D(...a.map(({encoded:c})=>c))}}function Xc(e,{type:t}){let[,r]=t.split("bytes"),o=V(e);if(!r){let n=e;return o%32!==0&&(n=Ve(n,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:D(je(G(o,{size:32})),n)}}if(o!==Number.parseInt(r,10))throw new or({expectedSize:Number.parseInt(r,10),value:e});return{dynamic:!1,encoded:Ve(e)}}function eu(e){if(typeof e!="boolean")throw new C(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:je(Zr(e))}}function tu(e,{signed:t,size:r}){if(typeof r=="number"){let o=2n**(BigInt(r)-(t?1n:0n))-1n,n=t?-o-1n:0n;if(e>o||e<n)throw new qs({max:o.toString(),min:n.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:G(e,{size:32,signed:t})}}function ru(e){let t=ft(e),r=Math.ceil(V(t)/32),o=[];for(let n=0;n<r;n++)o.push(Ve(U(t,n*32,(n+1)*32)));return{dynamic:!0,encoded:D(Ve(G(V(t),{size:32})),...o)}}function ou(e,t){let{checksumAddress:r,parameter:o}=t,n=!1,s=[];for(let i=0;i<o.components.length;i++){let a=o.components[i],c=Array.isArray(e)?i:a.name,u=$n({checksumAddress:r,parameter:a,value:e[c]});s.push(u),u.dynamic&&(n=!0)}return{dynamic:n,encoded:n?jo(s):D(...s.map(({encoded:i})=>i))}}function On(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function rr(e){let{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(rr);let r=On(e.type);return!!(r&&rr({...e,type:r[1]}))}var su={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Vn({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new jn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Ko({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Ko({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Zo(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(su);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}var Ko=class extends C{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},jn=class extends C{constructor({length:t,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},Vn=class extends C{constructor({count:t,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function Ft(e,t,r={}){let{as:o="Array",checksumAddress:n=!1}=r,s=typeof t=="string"?Vt(t):t,i=Zo(s);if(Wt(s)===0&&e.length>0)throw new Zn;if(Wt(s)&&Wt(s)<32)throw new Kn({data:typeof t=="string"?t:X(t),parameters:e,size:Wt(s)});let a=0,c=o==="Array"?[]:{};for(let u=0;u<e.length;++u){let m=e[u];i.setPosition(a);let[p,f]=Ye(i,m,{checksumAddress:n,staticPosition:0});a+=f,o==="Array"?c.push(p):c[m.name??u]=p}return c}function _e(e,t,r){let{checksumAddress:o=!1}=r??{};if(e.length!==t.length)throw new Jo({expectedLength:e.length,givenLength:t.length});let n=ba({checksumAddress:o,parameters:e,values:t}),s=jo(n);return s.length===0?"0x":s}function Wn(e,t){if(e.length!==t.length)throw new Jo({expectedLength:e.length,givenLength:t.length});let r=[];for(let o=0;o<e.length;o++){let n=e[o],s=t[o];r.push(Wn.encode(n,s))}return D(...r)}(function(e){function t(r,o,n=!1){if(r==="address"){let c=o;return Je(c),je(c.toLowerCase(),n?32:0)}if(r==="string")return ft(o);if(r==="bytes")return o;if(r==="bool")return je(Zr(o),n?32:1);let s=r.match(Oo);if(s){let[c,u,m="256"]=s,p=Number.parseInt(m,10)/8;return G(o,{size:n?32:p,signed:u==="int"})}let i=r.match(ha);if(i){let[c,u]=i;if(Number.parseInt(u,10)!==(o.length-2)/2)throw new or({expectedSize:Number.parseInt(u,10),value:o});return Ve(o,n?32:0)}let a=r.match(la);if(a&&Array.isArray(o)){let[c,u]=a,m=[];for(let p=0;p<o.length;p++)m.push(t(u,o[p],!0));return m.length===0?"0x":D(...m)}throw new Ht(r)}e.encode=t})(Wn||(Wn={}));function sr(e){return Array.isArray(e)&&typeof e[0]=="string"?ln(e):typeof e=="string"?ln(e):e}var Kn=class extends C{constructor({data:t,parameters:r,size:o}){super(`Data size of ${o} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Es(r)})`,`Data:   ${t} (${o} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}},Zn=class extends C{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}},Vo=class extends C{constructor({expectedLength:t,givenLength:r,type:o}){super(`Array length mismatch for type \`${o}\`. Expected: \`${t}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},or=class extends C{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${V(r)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Jo=class extends C{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},Wo=class extends C{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Ht=class extends C{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function au(e,t){let{as:r}=t,o=Ea(e),n=Zo(new Uint8Array(o.length));return o.encode(n),r==="Hex"?X(n.bytes):n.bytes}function wa(e,t={}){let{as:r="Hex"}=t;return au(e,{as:r})}function Ea(e){return Array.isArray(e)?cu(e.map(t=>Ea(t))):uu(e)}function cu(e){let t=e.reduce((n,s)=>n+s.length,0),r=va(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),r===1?n.pushUint8(t):r===2?n.pushUint16(t):r===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:s}of e)s(n)}}}function uu(e){let t=typeof e=="string"?Vt(e):e,r=va(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(183+r),r===1?n.pushUint8(t.length):r===2?n.pushUint16(t.length):r===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function va(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new C("Length is too large.")}function es(e,t={}){let{recovered:r}=t;if(typeof e.r>"u")throw new ir({signature:e});if(typeof e.s>"u")throw new ir({signature:e});if(r&&typeof e.yParity>"u")throw new ir({signature:e});if(e.r<0n||e.r>Gn)throw new Yn({value:e.r});if(e.s<0n||e.s>Gn)throw new Qn({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new ar({value:e.yParity})}function mu(e){return Pa(X(e))}function Pa(e){if(e.length!==130&&e.length!==132)throw new Jn({signature:e});let t=BigInt(U(e,0,32)),r=BigInt(U(e,32,64)),o=(()=>{let n=+`0x${e.slice(130)}`;if(!Number.isNaN(n))try{return os(n)}catch{throw new ar({value:n})}})();return typeof o>"u"?{r:t,s:r}:{r:t,s:r,yParity:o}}function ts(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return rs(e)}function rs(e){let t=typeof e=="string"?Pa(e):e instanceof Uint8Array?mu(e):typeof e.r=="string"?du(e):e.v?pu(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return es(t),t}function pu(e){return{r:e.r,s:e.s,yParity:os(e.v)}}function du(e){let t=(()=>{let r=e.v?Number(e.v):void 0,o=e.yParity?Number(e.yParity):void 0;if(typeof r=="number"&&typeof o!="number"&&(o=os(r)),typeof o!="number")throw new ar({value:e.yParity});return o})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Ia(e){let{r:t,s:r,yParity:o}=e;return[o?"0x01":"0x",t===0n?"0x":yn(G(t)),r===0n?"0x":yn(G(r))]}function os(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Xn({value:e})}var Jn=class extends C{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${V(ut(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},ir=class extends C{constructor({signature:t}){super(`Signature \`${Kr(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},Yn=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},Qn=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},ar=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},Xn=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function Ba(e,t={}){return typeof e.chainId=="string"?lu(e):{...e,...t.signature}}function lu(e){let{address:t,chainId:r,nonce:o}=e,n=ts(e);return{address:t,chainId:Number(r),nonce:BigInt(o),...n}}function Aa(e){return hu(e,{presign:!0})}function hu(e,t={}){let{presign:r}=t;return Ze(D("0x05",wa(xu(r?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function xu(e){let{address:t,chainId:r,nonce:o}=e,n=ts(e);return[r?G(r):"0x",t,o?G(o):"0x",...n?Ia(n):[]]}function ka(e){return da(bu(e))}function bu(e){let{payload:t,signature:r}=e,{r:o,s:n,yParity:s}=r,a=new ht.Signature(BigInt(o),BigInt(n)).addRecoveryBit(s).recoverPublicKey(ut(t).substring(2));return fa(a)}var ns="0x8010801080108010801080108010801080108010801080108010801080108010",ss=sr("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Qo(e){if(typeof e=="string"){if(U(e,-32)!==ns)throw new Yo(e)}else es(e.authorization)}function wu(e){return typeof e=="string"?Ca(e):e}function Ca(e){Qo(e);let t=Gs(U(e,-64,-32)),r=U(e,-t-64,-64),o=U(e,0,-t-64),[n,s,i]=Ft(ss,r);return{authorization:Ba({address:n.delegation,chainId:Number(n.chainId),nonce:n.nonce,yParity:n.yParity,r:n.r,s:n.s}),signature:o,...i&&i!=="0x"?{data:i,to:s}:{}}}function Eu(e){let{data:t,signature:r}=e;Qo(e);let o=ka({payload:Aa(e.authorization),signature:rs(e.authorization)}),n=_e(ss,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??o,t??"0x"]),s=G(V(n),{size:32});return D(r,n,s,ns)}function vu(e){try{return Qo(e),!0}catch{return!1}}var Yo=class extends C{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Qg(e){let{address:t,data:r,signature:o,to:n="hex"}=e,s=re([Ce([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,r,o]),ca]);return n==="hex"?s:K(s)}var Xo=class extends B{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function Pu(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Xo({value:e});let[r,o="0"]=e.split("."),n=r.startsWith("-");if(n&&(r=r.slice(1)),o=o.replace(/(0+)$/,""),t===0)Math.round(+`.${o}`)===1&&(r=`${BigInt(r)+1n}`),o="";else if(o.length>t){let[s,i,a]=[o.slice(0,t-1),o.slice(t-1,t),o.slice(t)],c=Math.round(+`${i}.${a}`);c>9?o=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):o=`${s}${c}`,o.length>t&&(o=o.slice(1),r=`${BigInt(r)+1n}`),o=o.slice(0,t)}else o=o.padEnd(t,"0");return BigInt(`${n?"-":""}${r}${o}`)}function ku(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function Na(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?_(e.nonce):void 0,storageProof:e.storageProof?ku(e.storageProof):void 0}}async function Ra(e,{address:t,blockNumber:r,blockTag:o,storageKeys:n}){let s=o??"latest",i=r!==void 0?w(r):void 0,a=await e.request({method:"eth_getProof",params:[t,n,i||s]});return Na(a)}async function Sa(e,{address:t,blockNumber:r,blockTag:o="latest",slot:n}){let s=r!==void 0?w(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,n,s||o]})}async function zt(e,{blockHash:t,blockNumber:r,blockTag:o,hash:n,index:s}){let i=o||"latest",a=r!==void 0?w(r):void 0,c=null;if(n?c=await e.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,w(s)]},{dedupe:!0}):(a||i)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,w(s)]},{dedupe:!!a})),!c)throw new Tr({blockHash:t,blockNumber:r,blockTag:i,hash:n,index:s});return(e.chain?.formatters?.transaction?.format||Jt)(c)}async function Ha(e,{hash:t,transactionReceipt:r}){let[o,n]=await Promise.all([E(e,xe,"getBlockNumber")({}),t?E(e,zt,"getTransaction")({hash:t}):void 0]),s=r?.blockNumber||n?.blockNumber;return s?o-s+1n:0n}async function Ut(e,{hash:t}){let r=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!r)throw new Br({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Bn)(r)}async function Fa(e,t){let{account:r,authorizationList:o,allowFailure:n=!0,blockNumber:s,blockTag:i,stateOverride:a}=t,c=t.contracts,{batchSize:u=t.batchSize??1024,deployless:m=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},p=(()=>{if(t.multicallAddress)return t.multicallAddress;if(m)return null;if(e.chain)return pe({blockNumber:s,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),f=[[]],d=0,y=0;for(let x=0;x<c.length;x++){let{abi:g,address:b,args:v,functionName:P}=c[x];try{let I=M({abi:g,args:v,functionName:P});y+=(I.length-2)/2,u>0&&y>u&&f[d].length>0&&(d++,y=(I.length-2)/2,f[d]=[]),f[d]=[...f[d],{allowFailure:!0,callData:I,target:b}]}catch(I){let T=ce(I,{abi:g,address:b,args:v,docsPath:"/docs/contract/multicall",functionName:P,sender:r});if(!n)throw T;f[d]=[...f[d],{allowFailure:!0,callData:"0x",target:b}]}}let l=await Promise.allSettled(f.map(x=>E(e,q,"readContract")({...p===null?{code:Jr}:{address:p},abi:Gt,account:r,args:[x],authorizationList:o,blockNumber:s,blockTag:i,functionName:"aggregate3",stateOverride:a}))),h=[];for(let x=0;x<l.length;x++){let g=l[x];if(g.status==="rejected"){if(!n)throw g.reason;for(let v=0;v<f[x].length;v++)h.push({status:"failure",error:g.reason,result:void 0});continue}let b=g.value;for(let v=0;v<b.length;v++){let{returnData:P,success:I}=b[v],{callData:T}=f[x][v],{abi:A,address:H,functionName:N,args:S}=c[h.length];try{if(T==="0x")throw new et;if(!I)throw new st({data:P});let R=ne({abi:A,args:S,data:P,functionName:N});h.push(n?{result:R,status:"success"}:R)}catch(R){let W=ce(R,{abi:A,address:H,args:S,docsPath:"/docs/contract/multicall",functionName:N});if(!n)throw W;h.push({error:W,result:void 0,status:"failure"})}}}if(h.length!==c.length)throw new B("multicall results mismatch");return h}async function ur(e,t){let{blockNumber:r,blockTag:o=e.experimental_blockTag??"latest",blocks:n,returnFullTransactions:s,traceTransfers:i,validation:a}=t;try{let c=[];for(let f of n){let d=f.blockOverrides?$s(f.blockOverrides):void 0,y=f.calls.map(h=>{let x=h,g=x.account?O(x.account):void 0,b=x.abi?M(x):x.data,v={...x,data:x.dataSuffix?ke([b||"0x",x.dataSuffix]):b,from:x.from??g?.address};return le(v),Re(v)}),l=f.stateOverrides?Xr(f.stateOverrides):void 0;c.push({blockOverrides:d,calls:y,stateOverrides:l})}let m=(typeof r=="bigint"?w(r):void 0)||o;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:i,validation:a},m]})).map((f,d)=>({...Yt(f),calls:f.calls.map((y,l)=>{let{abi:h,args:x,functionName:g,to:b}=n[d].calls[l],v=y.error?.data??y.returnData,P=BigInt(y.gasUsed),I=y.logs?.map(N=>J(N)),T=y.status==="0x1"?"success":"failure",A=h&&T==="success"&&v!=="0x"?ne({abi:h,data:v,functionName:g}):null,H=(()=>{if(T==="success")return;let N;if(y.error?.data==="0x"?N=new et:y.error&&(N=new st(y.error)),!!N)return ce(N,{abi:h??[],address:b??"0x",args:x,functionName:g??"<unknown>"})})();return{data:v,gasUsed:P,logs:I,status:T,...T==="success"?{result:A}:{error:H}}})}))}catch(c){let u=c,m=pt(u,{});throw m instanceof mt?u:m}}function tn(e){let t=!0,r="",o=0,n="",s=!1;for(let i=0;i<e.length;i++){let a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&o++,a===")"&&o--,!!t){if(o===0){if(a===" "&&["event","function","error",""].includes(n))n="";else if(n+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}n+=a,r+=a}}if(!s)throw new C("Unable to normalize signature.");return n}function en(e,t){let r=typeof e,o=t.type;switch(o){case"address":return qo(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return o==="tuple"&&"components"in t?Object.values(t.components).every((n,s)=>en(Object.values(e)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(o)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(o)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(o)?Array.isArray(e)&&e.every(n=>en(n,{...t,type:o.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function is(e,t,r){for(let o in e){let n=e[o],s=t[o];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return is(n.components,s.components,r[o]);let i=[n.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?qo(r[o],{strict:!1}):i.includes("address")&&i.includes("bytes")?qo(r[o],{strict:!1}):!1)return i}}function rn(e,t={}){let{prepare:r=!0}=t,o=Array.isArray(e)?dn(e):typeof e=="string"?dn(e):e;return{...o,...r?{hash:Lt(o)}:{}}}function za(e,t,r){let{args:o=[],prepare:n=!0}=r??{},s=Kt(t,{strict:!1}),i=e.filter(u=>s?u.type==="function"||u.type==="error"?cs(u)===U(t,0,4):u.type==="event"?Lt(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new Qe({name:t});if(i.length===1)return{...i[0],...n?{hash:Lt(i[0])}:{}};let a;for(let u of i){if(!("inputs"in u))continue;if(!o||o.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...n?{hash:Lt(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==o.length)continue;if(o.every((p,f)=>{let d="inputs"in u&&u.inputs[f];return d?en(p,d):!1})){if(a&&"inputs"in a&&a.inputs){let p=is(u.inputs,a.inputs,o);if(p)throw new as({abiItem:u,type:p[0]},{abiItem:a,type:p[1]})}a=u}}let c=(()=>{if(a)return a;let[u,...m]=i;return{...u,overloads:m}})();if(!c)throw new Qe({name:t});return{...c,...n?{hash:Lt(c)}:{}}}function cs(e){return U(Lt(e),0,4)}function Nu(e){let t=typeof e=="string"?e:Pr(e);return tn(t)}function Lt(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Ze(ft(Nu(e)))}var as=class extends C{constructor(t,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${tn(Pr(t.abiItem))}\`, and`,`\`${r.type}\` in \`${tn(Pr(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},Qe=class extends C{constructor({name:t,data:r,type:o="item"}){let n=t?` with name "${t}"`:r?` with data "${r}"`:"";super(`ABI ${o}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};function La(e,t){let{bytecode:r,args:o}=t;return D(r,e.inputs?.length&&o?.length?_e(e.inputs,o):"0x")}function Da(e){return rn(e)}function _a(e,...t){let{overloads:r}=e,o=r?Su([e,...r],e.name,{args:t[0]}):e,n=Hu(o),s=t.length>0?_e(o.inputs,t[0]):void 0;return s?D(n,s):n}function Xe(e,t={}){return rn(e,t)}function Su(e,t,r){let o=za(e,t,r);if(o.type!=="function")throw new Qe({name:t,type:"function"});return o}function Hu(e){return cs(e)}var Ma="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ue="0x0000000000000000000000000000000000000000";var zu="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Ga(e,t){let{blockNumber:r,blockTag:o,calls:n,stateOverrides:s,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?O(t.account):void 0;if(i&&!u)throw new B("`account` is required when `traceAssetChanges` is true");let m=u?La(Da("constructor(bytes, bytes)"),{bytecode:Os,args:[zu,_a(Xe("function getBalance(address)"),[u.address])]}):void 0,p=i?await Promise.all(t.calls.map(async k=>{if(!k.data&&!k.abi)return;let{accessList:Q}=await Ro(e,{account:u.address,...k,data:k.abi?M(k):k.data});return Q.map(({address:Mt,storageKeys:mr})=>mr.length>0?Mt:null)})).then(k=>k.flat().filter(Boolean)):[],f=await ur(e,{blockNumber:r,blockTag:o,blocks:[...i?[{calls:[{data:m}],stateOverrides:s},{calls:p.map((k,Q)=>({abi:[Xe("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:ue,nonce:Q})),stateOverrides:[{address:ue,nonce:0}]}]:[],{calls:[...n,{}].map(k=>({...k,from:u?.address})),stateOverrides:s},...i?[{calls:[{data:m}]},{calls:p.map((k,Q)=>({abi:[Xe("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:ue,nonce:Q})),stateOverrides:[{address:ue,nonce:0}]},{calls:p.map((k,Q)=>({to:k,abi:[Xe("function decimals() returns (uint256)")],functionName:"decimals",from:ue,nonce:Q})),stateOverrides:[{address:ue,nonce:0}]},{calls:p.map((k,Q)=>({to:k,abi:[Xe("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ue,nonce:Q})),stateOverrides:[{address:ue,nonce:0}]},{calls:p.map((k,Q)=>({to:k,abi:[Xe("function symbol() returns (string)")],functionName:"symbol",from:ue,nonce:Q})),stateOverrides:[{address:ue,nonce:0}]}]:[]],traceTransfers:a,validation:c}),d=i?f[2]:f[0],[y,l,,h,x,g,b,v]=i?f:[],{calls:P,...I}=d,T=P.slice(0,-1)??[],A=y?.calls??[],H=l?.calls??[],N=[...A,...H].map(k=>k.status==="success"?j(k.data):null),S=h?.calls??[],R=x?.calls??[],W=[...S,...R].map(k=>k.status==="success"?j(k.data):null),oe=(g?.calls??[]).map(k=>k.status==="success"?k.result:null),be=(v?.calls??[]).map(k=>k.status==="success"?k.result:null),Be=(b?.calls??[]).map(k=>k.status==="success"?k.result:null),_t=[];for(let[k,Q]of W.entries()){let Mt=N[k];if(typeof Q!="bigint"||typeof Mt!="bigint")continue;let mr=oe[k-1],rc=be[k-1],oc=Be[k-1],ms=k===0?{address:Ma,decimals:18,symbol:"ETH"}:{address:p[k-1],decimals:oc||mr?Number(mr??1):void 0,symbol:rc??void 0};_t.some(nc=>nc.token.address===ms.address)||_t.push({token:ms,value:{pre:Mt,post:Q,diff:Q-Mt}})}return{assetChanges:_t,block:I,results:T}}var fr={};ps(fr,{InvalidWrappedSignatureError:()=>on,assert:()=>fs,from:()=>Du,magicBytes:()=>us,universalSignatureValidatorAbi:()=>Lu,universalSignatureValidatorBytecode:()=>Uu,unwrap:()=>qa,validate:()=>Mu,wrap:()=>_u});var us="0x6492649264926492649264926492649264926492649264926492649264926492",Uu="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Lu=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function fs(e){if(U(e,-32)!==us)throw new on(e)}function Du(e){return typeof e=="string"?qa(e):e}function qa(e){fs(e);let[t,r,o]=Ft(sr("address, bytes, bytes"),e);return{data:r,signature:o,to:t}}function _u(e){let{data:t,signature:r,to:o}=e;return D(_e(sr("address, bytes, bytes"),[o,t,r]),us)}function Mu(e){try{return fs(e),!0}catch{return!1}}var on=class extends C{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}};function $a({r:e,s:t,to:r="hex",v:o,yParity:n}){let s=(()=>{if(n===0||n===1)return n;if(o&&(o===27n||o===28n||o>=35n))return o%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new ht.Signature(j(e),j(t)).toCompactHex()}${s===0?"1b":"1c"}`;return r==="hex"?i:K(i)}async function Me(e,t){let{address:r,hash:o,erc6492VerifierAddress:n=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:s=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,i=(()=>{let a=t.signature;return fe(a)?a:typeof a=="object"&&"r"in a&&"s"in a?$a(a):L(a)})();try{return cr.validate(i)?await Gu(e,{...t,multicallAddress:s,signature:i}):await qu(e,{...t,verifierAddress:n,signature:i})}catch(a){try{if(Pe(ot(r),await io({hash:o,signature:i})))return!0}catch{}if(a instanceof Te)return!1;throw a}}async function Gu(e,t){let{address:r,blockNumber:o,blockTag:n,hash:s,multicallAddress:i}=t,{authorization:a,data:c,signature:u,to:m}=cr.unwrap(t.signature);if(await Xt(e,{address:r,blockNumber:o,blockTag:n})===re(["0xef0100",a.address]))return await $u(e,{address:r,blockNumber:o,blockTag:n,hash:s,signature:u});let f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:w(a.r,{size:32}),s:w(a.s,{size:32}),yParity:a.yParity};if(!await na({address:r,authorization:f}))throw new Te;let y=await E(e,q,"readContract")({...i?{address:i}:{code:Jr},authorizationList:[f],abi:Gt,blockNumber:o,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:m??r,callData:c}]:[],{allowFailure:!0,target:r,callData:M({abi:un,functionName:"isValidSignature",args:[s,u]})}]]});if(y[y.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new Te}async function qu(e,t){let{address:r,factory:o,factoryData:n,hash:s,signature:i,verifierAddress:a,...c}=t,u=await(async()=>!o&&!n||fr.validate(i)?i:fr.wrap({data:n,signature:i,to:o}))(),m=a?{to:a,data:M({abi:qt,functionName:"isValidSig",args:[r,s,u]}),...c}:{data:Vs({abi:qt,args:[r,s,u],bytecode:js}),...c},{data:p}=await E(e,Se,"call")(m).catch(f=>{throw f instanceof Rs?new Te:f});if(xr(p??"0x0"))return!0;throw new Te}async function $u(e,t){let{address:r,blockNumber:o,blockTag:n,hash:s,signature:i}=t;if((await E(e,q,"readContract")({address:r,abi:un,args:[s,i],blockNumber:o,blockTag:n,functionName:"isValidSignature"}).catch(c=>{throw c instanceof Ar?new Te:c})).startsWith("0x1626ba7e"))return!0;throw new Te}var Te=class extends Error{};async function Oa(e,{address:t,message:r,factory:o,factoryData:n,signature:s,...i}){let a=Zt(r);return Me(e,{address:t,factory:o,factoryData:n,hash:a,signature:s,...i})}async function ja(e,t){let{address:r,factory:o,factoryData:n,signature:s,message:i,primaryType:a,types:c,domain:u,...m}=t,p=bn({message:i,primaryType:a,types:c,domain:u});return Me(e,{address:r,factory:o,factoryData:n,hash:p,signature:s,...m})}function nn(e,{emitOnBegin:t=!1,emitMissed:r=!1,onBlockNumber:o,onError:n,poll:s,pollingInterval:i=e.pollingInterval}){let a=typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),c;return a?(()=>{let p=z(["watchBlockNumber",e.uid,t,r,i]);return Y(p,{onBlockNumber:o,onError:n},f=>se(async()=>{try{let d=await E(e,xe,"getBlockNumber")({cacheTime:0});if(c){if(d===c)return;if(d-c>1&&r)for(let y=c+1n;y<d;y++)f.onBlockNumber(y,c),c=y}(!c||d>c)&&(f.onBlockNumber(d,c),c=d)}catch(d){f.onError?.(d)}},{emitOnBegin:t,interval:i}))})():(()=>{let p=z(["watchBlockNumber",e.uid,t,r]);return Y(p,{onBlockNumber:o,onError:n},f=>{let d=!0,y=()=>d=!1;return(async()=>{try{let l=(()=>{if(e.transport.type==="fallback"){let x=e.transport.transports.find(g=>g.config.type==="webSocket"||g.config.type==="ipc");return x?x.value:e.transport}return e.transport})(),{unsubscribe:h}=await l.subscribe({params:["newHeads"],onData(x){if(!d)return;let g=j(x.result?.number);f.onBlockNumber(g,c),c=g},onError(x){f.onError?.(x)}});y=h,d||y()}catch(l){n?.(l)}})(),()=>y()})})()}async function Va(e,t){let{checkReplacement:r=!0,confirmations:o=1,hash:n,onReplaced:s,retryCount:i=6,retryDelay:a=({count:P})=>~~(1<<P)*200,timeout:c=18e4}=t,u=z(["waitForTransactionReceipt",e.uid,n]),m=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval,p,f,d,y=!1,l,h,{promise:x,resolve:g,reject:b}=Qr(),v=c?setTimeout(()=>{h?.(),l?.(),b(new Ns({hash:n}))},c):void 0;return l=Y(u,{onReplaced:s,resolve:g,reject:b},async P=>{if(d=await E(e,Ut,"getTransactionReceipt")({hash:n}).catch(()=>{}),d&&o<=1){clearTimeout(v),P.resolve(d),l?.();return}h=E(e,nn,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:m,async onBlockNumber(I){let T=H=>{clearTimeout(v),h?.(),H(),l?.()},A=I;if(!y)try{if(d){if(o>1&&(!d.blockNumber||A-d.blockNumber+1n<o))return;T(()=>P.resolve(d));return}if(r&&!p&&(y=!0,await Le(async()=>{p=await E(e,zt,"getTransaction")({hash:n}),p.blockNumber&&(A=p.blockNumber)},{delay:a,retryCount:i}),y=!1),d=await E(e,Ut,"getTransactionReceipt")({hash:n}),o>1&&(!d.blockNumber||A-d.blockNumber+1n<o))return;T(()=>P.resolve(d))}catch(H){if(H instanceof Tr||H instanceof Br){if(!p){y=!1;return}try{f=p,y=!0;let N=await Le(()=>E(e,Z,"getBlock")({blockNumber:A,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:W})=>W instanceof yt});y=!1;let S=N.transactions.find(({from:W,nonce:oe})=>W===f.from&&oe===f.nonce);if(!S||(d=await E(e,Ut,"getTransactionReceipt")({hash:S.hash}),o>1&&(!d.blockNumber||A-d.blockNumber+1n<o)))return;let R="replaced";S.to===f.to&&S.value===f.value&&S.input===f.input?R="repriced":S.from===S.to&&S.value===0n&&(R="cancelled"),T(()=>{P.onReplaced?.({reason:R,replacedTransaction:f,transaction:S,transactionReceipt:d}),P.resolve(d)})}catch(N){T(()=>P.reject(N))}}else T(()=>P.reject(H))}}})}),x}function Wa(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:r=!1,emitOnBegin:o=!1,onBlock:n,onError:s,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){let u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),m=i??!1,p;return u?(()=>{let y=z(["watchBlocks",e.uid,t,r,o,m,c]);return Y(y,{onBlock:n,onError:s},l=>se(async()=>{try{let h=await E(e,Z,"getBlock")({blockTag:t,includeTransactions:m});if(h.number!==null&&p?.number!=null){if(h.number===p.number)return;if(h.number-p.number>1&&r)for(let x=p?.number+1n;x<h.number;x++){let g=await E(e,Z,"getBlock")({blockNumber:x,includeTransactions:m});l.onBlock(g,p),p=g}}(p?.number==null||t==="pending"&&h?.number==null||h.number!==null&&h.number>p.number)&&(l.onBlock(h,p),p=h)}catch(h){l.onError?.(h)}},{emitOnBegin:o,interval:c}))})():(()=>{let y=!0,l=!0,h=()=>y=!1;return(async()=>{try{o&&E(e,Z,"getBlock")({blockTag:t,includeTransactions:m}).then(b=>{y&&l&&(n(b,void 0),l=!1)}).catch(s);let x=(()=>{if(e.transport.type==="fallback"){let b=e.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return b?b.value:e.transport}return e.transport})(),{unsubscribe:g}=await x.subscribe({params:["newHeads"],async onData(b){if(!y)return;let v=await E(e,Z,"getBlock")({blockNumber:b.result?.number,includeTransactions:m}).catch(()=>{});y&&(n(v,p),l=!1,p=v)},onError(b){s?.(b)}});h=g,y||h()}catch(x){s?.(x)}})(),()=>h()})()}function Ka(e,{address:t,args:r,batch:o=!0,event:n,events:s,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:m=e.pollingInterval,strict:p}){let f=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=p??!1;return f?(()=>{let h=z(["watchEvent",t,r,o,e.uid,n,m,i]);return Y(h,{onLogs:c,onError:a},x=>{let g;i!==void 0&&(g=i-1n);let b,v=!1,P=se(async()=>{if(!v){try{b=await E(e,So,"createEventFilter")({address:t,args:r,event:n,events:s,strict:d,fromBlock:i})}catch{}v=!0;return}try{let I;if(b)I=await E(e,ze,"getFilterChanges")({filter:b});else{let T=await E(e,xe,"getBlockNumber")({});g&&g!==T?I=await E(e,At,"getLogs")({address:t,args:r,event:n,events:s,fromBlock:g+1n,toBlock:T}):I=[],g=T}if(I.length===0)return;if(o)x.onLogs(I);else for(let T of I)x.onLogs([T])}catch(I){b&&I instanceof Ne&&(v=!1),x.onError?.(I)}},{emitOnBegin:!0,interval:m});return async()=>{b&&await E(e,Ue,"uninstallFilter")({filter:b}),P()}})})():(()=>{let h=!0,x=()=>h=!1;return(async()=>{try{let g=(()=>{if(e.transport.type==="fallback"){let I=e.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return I?I.value:e.transport}return e.transport})(),b=s??(n?[n]:void 0),v=[];b&&(v=[b.flatMap(T=>he({abi:[T],eventName:T.name,args:r}))],n&&(v=v[0]));let{unsubscribe:P}=await g.subscribe({params:["logs",{address:t,topics:v}],onData(I){if(!h)return;let T=I.result;try{let{eventName:A,args:H}=We({abi:b??[],data:T.data,topics:T.topics,strict:d}),N=J(T,{args:H,eventName:A});c([N])}catch(A){let H,N;if(A instanceof ge||A instanceof Ae){if(p)return;H=A.abiItem.name,N=A.abiItem.inputs?.some(R=>!("name"in R&&R.name))}let S=J(T,{args:N?[]:{},eventName:H});c([S])}},onError(I){a?.(I)}});x=P,h||x()}catch(g){a?.(g)}})(),()=>x()})()}function Za(e,{batch:t=!0,onError:r,onTransactions:o,poll:n,pollingInterval:s=e.pollingInterval}){return(typeof n<"u"?n:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{let u=z(["watchPendingTransactions",e.uid,t,s]);return Y(u,{onTransactions:o,onError:r},m=>{let p,f=se(async()=>{try{if(!p)try{p=await E(e,Ho,"createPendingTransactionFilter")({});return}catch(y){throw f(),y}let d=await E(e,ze,"getFilterChanges")({filter:p});if(d.length===0)return;if(t)m.onTransactions(d);else for(let y of d)m.onTransactions([y])}catch(d){m.onError?.(d)}},{emitOnBegin:!0,interval:s});return async()=>{p&&await E(e,Ue,"uninstallFilter")({filter:p}),f()}})})():(()=>{let u=!0,m=()=>u=!1;return(async()=>{try{let{unsubscribe:p}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;let d=f.result;o([d])},onError(f){r?.(f)}});m=p,u||m()}catch(p){r?.(p)}})(),()=>m()})()}function Ja(e){let{scheme:t,statement:r,...o}=e.match(Ou)?.groups??{},{chainId:n,expirationTime:s,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(ju)?.groups??{},m=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...u,...n?{chainId:Number(n)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...m?{resources:m}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}var Ou=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,ju=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Ya(e){let{address:t,domain:r,message:o,nonce:n,scheme:s,time:i=new Date}=e;if(r&&o.domain!==r||n&&o.nonce!==n||s&&o.scheme!==s||o.expirationTime&&i>=o.expirationTime||o.notBefore&&i<o.notBefore)return!1;try{if(!o.address||!te(o.address,{strict:!1})||t&&!Pe(o.address,t))return!1}catch{return!1}return!0}async function Qa(e,t){let{address:r,domain:o,message:n,nonce:s,scheme:i,signature:a,time:c=new Date,...u}=t,m=Ja(n);if(!m.address||!Ya({address:r,domain:o,message:m,nonce:s,scheme:i,time:c}))return!1;let f=Zt(n);return Me(e,{address:m.address,hash:f,signature:a,...u})}function Xa(e){return{call:t=>Se(e,t),createAccessList:t=>Ro(e,t),createBlockFilter:()=>ji(e),createContractEventFilter:t=>so(e,t),createEventFilter:t=>So(e,t),createPendingTransactionFilter:()=>Ho(e),estimateContractGas:t=>Pi(e,t),estimateGas:t=>Tt(e,t),getBalance:t=>bo(e,t),getBlobBaseFee:()=>Vi(e),getBlock:t=>Z(e,t),getBlockNumber:t=>xe(e,t),getBlockTransactionCount:t=>Wi(e,t),getBytecode:t=>Xt(e,t),getChainId:()=>Pt(e),getCode:t=>Xt(e,t),getContractEvents:t=>go(e,t),getEip712Domain:t=>Ki(e,t),getEnsAddress:t=>Ui(e,t),getEnsAvatar:t=>qi(e,t),getEnsName:t=>$i(e,t),getEnsResolver:t=>Oi(e,t),getEnsText:t=>No(e,t),getFeeHistory:t=>Ji(e,t),estimateFeesPerGas:t=>yi(e,t),getFilterChanges:t=>ze(e,t),getFilterLogs:t=>Yi(e,t),getGasPrice:()=>bt(e),getLogs:t=>At(e,t),getProof:t=>Ra(e,t),estimateMaxPriorityFeePerGas:t=>xi(e,t),getStorageAt:t=>Sa(e,t),getTransaction:t=>zt(e,t),getTransactionConfirmations:t=>Ha(e,t),getTransactionCount:t=>gt(e,t),getTransactionReceipt:t=>Ut(e,t),multicall:t=>Fa(e,t),prepareTransactionRequest:t=>It(e,t),readContract:t=>q(e,t),sendRawTransaction:t=>Eo(e,t),simulate:t=>ur(e,t),simulateBlocks:t=>ur(e,t),simulateCalls:t=>Ga(e,t),simulateContract:t=>Ii(e,t),verifyHash:t=>Me(e,t),verifyMessage:t=>Oa(e,t),verifySiweMessage:t=>Qa(e,t),verifyTypedData:t=>ja(e,t),uninstallFilter:t=>Ue(e,t),waitForTransactionReceipt:t=>Va(e,t),watchBlocks:t=>Wa(e,t),watchBlockNumber:t=>nn(e,t),watchContractEvent:t=>ki(e,t),watchEvent:t=>Ka(e,t),watchPendingTransactions:t=>Za(e,t)}}function Vu(e){let{key:t="public",name:r="Public Client"}=e;return kn({...e,key:t,name:r,type:"publicClient"}).extend(Xa)}function Dt({key:e,methods:t,name:r,request:o,retryCount:n=3,retryDelay:s=150,timeout:i,type:a},c){let u=To();return{config:{key:e,methods:t,name:r,request:o,retryCount:n,retryDelay:s,timeout:i,type:a},request:ia(o,{methods:t,retryCount:n,retryDelay:s,uid:u}),value:c}}function Wu(e,t={}){let{key:r="custom",methods:o,name:n="Custom Provider",retryDelay:s}=t;return({retryCount:i})=>Dt({key:r,methods:o,name:n,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:s,type:"custom"})}function Ku(e,t={}){let{key:r="fallback",name:o="Fallback",rank:n=!1,shouldThrow:s=ec,retryCount:i,retryDelay:a}=t;return({chain:c,pollingInterval:u=4e3,timeout:m,...p})=>{let f=e,d=()=>{},y=Dt({key:r,name:o,async request({method:l,params:h}){let x,g=async(b=0)=>{let v=f[b]({...p,chain:c,retryCount:0,timeout:m});try{let P=await v.request({method:l,params:h});return d({method:l,params:h,response:P,transport:v,status:"success"}),P}catch(P){if(d({error:P,method:l,params:h,transport:v,status:"error"}),s(P)||b===f.length-1||(x??=f.slice(b+1).some(I=>{let{include:T,exclude:A}=I({chain:c}).config.methods||{};return T?T.includes(l):A?!A.includes(l):!0}),!x))throw P;return g(b+1)}};return g()},retryCount:i,retryDelay:a,type:"fallback"},{onResponse:l=>d=l,transports:f.map(l=>l({chain:c,retryCount:0}))});if(n){let l=typeof n=="object"?n:{};Zu({chain:c,interval:l.interval??u,onTransports:h=>f=h,ping:l.ping,sampleCount:l.sampleCount,timeout:l.timeout,transports:f,weights:l.weights})}return y}}function ec(e){return!!("code"in e&&typeof e.code=="number"&&(e.code===at.code||e.code===Oe.code||Ws.nodeMessage.test(e.message)||e.code===5e3))}function Zu({chain:e,interval:t=4e3,onTransports:r,ping:o,sampleCount:n=10,timeout:s=1e3,transports:i,weights:a={}}){let{stability:c=.7,latency:u=.3}=a,m=[],p=async()=>{let f=await Promise.all(i.map(async l=>{let h=l({chain:e,retryCount:0,timeout:s}),x=Date.now(),g,b;try{await(o?o({transport:h}):h.request({method:"net_listening"})),b=1}catch{b=0}finally{g=Date.now()}return{latency:g-x,success:b}}));m.push(f),m.length>n&&m.shift();let d=Math.max(...m.map(l=>Math.max(...l.map(({latency:h})=>h)))),y=i.map((l,h)=>{let x=m.map(I=>I[h].latency),b=1-x.reduce((I,T)=>I+T,0)/x.length/d,v=m.map(I=>I[h].success),P=v.reduce((I,T)=>I+T,0)/v.length;return P===0?[0,h]:[u*b+c*P,h]}).sort((l,h)=>h[0]-l[0]);r(y.map(([,l])=>i[l])),await Ke(t),p()};p()}var sn=class extends B{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};function Ju(e,t={}){let{batch:r,fetchFn:o,fetchOptions:n,key:s="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:m,raw:p}=t;return({chain:f,retryCount:d,timeout:y})=>{let{batchSize:l=1e3,wait:h=0}=typeof r=="object"?r:{},x=t.retryCount??d,g=y??t.timeout??1e4,b=e||f?.rpcUrls.default.http[0];if(!b)throw new sn;let v=aa(b,{fetchFn:o,fetchOptions:n,onRequest:c,onResponse:u,timeout:g});return Dt({key:s,methods:i,name:a,async request({method:P,params:I}){let T={method:P,params:I},{schedule:A}=Js({id:b,wait:h,shouldSplitBatch(R){return R.length>l},fn:R=>v.request({body:R}),sort:(R,W)=>R.id-W.id}),H=async R=>r?A(R):[await v.request({body:R})],[{error:N,result:S}]=await H(T);if(p)return{error:N,result:S};if(N)throw new kr({body:T,error:N,url:b});return S},retryCount:x,retryDelay:m,timeout:g,type:"http"},{fetchOptions:n,url:b})}}function tc(e){let{r:t,s:r}=ht.Signature.fromCompact(e.slice(2,130)),o=+`0x${e.slice(130)}`,[n,s]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof n<"u"?{r:w(t,{size:32}),s:w(r,{size:32}),v:n,yParity:s}:{r:w(t,{size:32}),s:w(r,{size:32}),yParity:s}}export{E as a,ce as b,q as c,$i as d,Ie as e,Jt as f,Gm as g,jm as h,yi as i,gt as j,Pt as k,Xt as l,We as m,J as n,Ac as o,er as p,by as q,St as r,Le as s,Fc as t,Bn as u,h0 as v,zc as w,Rn as x,Zt as y,bn as z,Qg as A,Pu as B,Y as C,se as D,wo as E,s0 as F,F0 as G,kn as H,Vu as I,Wu as J,Ku as K,Ju as L,tc as M};
