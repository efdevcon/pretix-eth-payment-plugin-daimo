import{$ as vr,$a as _r,$b as Xr,A as xr,Aa as Ss,Ab as G,B as _,Ba as Hs,Bb as mt,Ca as Ar,Cb as je,D as $,Da as Ot,Db as Ve,E as yr,Ea as Fs,Eb as U,F as L,Fa as it,Fb as W,G as w,Gb as yn,H as we,Ha as at,Hb as $s,I as Ee,Ia as qe,Ib as Kt,J as K,Ja as kr,Jb as Os,K as ve,Ka as hn,Kb as js,L as ws,La as Cr,Lb as Vs,M as F,Ma as Nr,Mb as Ws,N as ot,Na as Rr,Nb as Jr,O as re,Oa as Sr,Ob as Ks,P as mn,Pa as $e,Pb as Zs,Q as nt,Qa as Ne,Qb as Yr,R as Es,Ra as Hr,Rb as Js,S as br,Sa as Fr,Sb as pt,T as pn,Ta as ct,Tb as dt,U as gr,Ua as ut,Ub as Ys,V as ke,Va as jt,Vb as lt,W as oe,Wa as zr,Wb as ht,X as vs,Xa as Oe,Xb as Re,Y as wr,Ya as Ur,Z as Er,Za as Lr,Zb as Qr,_ as Ce,_a as Dr,_b as Qs,a as Gt,aa as Ps,ab as Mr,ac as eo,b as pr,ba as Pr,bb as Gr,bc as le,c as hs,cb as qr,cc as Pe,d as an,da as dn,db as $r,e as cn,ea as ln,eb as Or,f as un,fa as st,fb as jr,g as qt,ga as Ir,gb as Vr,ha as ne,hb as Wr,hc as Se,i as dr,ia as M,ib as xn,j as fe,ja as Is,jb as C,k as te,ka as Ts,kb as Kr,l as B,la as $t,lb as zs,m as xs,ma as pe,mb as Vt,n as tt,na as O,nb as Us,o as ys,ob as Wt,p as bs,pa as z,pb as Ls,q as lr,qb as Ds,r as fn,ra as Bs,rb as _s,s as hr,sa as Ge,sb as de,t as ge,ta as As,tb as Ms,u as Ae,ua as ks,ub as Gs,v as gs,va as Cs,vb as qs,w as ce,wa as Ns,wb as D,x as rt,xa as Rs,xb as ft,y as me,ya as Tr,yb as Zr,z as V,za as Br,zb as ee}from"./pretix-eth-5-chunk-ZCL5HT24.js";import{a as Xs,b as xt}from"./pretix-eth-5-chunk-ERWRNXFQ.js";import{d as ls}from"./pretix-eth-5-chunk-BIK4PATU.js";var to=class extends B{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};function bn(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:o}){return new Promise((n,s)=>{(async()=>{let i;try{let a=new AbortController;r>0&&(i=setTimeout(()=>{o?a.abort():s(t)},r)),n(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(t),s(a)}finally{clearTimeout(i)}})()})}function sc(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var gn=sc();function ei(e,t={}){return{async request(r){let{body:o,fetchFn:n=t.fetchFn??fetch,onRequest:s=t.onRequest,onResponse:i=t.onResponse,timeout:a=t.timeout??1e4}=r,c={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:m,signal:p}=c;try{let f=await bn(async({signal:x})=>{let l={...c,body:Array.isArray(o)?z(o.map(b=>({jsonrpc:"2.0",id:b.id??gn.take(),...b}))):z({jsonrpc:"2.0",id:o.id??gn.take(),...o}),headers:{"Content-Type":"application/json",...u},method:m||"POST",signal:p||(a>0?x:null)},h=new Request(e,l),y=await s?.(h,l)??{...l,url:e};return await n(y.url??e,y)},{errorInstance:new hn({body:o,url:e}),timeout:a,signal:!0});i&&await i(f);let d;if(f.headers.get("Content-Type")?.startsWith("application/json"))d=await f.json();else{d=await f.text();try{d=JSON.parse(d||"{}")}catch(x){if(f.ok)throw x;d={error:d}}}if(!f.ok)throw new qe({body:o,details:z(d.error)||f.statusText,headers:f.headers,status:f.status,url:e});return d}catch(f){throw f instanceof qe||f instanceof hn?f:new qe({body:o,cause:f,url:e})}}}}var ro=new ot(8192);function ti(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(ro.get(r))return ro.get(r);let o=e().finally(()=>ro.delete(r));return ro.set(r,o),o}async function We(e){return new Promise(t=>setTimeout(t,e))}function He(e,{delay:t=100,retryCount:r=2,shouldRetry:o=()=>!0}={}){return new Promise((n,s)=>{let i=async({count:a=0}={})=>{let c=async({error:u})=>{let m=typeof t=="function"?t({count:a,error:u}):t;m&&await We(m),i({count:a+1})};try{let u=await e();n(u)}catch(u){if(a<r&&await o({count:a,error:u}))return c({error:u});s(u)}};i()})}function ri(e,t={}){return async(r,o={})=>{let{dedupe:n=!1,methods:s,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...o},{method:u}=r;if(s?.exclude?.includes(u))throw new ut(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new ut(new Error("method not supported"),{method:u});let m=n?we(`${c}.${z(r)}`):void 0;return ti(()=>He(async()=>{try{return await e(r)}catch(p){let f=p;switch(f.code){case Cr.code:throw new Cr(f);case Nr.code:throw new Nr(f);case Rr.code:throw new Rr(f,{method:r.method});case Sr.code:throw new Sr(f);case $e.code:throw new $e(f);case Ne.code:throw new Ne(f);case Hr.code:throw new Hr(f);case Fr.code:throw new Fr(f);case ct.code:throw new ct(f);case ut.code:throw new ut(f,{method:r.method});case jt.code:throw new jt(f);case zr.code:throw new zr(f);case Oe.code:throw new Oe(f);case Ur.code:throw new Ur(f);case Lr.code:throw new Lr(f);case Dr.code:throw new Dr(f);case _r.code:throw new _r(f);case Mr.code:throw new Mr(f);case Gr.code:throw new Gr(f);case qr.code:throw new qr(f);case $r.code:throw new $r(f);case Or.code:throw new Or(f);case jr.code:throw new jr(f);case Vr.code:throw new Vr(f);case Wr.code:throw new Wr(f);case 5e3:throw new Oe(f);default:throw p instanceof B?p:new xn(f)}}},{delay:({count:p,error:f})=>{if(f&&f instanceof qe){let d=f?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d,10)*1e3}return~~(1<<p)*i},retryCount:a,shouldRetry:({error:p})=>ic(p)}),{enabled:n,id:m})}}function ic(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===jt.code||e.code===$e.code:e instanceof qe&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}var oo=256,no;function so(e=11){if(!no||oo+e>256*2){no="",oo=0;for(let t=0;t<256;t++)no+=(256+Math.random()*256|0).toString(16).substring(1)}return no.substring(oo,oo+++e)}function Ke({key:e,methods:t,name:r,request:o,retryCount:n=3,retryDelay:s=150,timeout:i,type:a},c){let u=so();return{config:{key:e,methods:t,name:r,request:o,retryCount:n,retryDelay:s,timeout:i,type:a},request:ri(o,{methods:t,retryCount:n,retryDelay:s,uid:u}),value:c}}function ac(e,t={}){let{batch:r,fetchFn:o,fetchOptions:n,key:s="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:m,raw:p}=t;return({chain:f,retryCount:d,timeout:x})=>{let{batchSize:l=1e3,wait:h=0}=typeof r=="object"?r:{},y=t.retryCount??d,g=x??t.timeout??1e4,b=e||f?.rpcUrls.default.http[0];if(!b)throw new to;let v=ei(b,{fetchFn:o,fetchOptions:n,onRequest:c,onResponse:u,timeout:g});return Ke({key:s,methods:i,name:a,async request({method:P,params:T}){let I={method:P,params:T},{schedule:A}=Qs({id:b,wait:h,shouldSplitBatch(R){return R.length>l},fn:R=>v.request({body:R}),sort:(R,j)=>R.id-j.id}),S=async R=>r?A(R):[await v.request({body:R})],[{error:N,result:H}]=await S(I);if(p)return{error:N,result:H};if(N)throw new kr({body:I,error:N,url:b});return H},retryCount:y,retryDelay:m,timeout:g,type:"http"},{fetchOptions:n,url:b})}}function E(e,t,r){let o=e[t.name];if(typeof o=="function")return o;let n=e[r];return typeof n=="function"?n:s=>t(e,s)}var io=class extends B{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};var oi="/docs/contract/encodeEventTopics";function he(e){let{abi:t,eventName:r,args:o}=e,n=t[0];if(r){let c=Ir({abi:t,name:r});if(!c)throw new fn(r,{docsPath:oi});n=c}if(n.type!=="event")throw new fn(void 0,{docsPath:oi});let s=dr(n),i=st(s),a=[];if(o&&"inputs"in n){let c=n.inputs?.filter(m=>"indexed"in m&&m.indexed),u=Array.isArray(o)?o:Object.values(o).length>0?c?.map(m=>o[m.name])??[]:[];u.length>0&&(a=c?.map((m,p)=>Array.isArray(u[p])?u[p].map((f,d)=>ni({param:m,value:u[p][d]})):typeof u[p]<"u"&&u[p]!==null?ni({param:m,value:u[p]}):null)??[])}return[i,...a]}function ni({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return F(Ee(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new io(e.type);return Ce([e],[t])}function Fe(e,{method:t}){let r={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:o,response:n,status:s,transport:i})=>{s==="success"&&t===o&&(r[n]=i.request)}),o=>r[o]||e.request}async function ao(e,t){let{address:r,abi:o,args:n,eventName:s,fromBlock:i,strict:a,toBlock:c}=t,u=Fe(e,{method:"eth_newFilter"}),m=s?he({abi:o,args:n,eventName:s}):void 0,p=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:typeof i=="bigint"?w(i):i,toBlock:typeof c=="bigint"?w(c):c,topics:m}]});return{abi:o,args:n,eventName:s,id:p,request:u(p),strict:!!a,type:"event"}}var cc=3;function ue(e,{abi:t,address:r,args:o,docsPath:n,functionName:s,sender:i}){let a=e instanceof it?e:e instanceof B?e.walk(x=>"data"in x)||e.walk():{},{code:c,data:u,details:m,message:p,shortMessage:f}=a,d=e instanceof tt?new Fs({functionName:s}):[cc,$e.code].includes(c)&&(u||m||p||f)?new Ot({abi:t,data:typeof u=="object"?u.data:u,functionName:s,message:a instanceof kr?m:f??p}):e;return new Ar(d,{abi:t,args:o,contractAddress:r,docsPath:n,functionName:s,sender:i})}function si(e){let t=F(`0x${e.substring(4)}`).substring(26);return mn(`0x${t}`)}async function ai({hash:e,signature:t}){let r=fe(e)?e:$(e),{secp256k1:o}=await import("./pretix-eth-5-secp256k1-VFMHQMJP.js");return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:u,s:m,v:p,yParity:f}=t,d=Number(f??p),x=ii(d);return new o.Signature(V(u),V(m)).addRecoveryBit(x)}let i=fe(t)?t:$(t);if(te(i)!==65)throw new Error("invalid signature length");let a=_(`0x${i.slice(130)}`),c=ii(a);return o.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function ii(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function co({hash:e,signature:t}){return si(await ai({hash:e,signature:t}))}function Ie(e,t="hex"){let r=ci(e),o=br(new Uint8Array(r.length));return r.encode(o),t==="hex"?L(o.bytes):o.bytes}function ci(e){return Array.isArray(e)?uc(e.map(t=>ci(t))):fc(e)}function uc(e){let t=e.reduce((n,s)=>n+s.length,0),r=ui(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),r===1?n.pushUint8(t):r===2?n.pushUint16(t):r===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:s}of e)s(n)}}}function fc(e){let t=typeof e=="string"?K(e):e,r=ui(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(183+r),r===1?n.pushUint8(t.length):r===2?n.pushUint16(t.length):r===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function ui(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new B("Length is too large.")}function fi(e){let{chainId:t,nonce:r,to:o}=e,n=e.contractAddress??e.address,s=F(oe(["0x05",Ie([t?w(t):"0x",n,r?w(r):"0x"])]));return o==="bytes"?K(s):s}async function yt(e){let{authorization:t,signature:r}=e;return co({hash:fi(t),signature:r??t})}var uo=class extends B{constructor(t,{account:r,docsPath:o,chain:n,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:m,to:p,value:f}){let d=As({from:r?.address,to:p,value:typeof f<"u"&&`${Bs(f)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${Ge(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ge(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ge(u)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}};function mi(e,{docsPath:t,...r}){let o=(()=>{let n=dt(e,r);return n instanceof pt?e:n})();return new uo(o,{docsPath:t,...r})}var fo=class extends B{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},ze=class extends B{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},mo=class extends B{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ge(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};var bt=class extends B{constructor({blockHash:t,blockNumber:r}){let o="Block";t&&(o=`Block at hash "${t}"`),r&&(o=`Block at number "${r}"`),super(`${o} could not be found.`,{name:"BlockNotFoundError"})}};var wn={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Zt(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?_(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?_(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?wn[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=mc(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}var Mm=ht("transaction",Zt);function mc(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Jt(e){let t=(e.transactions??[]).map(r=>typeof r=="string"?r:Zt(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}var Om=ht("block",Jt);async function Z(e,{blockHash:t,blockNumber:r,blockTag:o=e.experimental_blockTag??"latest",includeTransactions:n}={}){let s=n??!1,i=r!==void 0?w(r):void 0,a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||o,s]},{dedupe:!!i}),!a)throw new bt({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||Jt)(a)}async function gt(e){let t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function pi(e,t){return En(e,t)}async function En(e,t){let{block:r,chain:o=e.chain,request:n}=t||{};try{let s=o?.fees?.maxPriorityFeePerGas??o?.fees?.defaultPriorityFee;if(typeof s=="function"){let a=r||await E(e,Z,"getBlock")({}),c=await s({block:a,client:e,request:n});if(c===null)throw new Error;return c}if(typeof s<"u")return s;let i=await e.request({method:"eth_maxPriorityFeePerGas"});return V(i)}catch{let[s,i]=await Promise.all([r?Promise.resolve(r):E(e,Z,"getBlock")({}),E(e,gt,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new ze;let a=i-s.baseFeePerGas;return a<0n?0n:a}}async function di(e,t){return po(e,t)}async function po(e,t){let{block:r,chain:o=e.chain,request:n,type:s="eip1559"}=t||{},i=await(async()=>typeof o?.fees?.baseFeeMultiplier=="function"?o.fees.baseFeeMultiplier({block:r,client:e,request:n}):o?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new fo;let c=10**(i.toString().split(".")[1]?.length??0),u=f=>f*BigInt(Math.ceil(i*c))/BigInt(c),m=r||await E(e,Z,"getBlock")({});if(typeof o?.fees?.estimateFeesPerGas=="function"){let f=await o.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:n,type:s});if(f!==null)return f}if(s==="eip1559"){if(typeof m.baseFeePerGas!="bigint")throw new ze;let f=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await En(e,{block:m,chain:o,request:n}),d=u(m.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??d+f,maxPriorityFeePerGas:f}}return{gasPrice:n?.gasPrice??u(await E(e,gt,"getGasPrice")({}))}}async function wt(e,{address:t,blockTag:r="latest",blockNumber:o}){let n=await e.request({method:"eth_getTransactionCount",params:[t,typeof o=="bigint"?w(o):r]},{dedupe:!!o});return _(n)}function Et(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),o=typeof e.blobs[0]=="string"?e.blobs.map(s=>K(s)):e.blobs,n=[];for(let s of o)n.push(Uint8Array.from(t.blobToKzgCommitment(s)));return r==="bytes"?n:n.map(s=>L(s))}function vt(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),o=typeof e.blobs[0]=="string"?e.blobs.map(i=>K(i)):e.blobs,n=typeof e.commitments[0]=="string"?e.commitments.map(i=>K(i)):e.commitments,s=[];for(let i=0;i<o.length;i++){let a=o[i],c=n[i];s.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(i=>L(i))}var li=Xs;function hi(e,t){let r=t||"hex",o=li(fe(e,{strict:!1})?Ee(e):e);return r==="bytes"?o:$(o)}function xi(e){let{commitment:t,version:r=1}=e,o=e.to??(typeof t=="string"?"hex":"bytes"),n=hi(t,"bytes");return n.set([r],0),o==="bytes"?n:L(n)}function lo(e){let{commitments:t,version:r}=e,o=e.to??(typeof t[0]=="string"?"hex":"bytes"),n=[];for(let s of t)n.push(xi({commitment:s,to:o,version:r}));return n}var ho=class extends B{constructor({maxSize:t,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}},Pt=class extends B{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},xo=class extends B{constructor({hash:t,size:r}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}},yo=class extends B{constructor({hash:t,version:r}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}};function yi(e){let t=e.to??(typeof e.data=="string"?"hex":"bytes"),r=typeof e.data=="string"?K(e.data):e.data,o=te(r);if(!o)throw new Pt;if(o>761855)throw new ho({maxSize:761855,size:o});let n=[],s=!0,i=0;for(;s;){let a=br(new Uint8Array(131072)),c=0;for(;c<4096;){let u=r.slice(i,i+31);if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),s=!1;break}c++,i+=31}n.push(a)}return t==="bytes"?n.map(a=>a.bytes):n.map(a=>L(a.bytes))}function bo(e){let{data:t,kzg:r,to:o}=e,n=e.blobs??yi({data:t,to:o}),s=e.commitments??Et({blobs:n,kzg:r,to:o}),i=e.proofs??vt({blobs:n,commitments:s,kzg:r,to:o}),a=[];for(let c=0;c<n.length;c++)a.push({blob:n[c],commitment:s[c],proof:i[c]});return a}function go(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Cs({transaction:e})}async function It(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return _(t)}var vn=["blobVersionedHashes","chainId","fees","gas","nonce","type"],bi=new Map;async function Tt(e,t){let{account:r=e.account,blobs:o,chain:n,gas:s,kzg:i,nonce:a,nonceManager:c,parameters:u=vn,type:m}=t,p=r&&O(r),f={...t,...p?{from:p?.address}:{}},d;async function x(){return d||(d=await E(e,Z,"getBlock")({blockTag:"latest"}),d)}let l;async function h(){return l||(n?n.id:typeof t.chainId<"u"?t.chainId:(l=await E(e,It,"getChainId")({}),l))}if(u.includes("nonce")&&typeof a>"u"&&p)if(c){let y=await h();f.nonce=await c.consume({address:p.address,chainId:y,client:e})}else f.nonce=await E(e,wt,"getTransactionCount")({address:p.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&o&&i){let y=Et({blobs:o,kzg:i});if(u.includes("blobVersionedHashes")){let g=lo({commitments:y,to:"hex"});f.blobVersionedHashes=g}if(u.includes("sidecars")){let g=vt({blobs:o,commitments:y,kzg:i}),b=bo({blobs:o,commitments:y,proofs:g,to:"hex"});f.sidecars=b}}if(u.includes("chainId")&&(f.chainId=await h()),(u.includes("fees")||u.includes("type"))&&typeof m>"u")try{f.type=go(f)}catch{let y=bi.get(e.uid);typeof y>"u"&&(y=typeof(await x())?.baseFeePerGas=="bigint",bi.set(e.uid,y)),f.type=y?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){let y=await x(),{maxFeePerGas:g,maxPriorityFeePerGas:b}=await po(e,{block:y,chain:n,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<b)throw new mo({maxPriorityFeePerGas:b});f.maxPriorityFeePerGas=b,f.maxFeePerGas=g}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new ze;if(typeof t.gasPrice>"u"){let y=await x(),{gasPrice:g}=await po(e,{block:y,chain:n,request:f,type:"legacy"});f.gasPrice=g}}return u.includes("gas")&&typeof s>"u"&&(f.gas=await E(e,Bt,"estimateGas")({...f,account:p&&{address:p.address,type:"json-rpc"}})),le(f),delete f.parameters,f}async function wo(e,{address:t,blockNumber:r,blockTag:o=e.experimental_blockTag??"latest"}){let n=typeof r=="bigint"?w(r):void 0,s=await e.request({method:"eth_getBalance",params:[t,n||o]});return BigInt(s)}async function Bt(e,t){let{account:r=e.account}=t,o=r?O(r):void 0;try{let H=function(j){let{block:Q,request:be,rpcStateOverride:Be}=j;return e.request({method:"eth_estimateGas",params:Be?[be,Q??e.experimental_blockTag??"latest",Be]:Q?[be,Q]:[be]})},{accessList:n,authorizationList:s,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:m,gas:p,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:x,maxPriorityFeePerGas:l,nonce:h,value:y,stateOverride:g,...b}=await Tt(e,{...t,parameters:o?.type==="local"?void 0:["blobVersionedHashes"]}),P=(typeof c=="bigint"?w(c):void 0)||u,T=Xr(g),I=await(async()=>{if(b.to)return b.to;if(s&&s.length>0)return await yt({authorization:s[0]}).catch(()=>{throw new B("`to` is required. Could not infer from `authorizationList`")})})();le(t);let A=e.chain?.formatters?.transactionRequest?.format,N=(A||Re)({...lt(b,{format:A}),from:o?.address,accessList:n,authorizationList:s,blobs:i,blobVersionedHashes:a,data:m,gas:p,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:x,maxPriorityFeePerGas:l,nonce:h,to:I,value:y}),R=BigInt(await H({block:P,request:N,rpcStateOverride:T}));if(s){let j=await wo(e,{address:N.from}),Q=await Promise.all(s.map(async be=>{let{address:Be}=be,_t=await H({block:P,request:{authorizationList:void 0,data:m,from:o?.address,to:Be,value:w(j)},rpcStateOverride:T}).catch(()=>100000n);return 2n*BigInt(_t)}));R+=Q.reduce((be,Be)=>be+Be,0n)}return R}catch(n){throw mi(n,{...t,account:o,chain:e.chain})}}async function gi(e,t){let{abi:r,address:o,args:n,functionName:s,dataSuffix:i,...a}=t,c=M({abi:r,args:n,functionName:s});try{return await E(e,Bt,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:o,...a})}catch(u){let m=a.account?O(a.account):void 0;throw ue(u,{abi:r,address:o,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:m?.address})}}var wi="/docs/contract/decodeEventLog";function Ze(e){let{abi:t,data:r,strict:o,topics:n}=e,s=o??!0,[i,...a]=n;if(!i)throw new bs({docsPath:wi});let c=t.find(l=>l.type==="event"&&i===st(dr(l)));if(!(c&&"name"in c)||c.type!=="event")throw new lr(i,{docsPath:wi});let{name:u,inputs:m}=c,p=m?.some(l=>!("name"in l&&l.name)),f=p?[]:{},d=m.map((l,h)=>[l,h]).filter(([l])=>"indexed"in l&&l.indexed);for(let l=0;l<d.length;l++){let[h,y]=d[l],g=a[l];if(!g)throw new Ae({abiItem:c,param:h});f[p?y:h.name||y]=lc({param:h,value:g})}let x=m.filter(l=>!("indexed"in l&&l.indexed));if(x.length>0){if(r&&r!=="0x")try{let l=vr(x,r);if(l)if(p)for(let h=0;h<m.length;h++)f[h]=f[h]??l.shift();else for(let h=0;h<x.length;h++)f[x[h].name]=l[h]}catch(l){if(s)throw l instanceof xs||l instanceof Es?new ge({abiItem:c,data:r,params:x,size:te(r)}):l}else if(s)throw new ge({abiItem:c,data:"0x",params:x,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function lc({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(vr([e],t)||[])[0]}function At(e){let{abi:t,args:r,logs:o,strict:n=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return o.map(i=>{try{let a=t.find(u=>u.type==="event"&&i.topics[0]===st(u));if(!a)return null;let c=Ze({...i,abi:[a],strict:n});return s&&!s.includes(c.eventName)||!hc({args:c.args,inputs:a.inputs,matchArgs:r})?null:{...c,...i}}catch(a){let c,u;if(a instanceof lr)return null;if(a instanceof ge||a instanceof Ae){if(n)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(m=>!("name"in m&&m.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function hc(e){let{args:t,inputs:r,matchArgs:o}=e;if(!o)return!0;if(!t)return!1;function n(s,i,a){try{return s.type==="address"?Pe(i,a):s.type==="string"||s.type==="bytes"?F(Ee(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(o)?o.every((s,i)=>{if(s==null)return!0;let a=r[i];return a?(Array.isArray(s)?s:[s]).some(u=>n(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof o=="object"&&!Array.isArray(o)?Object.entries(o).every(([s,i])=>{if(i==null)return!0;let a=r.find(u=>u.name===s);return a?(Array.isArray(i)?i:[i]).some(u=>n(a,u,t[s])):!1}):!1}function J(e,{args:t,eventName:r}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function kt(e,{address:t,blockHash:r,fromBlock:o,toBlock:n,event:s,events:i,args:a,strict:c}={}){let u=c??!1,m=i??(s?[s]:void 0),p=[];m&&(p=[m.flatMap(l=>he({abi:[l],eventName:l.name,args:i?void 0:a}))],s&&(p=p[0]));let f;r?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:r}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:typeof o=="bigint"?w(o):o,toBlock:typeof n=="bigint"?w(n):n}]});let d=f.map(x=>J(x));return m?At({abi:m,args:a,logs:d,strict:u}):d}async function Eo(e,t){let{abi:r,address:o,args:n,blockHash:s,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,m=i?Ir({abi:r,name:i}):void 0,p=m?void 0:r.filter(f=>f.type==="event");return E(e,kt,"getLogs")({address:o,args:n,blockHash:s,event:m,events:p,fromBlock:a,toBlock:c,strict:u})}async function q(e,t){let{abi:r,address:o,args:n,functionName:s,...i}=t,a=M({abi:r,args:n,functionName:s});try{let{data:c}=await E(e,Se,"call")({...i,data:a,to:o});return ne({abi:r,args:n,functionName:s,data:c||"0x"})}catch(c){throw ue(c,{abi:r,address:o,args:n,docsPath:"/docs/contract/readContract",functionName:s})}}async function Ei(e,t){let{abi:r,address:o,args:n,dataSuffix:s,functionName:i,...a}=t,c=a.account?O(a.account):e.account,u=M({abi:r,args:n,functionName:i});try{let{data:m}=await E(e,Se,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:o,...a,account:c}),p=ne({abi:r,args:n,functionName:i,data:m||"0x"}),f=r.filter(d=>"name"in d&&d.name===t.functionName);return{result:p,request:{abi:f,address:o,args:n,dataSuffix:s,functionName:i,...a,account:c}}}catch(m){throw ue(m,{abi:r,address:o,args:n,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}var Pn=new Map,vi=new Map,xc=0;function Y(e,t,r){let o=++xc,n=()=>Pn.get(e)||[],s=()=>{let m=n();Pn.set(e,m.filter(p=>p.id!==o))},i=()=>{let m=n();if(!m.some(f=>f.id===o))return;let p=vi.get(e);if(m.length===1&&p){let f=p();f instanceof Promise&&f.catch(()=>{})}s()},a=n();if(Pn.set(e,[...a,{id:o,fns:t}]),a&&a.length>0)return i;let c={};for(let m in t)c[m]=(...p)=>{let f=n();if(f.length!==0)for(let d of f)d.fns[m]?.(...p)};let u=r(c);return typeof u=="function"&&vi.set(e,u),i}function se(e,{emitOnBegin:t,initialWaitTime:r,interval:o}){let n=!0,s=()=>n=!1;return(async()=>{let a;t&&(a=await e({unpoll:s}));let c=await r?.(a)??o;await We(c);let u=async()=>{n&&(await e({unpoll:s}),await We(o),u())};u()})(),s}var yc=new Map,bc=new Map;function Pi(e){let t=(n,s)=>({clear:()=>s.delete(n),get:()=>s.get(n),set:i=>s.set(n,i)}),r=t(e,yc),o=t(e,bc);return{clear:()=>{r.clear(),o.clear()},promise:r,response:o}}async function In(e,{cacheKey:t,cacheTime:r=Number.POSITIVE_INFINITY}){let o=Pi(t),n=o.response.get();if(n&&r>0&&Date.now()-n.created.getTime()<r)return n.data;let s=o.promise.get();s||(s=e(),o.promise.set(s));try{let i=await s;return o.response.set({created:new Date,data:i}),i}finally{o.promise.clear()}}var gc=e=>`blockNumber.${e}`;async function xe(e,{cacheTime:t=e.cacheTime}={}){let r=await In(()=>e.request({method:"eth_blockNumber"}),{cacheKey:gc(e.uid),cacheTime:t});return BigInt(r)}async function Ue(e,{filter:t}){let r="strict"in t&&t.strict,o=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof o[0]=="string")return o;let n=o.map(s=>J(s));return!("abi"in t)||!t.abi?n:At({abi:t.abi,logs:n,strict:r})}async function Le(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Ii(e,t){let{abi:r,address:o,args:n,batch:s=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:m,pollingInterval:p=e.pollingInterval,strict:f}=t;return(typeof m<"u"?m:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{let h=f??!1,y=z(["watchContractEvent",o,n,s,e.uid,i,p,h,a]);return Y(y,{onLogs:u,onError:c},g=>{let b;a!==void 0&&(b=a-1n);let v,P=!1,T=se(async()=>{if(!P){try{v=await E(e,ao,"createContractEventFilter")({abi:r,address:o,args:n,eventName:i,strict:h,fromBlock:a})}catch{}P=!0;return}try{let I;if(v)I=await E(e,Ue,"getFilterChanges")({filter:v});else{let A=await E(e,xe,"getBlockNumber")({});b&&b<A?I=await E(e,Eo,"getContractEvents")({abi:r,address:o,args:n,eventName:i,fromBlock:b+1n,toBlock:A,strict:h}):I=[],b=A}if(I.length===0)return;if(s)g.onLogs(I);else for(let A of I)g.onLogs([A])}catch(I){v&&I instanceof Ne&&(P=!1),g.onError?.(I)}},{emitOnBegin:!0,interval:p});return async()=>{v&&await E(e,Le,"uninstallFilter")({filter:v}),T()}})})():(()=>{let h=f??!1,y=z(["watchContractEvent",o,n,s,e.uid,i,p,h]),g=!0,b=()=>g=!1;return Y(y,{onLogs:u,onError:c},v=>((async()=>{try{let P=(()=>{if(e.transport.type==="fallback"){let A=e.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return A?A.value:e.transport}return e.transport})(),T=i?he({abi:r,eventName:i,args:n}):[],{unsubscribe:I}=await P.subscribe({params:["logs",{address:o,topics:T}],onData(A){if(!g)return;let S=A.result;try{let{eventName:N,args:H}=Ze({abi:r,data:S.data,topics:S.topics,strict:f}),R=J(S,{args:H,eventName:N});v.onLogs([R])}catch(N){let H,R;if(N instanceof ge||N instanceof Ae){if(f)return;H=N.abiItem.name,R=N.abiItem.inputs?.some(Q=>!("name"in Q&&Q.name))}let j=J(S,{args:R?[]:{},eventName:H});v.onLogs([j])}},onError(A){v.onError?.(A)}});b=I,g||b()}catch(P){c?.(P)}})(),()=>b()))})()}var vo=class extends B{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},Ct=class extends B{constructor({docsPath:t,metaMessages:r,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:t,metaMessages:r,name:"AccountTypeNotSupportedError"})}};function Ti({chain:e,currentChainId:t}){if(!e)throw new Ts;if(t!==e.id)throw new Is({chain:e,currentChainId:t})}function Bi(e,{docsPath:t,...r}){let o=(()=>{let n=dt(e,r);return n instanceof pt?e:n})();return new Rs(o,{docsPath:t,...r})}async function Po(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var Tn=new ot(128);async function f0(e,t){let{account:r=e.account,chain:o=e.chain,accessList:n,authorizationList:s,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,type:x,value:l,...h}=t;if(typeof r>"u")throw new vo({docsPath:"/docs/actions/wallet/sendTransaction"});let y=r?O(r):null;try{le(t);let g=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await yt({authorization:s[0]}).catch(()=>{throw new B("`to` is required. Could not infer from `authorizationList`.")})})();if(y?.type==="json-rpc"||y===null){let b;o!==null&&(b=await E(e,It,"getChainId")({}),Ti({currentChainId:b,chain:o}));let v=e.chain?.formatters?.transactionRequest?.format,T=(v||Re)({...lt(h,{format:v}),accessList:n,authorizationList:s,blobs:i,chainId:b,data:a,from:y?.address,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,to:g,type:x,value:l}),I=Tn.get(e.uid),A=I?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:A,params:[T]},{retryCount:0})}catch(S){if(I===!1)throw S;let N=S;if(N.name==="InvalidInputRpcError"||N.name==="InvalidParamsRpcError"||N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[T]},{retryCount:0}).then(H=>(Tn.set(e.uid,!0),H)).catch(H=>{let R=H;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(Tn.set(e.uid,!1),N):R});throw N}}if(y?.type==="local"){let b=await E(e,Tt,"prepareTransactionRequest")({account:y,accessList:n,authorizationList:s,blobs:i,chain:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:d,nonceManager:y.nonceManager,parameters:[...vn,"sidecars"],type:x,value:l,...h,to:g}),v=o?.serializers?.transaction,P=await y.signTransaction(b,{serializer:v});return await E(e,Po,"sendRawTransaction")({serializedTransaction:P})}throw y?.type==="smart"?new Ct({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ct({docsPath:"/docs/actions/wallet/sendTransaction",type:y?.type})}catch(g){throw g instanceof Ct?g:Bi(g,{...t,account:y,chain:t.chain||void 0})}}var Io=class extends B{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}};var Bn={"0x0":"reverted","0x1":"success"};function An(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>J(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?_(e.transactionIndex):null,status:e.status?Bn[e.status]:null,type:e.type?wn[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}var b0=ht("transactionReceipt",An);var Ai="0x5792579257925792579257925792579257925792579257925792579257925792",ki=w(0,{size:32});async function Ci(e,t){async function r(m){if(m.endsWith(Ai.slice(2))){let f=me(gr(m,-64,-32)),d=gr(m,0,-64).slice(2).match(/.{1,64}/g),x=await Promise.all(d.map(h=>ki.slice(2)!==h?e.request({method:"eth_getTransactionReceipt",params:[`0x${h}`]},{dedupe:!0}):void 0)),l=x.some(h=>h===null)?100:x.every(h=>h?.status==="0x1")?200:x.every(h=>h?.status==="0x0")?500:600;return{atomic:!1,chainId:_(f),receipts:x.filter(Boolean),status:l,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[m]})}let{atomic:o=!1,chainId:n,receipts:s,version:i="2.0.0",...a}=await r(t.id),[c,u]=(()=>{let m=a.status;return m>=100&&m<200?["pending",m]:m>=200&&m<300?["success",m]:m>=300&&m<700?["failure",m]:m==="CONFIRMED"?["success",200]:m==="PENDING"?["pending",100]:[void 0,m]})();return{...a,atomic:o,chainId:n?_(n):void 0,receipts:s?.map(m=>({...m,blockNumber:V(m.blockNumber),gasUsed:V(m.gasUsed),status:Bn[m.status]}))??[],statusCode:u,status:c,version:i}}async function L0(e,t){let{id:r,pollingInterval:o=e.pollingInterval,status:n=({statusCode:l})=>l===200||l>=300,retryCount:s=4,retryDelay:i=({count:l})=>~~(1<<l)*200,timeout:a=6e4,throwOnFailure:c=!1}=t,u=z(["waitForCallsStatus",e.uid,r]),{promise:m,resolve:p,reject:f}=Qr(),d,x=Y(u,{resolve:p,reject:f},l=>{let h=se(async()=>{let y=g=>{clearTimeout(d),h(),g(),x()};try{let g=await He(async()=>{let b=await E(e,Ci,"getCallsStatus")({id:r});if(c&&b.status==="failure")throw new Io(b);return b},{retryCount:s,delay:i});if(!n(g))return;y(()=>l.resolve(g))}catch(g){y(()=>l.reject(g))}},{interval:o,emitOnBegin:!0});return h});return d=a?setTimeout(()=>{x(),clearTimeout(d),f(new kn({id:r}))},a):void 0,await m}var kn=class extends B{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}};function Cn(e){let{batch:t,chain:r,ccipRead:o,key:n="base",name:s="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof r?.experimental_preconfirmationTime=="number"?"pending":void 0),c=r?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),m=e.pollingInterval??u,p=e.cacheTime??m,f=e.account?O(e.account):void 0,{config:d,request:x,value:l}=e.transport({chain:r,pollingInterval:m}),h={...d,...l},y={account:f,batch:t,cacheTime:p,ccipRead:o,chain:r,key:n,name:s,pollingInterval:m,request:x,transport:h,type:i,uid:so(),...a?{experimental_blockTag:a}:{}};function g(b){return v=>{let P=v(b);for(let I in y)delete P[I];let T={...b,...P};return Object.assign(T,{extend:g(T)})}}return Object.assign(y,{extend:g(y)})}function Nt(e){if(!(e instanceof B))return!1;let t=e.walk(r=>r instanceof Ot);return t instanceof Ot?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}function To(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;let t=`0x${e.slice(1,65)}`;return fe(t)?t:null}function Yt(e){let t=new Uint8Array(32).fill(0);if(!e)return L(t);let r=e.split(".");for(let o=r.length-1;o>=0;o-=1){let n=To(r[o]),s=n?Ee(n):F(ve(r[o]),"bytes");t=F(ke([t,s]),"bytes")}return L(t)}function Ni(e){return`[${e.slice(2)}]`}function Ri(e){let t=new Uint8Array(32).fill(0);return e?To(e)||F(ve(e)):L(t)}function Rt(e){let t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let r=new Uint8Array(ve(t).byteLength+2),o=0,n=t.split(".");for(let s=0;s<n.length;s++){let i=ve(n[s]);i.byteLength>255&&(i=ve(Ni(Ri(n[s])))),r[o]=i.length,r.set(i,o+1),o+=i.length+1}return r.byteLength!==o+1?r.slice(0,o+1):r}async function Si(e,t){let{blockNumber:r,blockTag:o,coinType:n,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),m=c?.ensTlds;if(m&&!m.some(f=>s.endsWith(f)))return null;let p=n!=null?[Yt(s),BigInt(n)]:[Yt(s)];try{let f=M({abi:cn,functionName:"addr",args:p}),d={address:u,abi:pr,functionName:"resolveWithGateways",args:[$(Rt(s)),f,i??[at]],blockNumber:r,blockTag:o},l=await E(e,q,"readContract")(d);if(l[0]==="0x")return null;let h=ne({abi:cn,args:p,functionName:"addr",data:l[0]});return h==="0x"||me(h)==="0x00"?null:h}catch(f){if(a)throw f;if(Nt(f))return null;throw f}}var Bo=class extends B{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},De=class extends B{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},St=class extends B{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},Ao=class extends B{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var wc=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Ec=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,vc=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Pc=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ic(e){try{let t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(r=>{let o=new Image;o.onload=()=>{r(!0)},o.onerror=()=>{r(!1)},o.src=e})}}function Hi(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Nn({uri:e,gatewayUrls:t}){let r=vc.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let o=Hi(t?.ipfs,"https://ipfs.io"),n=Hi(t?.arweave,"https://arweave.net"),s=e.match(wc),{protocol:i,subpath:a,target:c,subtarget:u=""}=s?.groups||{},m=i==="ipns:/"||a==="ipns/",p=i==="ipfs:/"||a==="ipfs/"||Ec.test(e);if(e.startsWith("http")&&!m&&!p){let d=e;return t?.arweave&&(d=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:d,isOnChain:!1,isEncoded:!1}}if((m||p)&&c)return{uri:`${o}/${m?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${n}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(Pc,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new St({uri:e})}function Rn(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Bo({data:e});return e.image||e.image_url||e.image_data}async function Fi({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(n=>n.json());return await ko({gatewayUrls:e,uri:Rn(r)})}catch{throw new St({uri:t})}}async function ko({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:o}=Nn({uri:t,gatewayUrls:e});if(o||await Ic(r))return r;throw new St({uri:t})}function zi(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,o,n]=t.split("/"),[s,i]=r.split(":"),[a,c]=o.split(":");if(!s||s.toLowerCase()!=="eip155")throw new De({reason:"Only EIP-155 supported"});if(!i)throw new De({reason:"Chain ID not found"});if(!c)throw new De({reason:"Contract address not found"});if(!n)throw new De({reason:"Token ID not found"});if(!a)throw new De({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:n}}async function Ui(e,{nft:t}){if(t.namespace==="erc721")return q(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return q(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Ao({namespace:t.namespace})}async function Li(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?Tc(e,{gatewayUrls:t,record:r}):ko({uri:r,gatewayUrls:t})}async function Tc(e,{gatewayUrls:t,record:r}){let o=zi(r),n=await Ui(e,{nft:o}),{uri:s,isOnChain:i,isEncoded:a}=Nn({uri:n,gatewayUrls:t});if(i&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let u=a?atob(s.replace("data:application/json;base64,","")):s,m=JSON.parse(u);return ko({uri:Rn(m),gatewayUrls:t})}let c=o.tokenID;return o.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Fi({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,c)})}async function Co(e,t){let{blockNumber:r,blockTag:o,key:n,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),m=c?.ensTlds;if(m&&!m.some(p=>s.endsWith(p)))return null;try{let p={address:u,abi:pr,args:[$(Rt(s)),M({abi:an,functionName:"text",args:[Yt(s),n]}),i??[at]],functionName:"resolveWithGateways",blockNumber:r,blockTag:o},d=await E(e,q,"readContract")(p);if(d[0]==="0x")return null;let x=ne({abi:an,functionName:"text",data:d[0]});return x===""?null:x}catch(p){if(a)throw p;if(Nt(p))return null;throw p}}async function Di(e,{blockNumber:t,blockTag:r,assetGatewayUrls:o,name:n,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=await E(e,Co,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:n,universalResolverAddress:a,gatewayUrls:s,strict:i});if(!c)return null;try{return await Li(e,{record:c,gatewayUrls:o})}catch{return null}}async function _i(e,t){let{address:r,blockNumber:o,blockTag:n,coinType:s=60n,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:o,chain:c,contract:"ensUniversalResolver"})})();try{let m={address:u,abi:hs,args:[r,s,i??[at]],functionName:"reverseWithGateways",blockNumber:o,blockTag:n},p=E(e,q,"readContract"),[f]=await p(m);return f||null}catch(m){if(a)throw m;if(Nt(m))return null;throw m}}async function Mi(e,t){let{blockNumber:r,blockTag:o,name:n}=t,{chain:s}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:r,chain:s,contract:"ensUniversalResolver"})})(),a=s?.ensTlds;if(a&&!a.some(u=>n.endsWith(u)))throw new Error(`${n} is not a valid ENS TLD (${a?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[c]=await E(e,q,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[$(Rt(n))],blockNumber:r,blockTag:o});return c}async function No(e,t){let{account:r=e.account,blockNumber:o,blockTag:n="latest",blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:p,to:f,value:d,...x}=t,l=r?O(r):void 0;try{le(t);let y=(typeof o=="bigint"?w(o):void 0)||n,g=e.chain?.formatters?.transactionRequest?.format,v=(g||Re)({...lt(x,{format:g}),from:l?.address,blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:p,to:f,value:d}),P=await e.request({method:"eth_createAccessList",params:[v,y]});return{accessList:P.accessList,gasUsed:BigInt(P.gasUsed)}}catch(h){throw Ys(h,{...t,account:l,chain:e.chain})}}async function Gi(e){let t=Fe(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}async function Ro(e,{address:t,args:r,event:o,events:n,fromBlock:s,strict:i,toBlock:a}={}){let c=n??(o?[o]:void 0),u=Fe(e,{method:"eth_newFilter"}),m=[];c&&(m=[c.flatMap(d=>he({abi:[d],eventName:d.name,args:r}))],o&&(m=m[0]));let p=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?w(s):s,toBlock:typeof a=="bigint"?w(a):a,...m.length?{topics:m}:{}}]});return{abi:c,args:r,eventName:o?o.name:void 0,fromBlock:s,id:p,request:u(p),strict:!!i,toBlock:a,type:"event"}}async function So(e){let t=Fe(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}async function qi(e){let t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function $i(e,{blockHash:t,blockNumber:r,blockTag:o="latest"}={}){let n=r!==void 0?w(r):void 0,s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[n||o]},{dedupe:!!n}),_(s)}async function Qt(e,{address:t,blockNumber:r,blockTag:o="latest"}){let n=r!==void 0?w(r):void 0,s=await e.request({method:"eth_getCode",params:[t,n||o]},{dedupe:!!n});if(s!=="0x")return s}var Ho=class extends B{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function Oi(e,t){let{address:r,factory:o,factoryData:n}=t;try{let[s,i,a,c,u,m,p]=await E(e,q,"readContract")({abi:Bc,address:r,functionName:"eip712Domain",factory:o,factoryData:n});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:m},extensions:p,fields:s}}catch(s){let i=s;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Ho({address:r}):i}}var Bc=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function ji(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(r=>BigInt(r)))}}async function Vi(e,{blockCount:t,blockNumber:r,blockTag:o="latest",rewardPercentiles:n}){let s=typeof r=="bigint"?w(r):void 0,i=await e.request({method:"eth_feeHistory",params:[w(t),s||o,n]},{dedupe:!!s});return ji(i)}async function Wi(e,{filter:t}){let r=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>J(s));return t.abi?At({abi:t.abi,logs:n,strict:r}):n}function Ac(e,t){if(e.length!==t.length)throw new ys({expectedLength:e.length,givenLength:t.length});let r=[];for(let o=0;o<e.length;o++){let n=e[o],s=t[o];r.push(Ki(n,s))}return oe(r)}function Ki(e,t,r=!1){if(e==="address"){let i=t;if(!re(i))throw new ce({address:i});return rt(i.toLowerCase(),{size:r?32:null})}if(e==="string")return we(t);if(e==="bytes")return t;if(e==="bool")return rt(yr(t),{size:r?32:1});let o=e.match(Er);if(o){let[i,a,c="256"]=o,u=Number.parseInt(c,10)/8;return w(t,{size:r?32:u,signed:a==="int"})}let n=e.match(wr);if(n){let[i,a]=n;if(Number.parseInt(a,10)!==(t.length-2)/2)throw new hr({expectedSize:Number.parseInt(a,10),givenSize:(t.length-2)/2});return rt(t,{dir:"right",size:r?32:null})}let s=e.match(vs);if(s&&Array.isArray(t)){let[i,a]=s,c=[];for(let u=0;u<t.length;u++)c.push(Ki(a,t[u],!0));return c.length===0?"0x":oe(c)}throw new gs(e)}function Zi(e){let{authorizationList:t}=e;if(t)for(let r of t){let{chainId:o}=r,n=r.address;if(!re(n))throw new ce({address:n});if(o<0)throw new $t({chainId:o})}Fo(e)}function Ji(e){let{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Pt;for(let r of t){let o=te(r),n=_(pn(r,0,1));if(o!==32)throw new xo({hash:r,size:o});if(n!==1)throw new yo({hash:r,version:n})}}Fo(e)}function Fo(e){let{chainId:t,maxPriorityFeePerGas:r,maxFeePerGas:o,to:n}=e;if(t<=0)throw new $t({chainId:t});if(n&&!re(n))throw new ce({address:n});if(o&&o>eo)throw new Yr({maxFeePerGas:o});if(r&&o&&r>o)throw new Js({maxFeePerGas:o,maxPriorityFeePerGas:r})}function Yi(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:o,maxFeePerGas:n,to:s}=e;if(t<=0)throw new $t({chainId:t});if(s&&!re(s))throw new ce({address:s});if(r||n)throw new B("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(o&&o>eo)throw new Yr({maxFeePerGas:o})}function Qi(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:o,maxFeePerGas:n,to:s}=e;if(s&&!re(s))throw new ce({address:s});if(typeof t<"u"&&t<=0)throw new $t({chainId:t});if(r||n)throw new B("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(o&&o>eo)throw new Yr({maxFeePerGas:o})}function Xt(e){if(!e||e.length===0)return[];let t=[];for(let r=0;r<e.length;r++){let{address:o,storageKeys:n}=e[r];for(let s=0;s<n.length;s++)if(n[s].length-2!==64)throw new Ns({storageKey:n[s]});if(!re(o,{strict:!1}))throw new ce({address:o});t.push([o,n])}return t}function wy(e,t){let r=go(e);return r==="eip1559"?Nc(e,t):r==="eip2930"?Rc(e,t):r==="eip4844"?Cc(e,t):r==="eip7702"?kc(e,t):Sc(e,t)}function kc(e,t){let{authorizationList:r,chainId:o,gas:n,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:m,data:p}=e;Zi(e);let f=Xt(m),d=Xi(r);return oe(["0x04",Ie([w(o),s?w(s):"0x",u?w(u):"0x",c?w(c):"0x",n?w(n):"0x",i??"0x",a?w(a):"0x",p??"0x",f,d,...Ht(e,t)])])}function Cc(e,t){let{chainId:r,gas:o,nonce:n,to:s,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:m,data:p}=e;Ji(e);let f=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof f>"u"||typeof d>"u")){let b=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(T=>L(T)),v=e.kzg,P=Et({blobs:b,kzg:v});if(typeof f>"u"&&(f=lo({commitments:P})),typeof d>"u"){let T=vt({blobs:b,commitments:P,kzg:v});d=bo({blobs:b,commitments:P,proofs:T})}}let x=Xt(m),l=[w(r),n?w(n):"0x",u?w(u):"0x",c?w(c):"0x",o?w(o):"0x",s??"0x",i?w(i):"0x",p??"0x",x,a?w(a):"0x",f??[],...Ht(e,t)],h=[],y=[],g=[];if(d)for(let b=0;b<d.length;b++){let{blob:v,commitment:P,proof:T}=d[b];h.push(v),y.push(P),g.push(T)}return oe(["0x03",d?Ie([l,h,y,g]):Ie(l)])}function Nc(e,t){let{chainId:r,gas:o,nonce:n,to:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:m}=e;Fo(e);let p=Xt(u),f=[w(r),n?w(n):"0x",c?w(c):"0x",a?w(a):"0x",o?w(o):"0x",s??"0x",i?w(i):"0x",m??"0x",p,...Ht(e,t)];return oe(["0x02",Ie(f)])}function Rc(e,t){let{chainId:r,gas:o,data:n,nonce:s,to:i,value:a,accessList:c,gasPrice:u}=e;Yi(e);let m=Xt(c),p=[w(r),s?w(s):"0x",u?w(u):"0x",o?w(o):"0x",i??"0x",a?w(a):"0x",n??"0x",m,...Ht(e,t)];return oe(["0x01",Ie(p)])}function Sc(e,t){let{chainId:r=0,gas:o,data:n,nonce:s,to:i,value:a,gasPrice:c}=e;Qi(e);let u=[s?w(s):"0x",c?w(c):"0x",o?w(o):"0x",i??"0x",a?w(a):"0x",n??"0x"];if(t){let m=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+t.v-27n);let d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new ks({v:t.v});return d})(),p=me(t.r),f=me(t.s);u=[...u,w(m),p==="0x00"?"0x":p,f==="0x00"?"0x":f]}else r>0&&(u=[...u,w(r),"0x","0x"]);return Ie(u)}function Ht(e,t){let r=t??e,{v:o,yParity:n}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof o>"u"&&typeof n>"u")return[];let s=me(r.r),i=me(r.s);return[typeof n=="number"?n?w(1):"0x":o===0n?"0x":o===1n?w(1):o===27n?"0x":w(1),s==="0x00"?"0x":s,i==="0x00"?"0x":i]}function Xi(e){if(!e||e.length===0)return[];let t=[];for(let r of e){let{chainId:o,nonce:n,...s}=r,i=r.address;t.push([o?$(o):"0x",i,n?$(n):"0x",...Ht({},s)])}return t}async function ea({address:e,authorization:t,signature:r}){return Pe(nt(e),await yt({authorization:t,signature:r}))}function Hc(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}function Fc(e){let{source:t}=e,r=new Map,o=new ot(8192),n=new Map,s=({address:i,chainId:a})=>`${i}.${a}`;return{async consume({address:i,chainId:a,client:c}){let u=s({address:i,chainId:a}),m=this.get({address:i,chainId:a,client:c});this.increment({address:i,chainId:a});let p=await m;return await t.set({address:i,chainId:a},p),o.set(u,p),p},async increment({address:i,chainId:a}){let c=s({address:i,chainId:a}),u=r.get(c)??0;r.set(c,u+1)},async get({address:i,chainId:a,client:c}){let u=s({address:i,chainId:a}),m=n.get(u);return m||(m=(async()=>{try{let f=await t.get({address:i,chainId:a,client:c}),d=o.get(u)??0;return d>0&&f<=d?d+1:(o.delete(u),f)}finally{this.reset({address:i,chainId:a})}})(),n.set(u,m)),(r.get(u)??0)+await m},reset({address:i,chainId:a}){let c=s({address:i,chainId:a});r.delete(c),n.delete(c)}}}function zc(){return{async get(e){let{address:t,client:r}=e;return wt(r,{address:t,blockTag:"pending"})},set(){}}}var Sy=Fc({source:zc()});var ta=`Ethereum Signed Message:
`;function ra(e){let t=typeof e=="string"?we(e):typeof e.raw=="string"?e.raw:L(e.raw),r=we(`${ta}${te(t)}`);return ke([r,t])}function er(e,t){return F(ra(e),t)}var zo=class extends B{constructor({domain:t}){super(`Invalid domain "${z(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},Uo=class extends B{constructor({primaryType:t,types:r}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},Lo=class extends B{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};function oa(e){let{domain:t,message:r,primaryType:o,types:n}=e,s=(i,a)=>{for(let c of i){let{name:u,type:m}=c,p=a[u],f=m.match(Er);if(f&&(typeof p=="number"||typeof p=="bigint")){let[l,h,y]=f;w(p,{signed:h==="int",size:Number.parseInt(y,10)/8})}if(m==="address"&&typeof p=="string"&&!re(p))throw new ce({address:p});let d=m.match(wr);if(d){let[l,h]=d;if(h&&te(p)!==Number.parseInt(h,10))throw new hr({expectedSize:Number.parseInt(h,10),givenSize:te(p)})}let x=n[m];x&&(Uc(m),s(x,p))}};if(n.EIP712Domain&&t){if(typeof t!="object")throw new zo({domain:t});s(n.EIP712Domain,t)}if(o!=="EIP712Domain")if(n[o])s(n[o],r);else throw new Uo({primaryType:o,types:n})}function na({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Uc(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Lo({type:e})}function Sn(e){let{domain:t={},message:r,primaryType:o}=e,n={EIP712Domain:na({domain:t}),...e.types};oa({domain:t,message:r,primaryType:o,types:n});let s=["0x1901"];return t&&s.push(sa({domain:t,types:n})),o!=="EIP712Domain"&&s.push(Hn({data:r,primaryType:o,types:n})),F(ke(s))}function sa({domain:e,types:t}){return Hn({data:e,primaryType:"EIP712Domain",types:t})}function Hn({data:e,primaryType:t,types:r}){let o=ia({data:e,primaryType:t,types:r});return F(o)}function ia({data:e,primaryType:t,types:r}){let o=[{type:"bytes32"}],n=[Lc({primaryType:t,types:r})];for(let s of r[t]){let[i,a]=ca({types:r,name:s.name,type:s.type,value:e[s.name]});o.push(i),n.push(a)}return Ce(o,n)}function Lc({primaryType:e,types:t}){let r=$(Dc({primaryType:e,types:t}));return F(r)}function Dc({primaryType:e,types:t}){let r="",o=aa({primaryType:e,types:t});o.delete(e);let n=[e,...Array.from(o).sort()];for(let s of n)r+=`${s}(${t[s].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return r}function aa({primaryType:e,types:t},r=new Set){let n=e.match(/^\w*/u)?.[0];if(r.has(n)||t[n]===void 0)return r;r.add(n);for(let s of t[n])aa({primaryType:s.type,types:t},r);return r}function ca({types:e,name:t,type:r,value:o}){if(e[r]!==void 0)return[{type:"bytes32"},F(ia({data:o,primaryType:r,types:e}))];if(r==="bytes")return o=`0x${(o.length%2?"0":"")+o.slice(2)}`,[{type:"bytes32"},F(o)];if(r==="string")return[{type:"bytes32"},F($(o))];if(r.lastIndexOf("]")===r.length-1){let n=r.slice(0,r.lastIndexOf("[")),s=o.map(i=>ca({name:t,type:n,types:e,value:i}));return[{type:"bytes32"},F(Ce(s.map(([i])=>i),s.map(([,i])=>i)))]}return[{type:r},o]}var ua="0x6492649264926492649264926492649264926492649264926492649264926492";var cr={};ls(cr,{InvalidWrappedSignatureError:()=>Qo,assert:()=>Xo,from:()=>Eu,magicBytes:()=>ss,suffixParameters:()=>is,unwrap:()=>Na,validate:()=>Pu,wrap:()=>vu});var Do=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){let o=this.keys().next().value;o&&this.delete(o)}return this}};var _c={checksum:new Do(8192)},_o=_c.checksum;function Je(e,t={}){let{as:r=typeof e=="string"?"Hex":"Bytes"}=t,o=ws(zs(e));return r==="Bytes"?o:ee(o)}function fa(e,t={}){let{compressed:r}=t,{prefix:o,x:n,y:s}=e;if(r===!1||typeof n=="bigint"&&typeof s=="bigint"){if(o!==4)throw new Mo({prefix:o,cause:new Ln});return}if(r===!0||typeof n=="bigint"&&typeof s>"u"){if(o!==3&&o!==2)throw new Mo({prefix:o,cause:new Un});return}throw new zn({publicKey:e})}function ma(e){let t=(()=>{if(Kt(e))return pa(e);if(qs(e))return qc(e);let{prefix:r,x:o,y:n}=e;return typeof o=="bigint"&&typeof n=="bigint"?{prefix:r??4,x:o,y:n}:{prefix:r,x:o}})();return fa(t),t}function qc(e){return pa(ee(e))}function pa(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Dn({publicKey:e});if(e.length===130){let o=BigInt(U(e,0,32)),n=BigInt(U(e,32,64));return{prefix:4,x:o,y:n}}if(e.length===132){let o=Number(U(e,0,1)),n=BigInt(U(e,1,33)),s=BigInt(U(e,33,65));return{prefix:o,x:n,y:s}}let t=Number(U(e,0,1)),r=BigInt(U(e,1,33));return{prefix:t,x:r}}function _n(e,t={}){fa(e);let{prefix:r,x:o,y:n}=e,{includePrefix:s=!0}=t;return D(s?G(r,{size:1}):"0x",G(o,{size:32}),typeof n=="bigint"?G(n,{size:32}):"0x")}var zn=class extends C{constructor({publicKey:t}){super(`Value \`${Kr(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},Mo=class extends C{constructor({prefix:t,cause:r}){super(`Prefix "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},Un=class extends C{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},Ln=class extends C{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},Dn=class extends C{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${W(ft(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var $c=/^0x[a-fA-F0-9]{40}$/;function Ye(e,t={}){let{strict:r=!0}=t;if(!$c.test(e))throw new Go({address:e,cause:new Mn});if(r){if(e.toLowerCase()===e)return;if(qo(e)!==e)throw new Go({address:e,cause:new Gn})}}function qo(e){if(_o.has(e))return _o.get(e);Ye(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=Je(Us(t),{as:"Bytes"}),o=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&o[s]&&(o[s]=o[s].toUpperCase()),(r[s>>1]&15)>=8&&o[s+1]&&(o[s+1]=o[s+1].toUpperCase());let n=`0x${o.join("")}`;return _o.set(e,n),n}function Oc(e,t={}){let{checksum:r=!1}=t;return Ye(e),r?qo(e):e}function la(e,t={}){let r=Je(`0x${_n(e).slice(4)}`).substring(26);return Oc(`0x${r}`,t)}function $o(e,t={}){let{strict:r=!0}=t??{};try{return Ye(e,{strict:r}),!0}catch{return!1}}var Go=class extends C{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},Mn=class extends C{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},Gn=class extends C{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};var ha=/^(.*)\[([0-9]*)\]$/,xa=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,jo=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,fb=2n**(8n-1n)-1n,mb=2n**(16n-1n)-1n,pb=2n**(24n-1n)-1n,db=2n**(32n-1n)-1n,lb=2n**(40n-1n)-1n,hb=2n**(48n-1n)-1n,xb=2n**(56n-1n)-1n,yb=2n**(64n-1n)-1n,bb=2n**(72n-1n)-1n,gb=2n**(80n-1n)-1n,wb=2n**(88n-1n)-1n,Eb=2n**(96n-1n)-1n,vb=2n**(104n-1n)-1n,Pb=2n**(112n-1n)-1n,Ib=2n**(120n-1n)-1n,Tb=2n**(128n-1n)-1n,Bb=2n**(136n-1n)-1n,Ab=2n**(144n-1n)-1n,kb=2n**(152n-1n)-1n,Cb=2n**(160n-1n)-1n,Nb=2n**(168n-1n)-1n,Rb=2n**(176n-1n)-1n,Sb=2n**(184n-1n)-1n,Hb=2n**(192n-1n)-1n,Fb=2n**(200n-1n)-1n,zb=2n**(208n-1n)-1n,Ub=2n**(216n-1n)-1n,Lb=2n**(224n-1n)-1n,Db=2n**(232n-1n)-1n,_b=2n**(240n-1n)-1n,Mb=2n**(248n-1n)-1n,Gb=2n**(256n-1n)-1n,qb=-(2n**(8n-1n)),$b=-(2n**(16n-1n)),Ob=-(2n**(24n-1n)),jb=-(2n**(32n-1n)),Vb=-(2n**(40n-1n)),Wb=-(2n**(48n-1n)),Kb=-(2n**(56n-1n)),Zb=-(2n**(64n-1n)),Jb=-(2n**(72n-1n)),Yb=-(2n**(80n-1n)),Qb=-(2n**(88n-1n)),Xb=-(2n**(96n-1n)),eg=-(2n**(104n-1n)),tg=-(2n**(112n-1n)),rg=-(2n**(120n-1n)),og=-(2n**(128n-1n)),ng=-(2n**(136n-1n)),sg=-(2n**(144n-1n)),ig=-(2n**(152n-1n)),ag=-(2n**(160n-1n)),cg=-(2n**(168n-1n)),ug=-(2n**(176n-1n)),fg=-(2n**(184n-1n)),mg=-(2n**(192n-1n)),pg=-(2n**(200n-1n)),dg=-(2n**(208n-1n)),lg=-(2n**(216n-1n)),hg=-(2n**(224n-1n)),xg=-(2n**(232n-1n)),yg=-(2n**(240n-1n)),bg=-(2n**(248n-1n)),gg=-(2n**(256n-1n)),wg=2n**8n-1n,Eg=2n**16n-1n,vg=2n**24n-1n,Pg=2n**32n-1n,Ig=2n**40n-1n,Tg=2n**48n-1n,Bg=2n**56n-1n,Ag=2n**64n-1n,kg=2n**72n-1n,Cg=2n**80n-1n,Ng=2n**88n-1n,Rg=2n**96n-1n,Sg=2n**104n-1n,Hg=2n**112n-1n,Fg=2n**120n-1n,zg=2n**128n-1n,Ug=2n**136n-1n,Lg=2n**144n-1n,Dg=2n**152n-1n,_g=2n**160n-1n,Mg=2n**168n-1n,Gg=2n**176n-1n,qg=2n**184n-1n,$g=2n**192n-1n,Og=2n**200n-1n,jg=2n**208n-1n,Vg=2n**216n-1n,Wg=2n**224n-1n,Kg=2n**232n-1n,Zg=2n**240n-1n,Jg=2n**248n-1n,qn=2n**256n-1n;function Qe(e,t,r){let{checksumAddress:o,staticPosition:n}=r,s=jn(t.type);if(s){let[i,a]=s;return Vc(e,{...t,type:a},{checksumAddress:o,length:i,staticPosition:n})}if(t.type==="tuple")return Jc(e,t,{checksumAddress:o,staticPosition:n});if(t.type==="address")return jc(e,{checksum:o});if(t.type==="bool")return Wc(e);if(t.type.startsWith("bytes"))return Kc(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Zc(e,t);if(t.type==="string")return Yc(e,{staticPosition:n});throw new Ft(t.type)}var ba=32,$n=32;function jc(e,t={}){let{checksum:r=!1}=t,o=e.readBytes(32);return[(s=>r?qo(s):s)(ee(Ls(o,-20))),32]}function Vc(e,t,r){let{checksumAddress:o,length:n,staticPosition:s}=r;if(!n){let c=de(e.readBytes($n)),u=s+c,m=u+ba;e.setPosition(u);let p=de(e.readBytes(ba)),f=rr(t),d=0,x=[];for(let l=0;l<p;++l){e.setPosition(m+(f?l*32:d));let[h,y]=Qe(e,t,{checksumAddress:o,staticPosition:m});d+=y,x.push(h)}return e.setPosition(s+32),[x,32]}if(rr(t)){let c=de(e.readBytes($n)),u=s+c,m=[];for(let p=0;p<n;++p){e.setPosition(u+p*32);let[f]=Qe(e,t,{checksumAddress:o,staticPosition:u});m.push(f)}return e.setPosition(s+32),[m,32]}let i=0,a=[];for(let c=0;c<n;++c){let[u,m]=Qe(e,t,{checksumAddress:o,staticPosition:s+i});i+=m,a.push(u)}return[a,i]}function Wc(e){return[_s(e.readBytes(32),{size:32}),32]}function Kc(e,t,{staticPosition:r}){let[o,n]=t.type.split("bytes");if(!n){let i=de(e.readBytes(32));e.setPosition(r+i);let a=de(e.readBytes(32));if(a===0)return e.setPosition(r+32),["0x",32];let c=e.readBytes(a);return e.setPosition(r+32),[ee(c),32]}return[ee(e.readBytes(Number.parseInt(n,10),32)),32]}function Zc(e,t){let r=t.type.startsWith("int"),o=Number.parseInt(t.type.split("int")[1]||"256",10),n=e.readBytes(32);return[o>48?Ds(n,{signed:r}):de(n,{signed:r}),32]}function Jc(e,t,r){let{checksumAddress:o,staticPosition:n}=r,s=t.components.length===0||t.components.some(({name:c})=>!c),i=s?[]:{},a=0;if(rr(t)){let c=de(e.readBytes($n)),u=n+c;for(let m=0;m<t.components.length;++m){let p=t.components[m];e.setPosition(u+a);let[f,d]=Qe(e,p,{checksumAddress:o,staticPosition:u});a+=d,i[s?m:p?.name]=f}return e.setPosition(n+32),[i,32]}for(let c=0;c<t.components.length;++c){let u=t.components[c],[m,p]=Qe(e,u,{checksumAddress:o,staticPosition:n});i[s?c:u?.name]=m,a+=p}return[i,a]}function Yc(e,{staticPosition:t}){let r=de(e.readBytes(32)),o=t+r;e.setPosition(o);let n=de(e.readBytes(32));if(n===0)return e.setPosition(t+32),["",32];let s=e.readBytes(n,32),i=Ms(Gs(s));return e.setPosition(t+32),[i,32]}function ga({checksumAddress:e,parameters:t,values:r}){let o=[];for(let n=0;n<t.length;n++)o.push(On({checksumAddress:e,parameter:t[n],value:r[n]}));return o}function On({checksumAddress:e=!1,parameter:t,value:r}){let o=t,n=jn(o.type);if(n){let[s,i]=n;return Xc(r,{checksumAddress:e,length:s,parameter:{...o,type:i}})}if(o.type==="tuple")return nu(r,{checksumAddress:e,parameter:o});if(o.type==="address")return Qc(r,{checksum:e});if(o.type==="bool")return tu(r);if(o.type.startsWith("uint")||o.type.startsWith("int")){let s=o.type.startsWith("int"),[,,i="256"]=jo.exec(o.type)??[];return ru(r,{signed:s,size:Number(i)})}if(o.type.startsWith("bytes"))return eu(r,{type:o.type});if(o.type==="string")return ou(r);throw new Ft(o.type)}function Vo(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?t+=32:t+=W(a)}let r=[],o=[],n=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?(r.push(G(t+n,{size:32})),o.push(a),n+=W(a)):r.push(a)}return D(...r,...o)}function Qc(e,t){let{checksum:r=!1}=t;return Ye(e,{strict:r}),{dynamic:!1,encoded:je(e.toLowerCase())}}function Xc(e,t){let{checksumAddress:r,length:o,parameter:n}=t,s=o===null;if(!Array.isArray(e))throw new Ko(e);if(!s&&e.length!==o)throw new Wo({expectedLength:o,givenLength:e.length,type:`${n.type}[${o}]`});let i=!1,a=[];for(let c=0;c<e.length;c++){let u=On({checksumAddress:r,parameter:n,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(s||i){let c=Vo(a);if(s){let u=G(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?D(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:D(...a.map(({encoded:c})=>c))}}function eu(e,{type:t}){let[,r]=t.split("bytes"),o=W(e);if(!r){let n=e;return o%32!==0&&(n=Ve(n,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:D(je(G(o,{size:32})),n)}}if(o!==Number.parseInt(r,10))throw new or({expectedSize:Number.parseInt(r,10),value:e});return{dynamic:!1,encoded:Ve(e)}}function tu(e){if(typeof e!="boolean")throw new C(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:je(Zr(e))}}function ru(e,{signed:t,size:r}){if(typeof r=="number"){let o=2n**(BigInt(r)-(t?1n:0n))-1n,n=t?-o-1n:0n;if(e>o||e<n)throw new Os({max:o.toString(),min:n.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:G(e,{size:32,signed:t})}}function ou(e){let t=mt(e),r=Math.ceil(W(t)/32),o=[];for(let n=0;n<r;n++)o.push(Ve(U(t,n*32,(n+1)*32)));return{dynamic:!0,encoded:D(Ve(G(W(t),{size:32})),...o)}}function nu(e,t){let{checksumAddress:r,parameter:o}=t,n=!1,s=[];for(let i=0;i<o.components.length;i++){let a=o.components[i],c=Array.isArray(e)?i:a.name,u=On({checksumAddress:r,parameter:a,value:e[c]});s.push(u),u.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Vo(s):D(...s.map(({encoded:i})=>i))}}function jn(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function rr(e){let{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(rr);let r=jn(e.type);return!!(r&&rr({...e,type:r[1]}))}var iu={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Wn({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Vn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Zo({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Zo({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Jo(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(iu);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}var Zo=class extends C{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},Vn=class extends C{constructor({length:t,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},Wn=class extends C{constructor({count:t,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function zt(e,t,r={}){let{as:o="Array",checksumAddress:n=!1}=r,s=typeof t=="string"?Vt(t):t,i=Jo(s);if(Wt(s)===0&&e.length>0)throw new Jn;if(Wt(s)&&Wt(s)<32)throw new Zn({data:typeof t=="string"?t:ee(t),parameters:e,size:Wt(s)});let a=0,c=o==="Array"?[]:{};for(let u=0;u<e.length;++u){let m=e[u];i.setPosition(a);let[p,f]=Qe(i,m,{checksumAddress:n,staticPosition:0});a+=f,o==="Array"?c.push(p):c[m.name??u]=p}return c}function _e(e,t,r){let{checksumAddress:o=!1}=r??{};if(e.length!==t.length)throw new Yo({expectedLength:e.length,givenLength:t.length});let n=ga({checksumAddress:o,parameters:e,values:t}),s=Vo(n);return s.length===0?"0x":s}function Kn(e,t){if(e.length!==t.length)throw new Yo({expectedLength:e.length,givenLength:t.length});let r=[];for(let o=0;o<e.length;o++){let n=e[o],s=t[o];r.push(Kn.encode(n,s))}return D(...r)}(function(e){function t(r,o,n=!1){if(r==="address"){let c=o;return Ye(c),je(c.toLowerCase(),n?32:0)}if(r==="string")return mt(o);if(r==="bytes")return o;if(r==="bool")return je(Zr(o),n?32:1);let s=r.match(jo);if(s){let[c,u,m="256"]=s,p=Number.parseInt(m,10)/8;return G(o,{size:n?32:p,signed:u==="int"})}let i=r.match(xa);if(i){let[c,u]=i;if(Number.parseInt(u,10)!==(o.length-2)/2)throw new or({expectedSize:Number.parseInt(u,10),value:o});return Ve(o,n?32:0)}let a=r.match(ha);if(a&&Array.isArray(o)){let[c,u]=a,m=[];for(let p=0;p<o.length;p++)m.push(t(u,o[p],!0));return m.length===0?"0x":D(...m)}throw new Ft(r)}e.encode=t})(Kn||(Kn={}));function sr(e){return Array.isArray(e)&&typeof e[0]=="string"?ln(e):typeof e=="string"?ln(e):e}var Zn=class extends C{constructor({data:t,parameters:r,size:o}){super(`Data size of ${o} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ps(r)})`,`Data:   ${t} (${o} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}},Jn=class extends C{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}},Wo=class extends C{constructor({expectedLength:t,givenLength:r,type:o}){super(`Array length mismatch for type \`${o}\`. Expected: \`${t}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},or=class extends C{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${W(r)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Yo=class extends C{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},Ko=class extends C{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Ft=class extends C{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function cu(e,t){let{as:r}=t,o=va(e),n=Jo(new Uint8Array(o.length));return o.encode(n),r==="Hex"?ee(n.bytes):n.bytes}function Ea(e,t={}){let{as:r="Hex"}=t;return cu(e,{as:r})}function va(e){return Array.isArray(e)?uu(e.map(t=>va(t))):fu(e)}function uu(e){let t=e.reduce((n,s)=>n+s.length,0),r=Pa(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),r===1?n.pushUint8(t):r===2?n.pushUint16(t):r===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:s}of e)s(n)}}}function fu(e){let t=typeof e=="string"?Vt(e):e,r=Pa(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(183+r),r===1?n.pushUint8(t.length):r===2?n.pushUint16(t.length):r===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function Pa(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new C("Length is too large.")}function ts(e,t={}){let{recovered:r}=t;if(typeof e.r>"u")throw new ir({signature:e});if(typeof e.s>"u")throw new ir({signature:e});if(r&&typeof e.yParity>"u")throw new ir({signature:e});if(e.r<0n||e.r>qn)throw new Qn({value:e.r});if(e.s<0n||e.s>qn)throw new Xn({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new ar({value:e.yParity})}function pu(e){return Ia(ee(e))}function Ia(e){if(e.length!==130&&e.length!==132)throw new Yn({signature:e});let t=BigInt(U(e,0,32)),r=BigInt(U(e,32,64)),o=(()=>{let n=+`0x${e.slice(130)}`;if(!Number.isNaN(n))try{return ns(n)}catch{throw new ar({value:n})}})();return typeof o>"u"?{r:t,s:r}:{r:t,s:r,yParity:o}}function rs(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return os(e)}function os(e){let t=typeof e=="string"?Ia(e):e instanceof Uint8Array?pu(e):typeof e.r=="string"?lu(e):e.v?du(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return ts(t),t}function du(e){return{r:e.r,s:e.s,yParity:ns(e.v)}}function lu(e){let t=(()=>{let r=e.v?Number(e.v):void 0,o=e.yParity?Number(e.yParity):void 0;if(typeof r=="number"&&typeof o!="number"&&(o=ns(r)),typeof o!="number")throw new ar({value:e.yParity});return o})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Ta(e){let{r:t,s:r,yParity:o}=e;return[o?"0x01":"0x",t===0n?"0x":yn(G(t)),r===0n?"0x":yn(G(r))]}function ns(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new es({value:e})}var Yn=class extends C{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${W(ft(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},ir=class extends C{constructor({signature:t}){super(`Signature \`${Kr(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},Qn=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},Xn=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},ar=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},es=class extends C{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function Aa(e,t={}){return typeof e.chainId=="string"?hu(e):{...e,...t.signature}}function hu(e){let{address:t,chainId:r,nonce:o}=e,n=rs(e);return{address:t,chainId:Number(r),nonce:BigInt(o),...n}}function ka(e){return xu(e,{presign:!0})}function xu(e,t={}){let{presign:r}=t;return Je(D("0x05",Ea(yu(r?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}function yu(e){let{address:t,chainId:r,nonce:o}=e,n=rs(e);return[r?G(r):"0x",t,o?G(o):"0x",...n?Ta(n):[]]}function Ca(e){return la(gu(e))}function gu(e){let{payload:t,signature:r}=e,{r:o,s:n,yParity:s}=r,a=new xt.Signature(BigInt(o),BigInt(n)).addRecoveryBit(s).recoverPublicKey(ft(t).substring(2));return ma(a)}var ss="0x8010801080108010801080108010801080108010801080108010801080108010",is=sr("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Xo(e){if(typeof e=="string"){if(U(e,-32)!==ss)throw new Qo(e)}else ts(e.authorization)}function Eu(e){return typeof e=="string"?Na(e):e}function Na(e){Xo(e);let t=$s(U(e,-64,-32)),r=U(e,-t-64,-64),o=U(e,0,-t-64),[n,s,i]=zt(is,r);return{authorization:Aa({address:n.delegation,chainId:Number(n.chainId),nonce:n.nonce,yParity:n.yParity,r:n.r,s:n.s}),signature:o,...i&&i!=="0x"?{data:i,to:s}:{}}}function vu(e){let{data:t,signature:r}=e;Xo(e);let o=Ca({payload:ka(e.authorization),signature:os(e.authorization)}),n=_e(is,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??o,t??"0x"]),s=G(W(n),{size:32});return D(r,n,s,ss)}function Pu(e){try{return Xo(e),!0}catch{return!1}}var Qo=class extends C{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function u1(e){let{address:t,data:r,signature:o,to:n="hex"}=e,s=oe([Ce([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,r,o]),ua]);return n==="hex"?s:K(s)}var en=class extends B{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function Iu(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new en({value:e});let[r,o="0"]=e.split("."),n=r.startsWith("-");if(n&&(r=r.slice(1)),o=o.replace(/(0+)$/,""),t===0)Math.round(+`.${o}`)===1&&(r=`${BigInt(r)+1n}`),o="";else if(o.length>t){let[s,i,a]=[o.slice(0,t-1),o.slice(t-1,t),o.slice(t)],c=Math.round(+`${i}.${a}`);c>9?o=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):o=`${s}${c}`,o.length>t&&(o=o.slice(1),r=`${BigInt(r)+1n}`),o=o.slice(0,t)}else o=o.padEnd(t,"0");return BigInt(`${n?"-":""}${r}${o}`)}function Cu(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function Ra(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?_(e.nonce):void 0,storageProof:e.storageProof?Cu(e.storageProof):void 0}}async function Sa(e,{address:t,blockNumber:r,blockTag:o,storageKeys:n}){let s=o??"latest",i=r!==void 0?w(r):void 0,a=await e.request({method:"eth_getProof",params:[t,n,i||s]});return Ra(a)}async function Ha(e,{address:t,blockNumber:r,blockTag:o="latest",slot:n}){let s=r!==void 0?w(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,n,s||o]})}async function Ut(e,{blockHash:t,blockNumber:r,blockTag:o,hash:n,index:s}){let i=o||"latest",a=r!==void 0?w(r):void 0,c=null;if(n?c=await e.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,w(s)]},{dedupe:!0}):(a||i)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,w(s)]},{dedupe:!!a})),!c)throw new Tr({blockHash:t,blockNumber:r,blockTag:i,hash:n,index:s});return(e.chain?.formatters?.transaction?.format||Zt)(c)}async function Fa(e,{hash:t,transactionReceipt:r}){let[o,n]=await Promise.all([E(e,xe,"getBlockNumber")({}),t?E(e,Ut,"getTransaction")({hash:t}):void 0]),s=r?.blockNumber||n?.blockNumber;return s?o-s+1n:0n}async function Lt(e,{hash:t}){let r=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!r)throw new Br({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||An)(r)}async function za(e,t){let{account:r,authorizationList:o,allowFailure:n=!0,blockNumber:s,blockOverrides:i,blockTag:a,stateOverride:c}=t,u=t.contracts,{batchSize:m=t.batchSize??1024,deployless:p=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},f=(()=>{if(t.multicallAddress)return t.multicallAddress;if(p)return null;if(e.chain)return pe({blockNumber:s,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),d=[[]],x=0,l=0;for(let g=0;g<u.length;g++){let{abi:b,address:v,args:P,functionName:T}=u[g];try{let I=M({abi:b,args:P,functionName:T});l+=(I.length-2)/2,m>0&&l>m&&d[x].length>0&&(x++,l=(I.length-2)/2,d[x]=[]),d[x]=[...d[x],{allowFailure:!0,callData:I,target:v}]}catch(I){let A=ue(I,{abi:b,address:v,args:P,docsPath:"/docs/contract/multicall",functionName:T,sender:r});if(!n)throw A;d[x]=[...d[x],{allowFailure:!0,callData:"0x",target:v}]}}let h=await Promise.allSettled(d.map(g=>E(e,q,"readContract")({...f===null?{code:Jr}:{address:f},abi:Gt,account:r,args:[g],authorizationList:o,blockNumber:s,blockOverrides:i,blockTag:a,functionName:"aggregate3",stateOverride:c}))),y=[];for(let g=0;g<h.length;g++){let b=h[g];if(b.status==="rejected"){if(!n)throw b.reason;for(let P=0;P<d[g].length;P++)y.push({status:"failure",error:b.reason,result:void 0});continue}let v=b.value;for(let P=0;P<v.length;P++){let{returnData:T,success:I}=v[P],{callData:A}=d[g][P],{abi:S,address:N,functionName:H,args:R}=u[y.length];try{if(A==="0x")throw new tt;if(!I)throw new it({data:T});let j=ne({abi:S,args:R,data:T,functionName:H});y.push(n?{result:j,status:"success"}:j)}catch(j){let Q=ue(j,{abi:S,address:N,args:R,docsPath:"/docs/contract/multicall",functionName:H});if(!n)throw Q;y.push({error:Q,result:void 0,status:"failure"})}}}if(y.length!==u.length)throw new B("multicall results mismatch");return y}async function ur(e,t){let{blockNumber:r,blockTag:o=e.experimental_blockTag??"latest",blocks:n,returnFullTransactions:s,traceTransfers:i,validation:a}=t;try{let c=[];for(let f of n){let d=f.blockOverrides?js(f.blockOverrides):void 0,x=f.calls.map(h=>{let y=h,g=y.account?O(y.account):void 0,b=y.abi?M(y):y.data,v={...y,data:y.dataSuffix?ke([b||"0x",y.dataSuffix]):b,from:y.from??g?.address};return le(v),Re(v)}),l=f.stateOverrides?Xr(f.stateOverrides):void 0;c.push({blockOverrides:d,calls:x,stateOverrides:l})}let m=(typeof r=="bigint"?w(r):void 0)||o;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:i,validation:a},m]})).map((f,d)=>({...Jt(f),calls:f.calls.map((x,l)=>{let{abi:h,args:y,functionName:g,to:b}=n[d].calls[l],v=x.error?.data??x.returnData,P=BigInt(x.gasUsed),T=x.logs?.map(N=>J(N)),I=x.status==="0x1"?"success":"failure",A=h&&I==="success"&&v!=="0x"?ne({abi:h,data:v,functionName:g}):null,S=(()=>{if(I==="success")return;let N;if(x.error?.data==="0x"?N=new tt:x.error&&(N=new it(x.error)),!!N)return ue(N,{abi:h??[],address:b??"0x",args:y,functionName:g??"<unknown>"})})();return{data:v,gasUsed:P,logs:T,status:I,...I==="success"?{result:A}:{error:S}}})}))}catch(c){let u=c,m=dt(u,{});throw m instanceof pt?u:m}}function rn(e){let t=!0,r="",o=0,n="",s=!1;for(let i=0;i<e.length;i++){let a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&o++,a===")"&&o--,!!t){if(o===0){if(a===" "&&["event","function","error",""].includes(n))n="";else if(n+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}n+=a,r+=a}}if(!s)throw new C("Unable to normalize signature.");return n}function tn(e,t){let r=typeof e,o=t.type;switch(o){case"address":return $o(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return o==="tuple"&&"components"in t?Object.values(t.components).every((n,s)=>tn(Object.values(e)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(o)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(o)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(o)?Array.isArray(e)&&e.every(n=>tn(n,{...t,type:o.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function as(e,t,r){for(let o in e){let n=e[o],s=t[o];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return as(n.components,s.components,r[o]);let i=[n.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?$o(r[o],{strict:!1}):i.includes("address")&&i.includes("bytes")?$o(r[o],{strict:!1}):!1)return i}}function on(e,t={}){let{prepare:r=!0}=t,o=Array.isArray(e)?dn(e):typeof e=="string"?dn(e):e;return{...o,...r?{hash:Dt(o)}:{}}}function Ua(e,t,r){let{args:o=[],prepare:n=!0}=r??{},s=Kt(t,{strict:!1}),i=e.filter(u=>s?u.type==="function"||u.type==="error"?us(u)===U(t,0,4):u.type==="event"?Dt(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new Xe({name:t});if(i.length===1)return{...i[0],...n?{hash:Dt(i[0])}:{}};let a;for(let u of i){if(!("inputs"in u))continue;if(!o||o.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...n?{hash:Dt(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==o.length)continue;if(o.every((p,f)=>{let d="inputs"in u&&u.inputs[f];return d?tn(p,d):!1})){if(a&&"inputs"in a&&a.inputs){let p=as(u.inputs,a.inputs,o);if(p)throw new cs({abiItem:u,type:p[0]},{abiItem:a,type:p[1]})}a=u}}let c=(()=>{if(a)return a;let[u,...m]=i;return{...u,overloads:m}})();if(!c)throw new Xe({name:t});return{...c,...n?{hash:Dt(c)}:{}}}function us(e){return U(Dt(e),0,4)}function Ru(e){let t=typeof e=="string"?e:Pr(e);return rn(t)}function Dt(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Je(mt(Ru(e)))}var cs=class extends C{constructor(t,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${rn(Pr(t.abiItem))}\`, and`,`\`${r.type}\` in \`${rn(Pr(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},Xe=class extends C{constructor({name:t,data:r,type:o="item"}){let n=t?` with name "${t}"`:r?` with data "${r}"`:"";super(`ABI ${o}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};function Da(e,t){let{bytecode:r,args:o}=t;return D(r,e.inputs?.length&&o?.length?_e(e.inputs,o):"0x")}function _a(e){return on(e)}function Ma(e,...t){let{overloads:r}=e,o=r?Hu([e,...r],e.name,{args:t[0]}):e,n=Fu(o),s=t.length>0?_e(o.inputs,t[0]):void 0;return s?D(n,s):n}function et(e,t={}){return on(e,t)}function Hu(e,t,r){let o=Ua(e,t,r);if(o.type!=="function")throw new Xe({name:t,type:"function"});return o}function Fu(e){return us(e)}var fs="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ae="0x0000000000000000000000000000000000000000";var Uu="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Ga(e,t){let{blockNumber:r,blockTag:o,calls:n,stateOverrides:s,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?O(t.account):void 0;if(i&&!u)throw new B("`account` is required when `traceAssetChanges` is true");let m=u?Da(_a("constructor(bytes, bytes)"),{bytecode:Vs,args:[Uu,Ma(et("function getBalance(address)"),[u.address])]}):void 0,p=i?await Promise.all(t.calls.map(async k=>{if(!k.data&&!k.abi)return;let{accessList:X}=await No(e,{account:u.address,...k,data:k.abi?M(k):k.data});return X.map(({address:Mt,storageKeys:mr})=>mr.length>0?Mt:null)})).then(k=>k.flat().filter(Boolean)):[],f=await ur(e,{blockNumber:r,blockTag:o,blocks:[...i?[{calls:[{data:m}],stateOverrides:s},{calls:p.map((k,X)=>({abi:[et("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:ae,nonce:X})),stateOverrides:[{address:ae,nonce:0}]}]:[],{calls:[...n,{}].map(k=>({...k,from:u?.address})),stateOverrides:s},...i?[{calls:[{data:m}]},{calls:p.map((k,X)=>({abi:[et("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:ae,nonce:X})),stateOverrides:[{address:ae,nonce:0}]},{calls:p.map((k,X)=>({to:k,abi:[et("function decimals() returns (uint256)")],functionName:"decimals",from:ae,nonce:X})),stateOverrides:[{address:ae,nonce:0}]},{calls:p.map((k,X)=>({to:k,abi:[et("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ae,nonce:X})),stateOverrides:[{address:ae,nonce:0}]},{calls:p.map((k,X)=>({to:k,abi:[et("function symbol() returns (string)")],functionName:"symbol",from:ae,nonce:X})),stateOverrides:[{address:ae,nonce:0}]}]:[]],traceTransfers:a,validation:c}),d=i?f[2]:f[0],[x,l,,h,y,g,b,v]=i?f:[],{calls:P,...T}=d,I=P.slice(0,-1)??[],A=x?.calls??[],S=l?.calls??[],N=[...A,...S].map(k=>k.status==="success"?V(k.data):null),H=h?.calls??[],R=y?.calls??[],j=[...H,...R].map(k=>k.status==="success"?V(k.data):null),Q=(g?.calls??[]).map(k=>k.status==="success"?k.result:null),be=(v?.calls??[]).map(k=>k.status==="success"?k.result:null),Be=(b?.calls??[]).map(k=>k.status==="success"?k.result:null),_t=[];for(let[k,X]of j.entries()){let Mt=N[k];if(typeof X!="bigint"||typeof Mt!="bigint")continue;let mr=Q[k-1],rc=be[k-1],oc=Be[k-1],ds=k===0?{address:fs,decimals:18,symbol:"ETH"}:{address:p[k-1],decimals:oc||mr?Number(mr??1):void 0,symbol:rc??void 0};_t.some(nc=>nc.token.address===ds.address)||_t.push({token:ds,value:{pre:Mt,post:X,diff:X-Mt}})}return{assetChanges:_t,block:T,results:I}}var fr={};ls(fr,{InvalidWrappedSignatureError:()=>nn,assert:()=>ps,from:()=>_u,magicBytes:()=>ms,universalSignatureValidatorAbi:()=>Du,universalSignatureValidatorBytecode:()=>Lu,unwrap:()=>qa,validate:()=>Gu,wrap:()=>Mu});var ms="0x6492649264926492649264926492649264926492649264926492649264926492",Lu="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Du=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function ps(e){if(U(e,-32)!==ms)throw new nn(e)}function _u(e){return typeof e=="string"?qa(e):e}function qa(e){ps(e);let[t,r,o]=zt(sr("address, bytes, bytes"),e);return{data:r,signature:o,to:t}}function Mu(e){let{data:t,signature:r,to:o}=e;return D(_e(sr("address, bytes, bytes"),[o,t,r]),ms)}function Gu(e){try{return ps(e),!0}catch{return!1}}var nn=class extends C{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}};function $a({r:e,s:t,to:r="hex",v:o,yParity:n}){let s=(()=>{if(n===0||n===1)return n;if(o&&(o===27n||o===28n||o>=35n))return o%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new xt.Signature(V(e),V(t)).toCompactHex()}${s===0?"1b":"1c"}`;return r==="hex"?i:K(i)}async function Me(e,t){let{address:r,hash:o,erc6492VerifierAddress:n=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:s=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,i=(()=>{let a=t.signature;return fe(a)?a:typeof a=="object"&&"r"in a&&"s"in a?$a(a):L(a)})();try{return cr.validate(i)?await qu(e,{...t,multicallAddress:s,signature:i}):await $u(e,{...t,verifierAddress:n,signature:i})}catch(a){try{if(Pe(nt(r),await co({hash:o,signature:i})))return!0}catch{}if(a instanceof Te)return!1;throw a}}async function qu(e,t){let{address:r,blockNumber:o,blockTag:n,hash:s,multicallAddress:i}=t,{authorization:a,data:c,signature:u,to:m}=cr.unwrap(t.signature);if(await Qt(e,{address:r,blockNumber:o,blockTag:n})===oe(["0xef0100",a.address]))return await Ou(e,{address:r,blockNumber:o,blockTag:n,hash:s,signature:u});let f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:w(a.r,{size:32}),s:w(a.s,{size:32}),yParity:a.yParity};if(!await ea({address:r,authorization:f}))throw new Te;let x=await E(e,q,"readContract")({...i?{address:i}:{code:Jr},authorizationList:[f],abi:Gt,blockNumber:o,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:m??r,callData:c}]:[],{allowFailure:!0,target:r,callData:M({abi:un,functionName:"isValidSignature",args:[s,u]})}]]});if(x[x.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new Te}async function $u(e,t){let{address:r,factory:o,factoryData:n,hash:s,signature:i,verifierAddress:a,...c}=t,u=await(async()=>!o&&!n||fr.validate(i)?i:fr.wrap({data:n,signature:i,to:o}))(),m=a?{to:a,data:M({abi:qt,functionName:"isValidSig",args:[r,s,u]}),...c}:{data:Ks({abi:qt,args:[r,s,u],bytecode:Ws}),...c},{data:p}=await E(e,Se,"call")(m).catch(f=>{throw f instanceof Hs?new Te:f});if(xr(p??"0x0"))return!0;throw new Te}async function Ou(e,t){let{address:r,blockNumber:o,blockTag:n,hash:s,signature:i}=t;if((await E(e,q,"readContract")({address:r,abi:un,args:[s,i],blockNumber:o,blockTag:n,functionName:"isValidSignature"}).catch(c=>{throw c instanceof Ar?new Te:c})).startsWith("0x1626ba7e"))return!0;throw new Te}var Te=class extends Error{};async function Oa(e,{address:t,message:r,factory:o,factoryData:n,signature:s,...i}){let a=er(r);return Me(e,{address:t,factory:o,factoryData:n,hash:a,signature:s,...i})}async function ja(e,t){let{address:r,factory:o,factoryData:n,signature:s,message:i,primaryType:a,types:c,domain:u,...m}=t,p=Sn({message:i,primaryType:a,types:c,domain:u});return Me(e,{address:r,factory:o,factoryData:n,hash:p,signature:s,...m})}function sn(e,{emitOnBegin:t=!1,emitMissed:r=!1,onBlockNumber:o,onError:n,poll:s,pollingInterval:i=e.pollingInterval}){let a=typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),c;return a?(()=>{let p=z(["watchBlockNumber",e.uid,t,r,i]);return Y(p,{onBlockNumber:o,onError:n},f=>se(async()=>{try{let d=await E(e,xe,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(d===c)return;if(d-c>1&&r)for(let x=c+1n;x<d;x++)f.onBlockNumber(x,c),c=x}(c===void 0||d>c)&&(f.onBlockNumber(d,c),c=d)}catch(d){f.onError?.(d)}},{emitOnBegin:t,interval:i}))})():(()=>{let p=z(["watchBlockNumber",e.uid,t,r]);return Y(p,{onBlockNumber:o,onError:n},f=>{let d=!0,x=()=>d=!1;return(async()=>{try{let l=(()=>{if(e.transport.type==="fallback"){let y=e.transport.transports.find(g=>g.config.type==="webSocket"||g.config.type==="ipc");return y?y.value:e.transport}return e.transport})(),{unsubscribe:h}=await l.subscribe({params:["newHeads"],onData(y){if(!d)return;let g=V(y.result?.number);f.onBlockNumber(g,c),c=g},onError(y){f.onError?.(y)}});x=h,d||x()}catch(l){n?.(l)}})(),()=>x()})})()}async function Va(e,t){let{checkReplacement:r=!0,confirmations:o=1,hash:n,onReplaced:s,retryCount:i=6,retryDelay:a=({count:P})=>~~(1<<P)*200,timeout:c=18e4}=t,u=z(["waitForTransactionReceipt",e.uid,n]),m=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval,p,f,d,x=!1,l,h,{promise:y,resolve:g,reject:b}=Qr(),v=c?setTimeout(()=>{h?.(),l?.(),b(new Ss({hash:n}))},c):void 0;return l=Y(u,{onReplaced:s,resolve:g,reject:b},async P=>{if(d=await E(e,Lt,"getTransactionReceipt")({hash:n}).catch(()=>{}),d&&o<=1){clearTimeout(v),P.resolve(d),l?.();return}h=E(e,sn,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:m,async onBlockNumber(T){let I=S=>{clearTimeout(v),h?.(),S(),l?.()},A=T;if(!x)try{if(d){if(o>1&&(!d.blockNumber||A-d.blockNumber+1n<o))return;I(()=>P.resolve(d));return}if(r&&!p&&(x=!0,await He(async()=>{p=await E(e,Ut,"getTransaction")({hash:n}),p.blockNumber&&(A=p.blockNumber)},{delay:a,retryCount:i}),x=!1),d=await E(e,Lt,"getTransactionReceipt")({hash:n}),o>1&&(!d.blockNumber||A-d.blockNumber+1n<o))return;I(()=>P.resolve(d))}catch(S){if(S instanceof Tr||S instanceof Br){if(!p){x=!1;return}try{f=p,x=!0;let N=await He(()=>E(e,Z,"getBlock")({blockNumber:A,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:j})=>j instanceof bt});x=!1;let H=N.transactions.find(({from:j,nonce:Q})=>j===f.from&&Q===f.nonce);if(!H||(d=await E(e,Lt,"getTransactionReceipt")({hash:H.hash}),o>1&&(!d.blockNumber||A-d.blockNumber+1n<o)))return;let R="replaced";H.to===f.to&&H.value===f.value&&H.input===f.input?R="repriced":H.from===H.to&&H.value===0n&&(R="cancelled"),I(()=>{P.onReplaced?.({reason:R,replacedTransaction:f,transaction:H,transactionReceipt:d}),P.resolve(d)})}catch(N){I(()=>P.reject(N))}}else I(()=>P.reject(S))}}})}),y}function Wa(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:r=!1,emitOnBegin:o=!1,onBlock:n,onError:s,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){let u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),m=i??!1,p;return u?(()=>{let x=z(["watchBlocks",e.uid,t,r,o,m,c]);return Y(x,{onBlock:n,onError:s},l=>se(async()=>{try{let h=await E(e,Z,"getBlock")({blockTag:t,includeTransactions:m});if(h.number!==null&&p?.number!=null){if(h.number===p.number)return;if(h.number-p.number>1&&r)for(let y=p?.number+1n;y<h.number;y++){let g=await E(e,Z,"getBlock")({blockNumber:y,includeTransactions:m});l.onBlock(g,p),p=g}}(p?.number==null||t==="pending"&&h?.number==null||h.number!==null&&h.number>p.number)&&(l.onBlock(h,p),p=h)}catch(h){l.onError?.(h)}},{emitOnBegin:o,interval:c}))})():(()=>{let x=!0,l=!0,h=()=>x=!1;return(async()=>{try{o&&E(e,Z,"getBlock")({blockTag:t,includeTransactions:m}).then(b=>{x&&l&&(n(b,void 0),l=!1)}).catch(s);let y=(()=>{if(e.transport.type==="fallback"){let b=e.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return b?b.value:e.transport}return e.transport})(),{unsubscribe:g}=await y.subscribe({params:["newHeads"],async onData(b){if(!x)return;let v=await E(e,Z,"getBlock")({blockNumber:b.result?.number,includeTransactions:m}).catch(()=>{});x&&(n(v,p),l=!1,p=v)},onError(b){s?.(b)}});h=g,x||h()}catch(y){s?.(y)}})(),()=>h()})()}function Ka(e,{address:t,args:r,batch:o=!0,event:n,events:s,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:m=e.pollingInterval,strict:p}){let f=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=p??!1;return f?(()=>{let h=z(["watchEvent",t,r,o,e.uid,n,m,i]);return Y(h,{onLogs:c,onError:a},y=>{let g;i!==void 0&&(g=i-1n);let b,v=!1,P=se(async()=>{if(!v){try{b=await E(e,Ro,"createEventFilter")({address:t,args:r,event:n,events:s,strict:d,fromBlock:i})}catch{}v=!0;return}try{let T;if(b)T=await E(e,Ue,"getFilterChanges")({filter:b});else{let I=await E(e,xe,"getBlockNumber")({});g&&g!==I?T=await E(e,kt,"getLogs")({address:t,args:r,event:n,events:s,fromBlock:g+1n,toBlock:I}):T=[],g=I}if(T.length===0)return;if(o)y.onLogs(T);else for(let I of T)y.onLogs([I])}catch(T){b&&T instanceof Ne&&(v=!1),y.onError?.(T)}},{emitOnBegin:!0,interval:m});return async()=>{b&&await E(e,Le,"uninstallFilter")({filter:b}),P()}})})():(()=>{let h=!0,y=()=>h=!1;return(async()=>{try{let g=(()=>{if(e.transport.type==="fallback"){let T=e.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return T?T.value:e.transport}return e.transport})(),b=s??(n?[n]:void 0),v=[];b&&(v=[b.flatMap(I=>he({abi:[I],eventName:I.name,args:r}))],n&&(v=v[0]));let{unsubscribe:P}=await g.subscribe({params:["logs",{address:t,topics:v}],onData(T){if(!h)return;let I=T.result;try{let{eventName:A,args:S}=Ze({abi:b??[],data:I.data,topics:I.topics,strict:d}),N=J(I,{args:S,eventName:A});c([N])}catch(A){let S,N;if(A instanceof ge||A instanceof Ae){if(p)return;S=A.abiItem.name,N=A.abiItem.inputs?.some(R=>!("name"in R&&R.name))}let H=J(I,{args:N?[]:{},eventName:S});c([H])}},onError(T){a?.(T)}});y=P,h||y()}catch(g){a?.(g)}})(),()=>y()})()}function Za(e,{batch:t=!0,onError:r,onTransactions:o,poll:n,pollingInterval:s=e.pollingInterval}){return(typeof n<"u"?n:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{let u=z(["watchPendingTransactions",e.uid,t,s]);return Y(u,{onTransactions:o,onError:r},m=>{let p,f=se(async()=>{try{if(!p)try{p=await E(e,So,"createPendingTransactionFilter")({});return}catch(x){throw f(),x}let d=await E(e,Ue,"getFilterChanges")({filter:p});if(d.length===0)return;if(t)m.onTransactions(d);else for(let x of d)m.onTransactions([x])}catch(d){m.onError?.(d)}},{emitOnBegin:!0,interval:s});return async()=>{p&&await E(e,Le,"uninstallFilter")({filter:p}),f()}})})():(()=>{let u=!0,m=()=>u=!1;return(async()=>{try{let{unsubscribe:p}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;let d=f.result;o([d])},onError(f){r?.(f)}});m=p,u||m()}catch(p){r?.(p)}})(),()=>m()})()}function Ja(e){let{scheme:t,statement:r,...o}=e.match(ju)?.groups??{},{chainId:n,expirationTime:s,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(Vu)?.groups??{},m=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...u,...n?{chainId:Number(n)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...m?{resources:m}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}var ju=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Vu=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Ya(e){let{address:t,domain:r,message:o,nonce:n,scheme:s,time:i=new Date}=e;if(r&&o.domain!==r||n&&o.nonce!==n||s&&o.scheme!==s||o.expirationTime&&i>=o.expirationTime||o.notBefore&&i<o.notBefore)return!1;try{if(!o.address||!re(o.address,{strict:!1})||t&&!Pe(o.address,t))return!1}catch{return!1}return!0}async function Qa(e,t){let{address:r,domain:o,message:n,nonce:s,scheme:i,signature:a,time:c=new Date,...u}=t,m=Ja(n);if(!m.address||!Ya({address:r,domain:o,message:m,nonce:s,scheme:i,time:c}))return!1;let f=er(n);return Me(e,{address:m.address,hash:f,signature:a,...u})}function Xa(e){return{call:t=>Se(e,t),createAccessList:t=>No(e,t),createBlockFilter:()=>Gi(e),createContractEventFilter:t=>ao(e,t),createEventFilter:t=>Ro(e,t),createPendingTransactionFilter:()=>So(e),estimateContractGas:t=>gi(e,t),estimateGas:t=>Bt(e,t),getBalance:t=>wo(e,t),getBlobBaseFee:()=>qi(e),getBlock:t=>Z(e,t),getBlockNumber:t=>xe(e,t),getBlockTransactionCount:t=>$i(e,t),getBytecode:t=>Qt(e,t),getChainId:()=>It(e),getCode:t=>Qt(e,t),getContractEvents:t=>Eo(e,t),getEip712Domain:t=>Oi(e,t),getEnsAddress:t=>Si(e,t),getEnsAvatar:t=>Di(e,t),getEnsName:t=>_i(e,t),getEnsResolver:t=>Mi(e,t),getEnsText:t=>Co(e,t),getFeeHistory:t=>Vi(e,t),estimateFeesPerGas:t=>di(e,t),getFilterChanges:t=>Ue(e,t),getFilterLogs:t=>Wi(e,t),getGasPrice:()=>gt(e),getLogs:t=>kt(e,t),getProof:t=>Sa(e,t),estimateMaxPriorityFeePerGas:t=>pi(e,t),getStorageAt:t=>Ha(e,t),getTransaction:t=>Ut(e,t),getTransactionConfirmations:t=>Fa(e,t),getTransactionCount:t=>wt(e,t),getTransactionReceipt:t=>Lt(e,t),multicall:t=>za(e,t),prepareTransactionRequest:t=>Tt(e,t),readContract:t=>q(e,t),sendRawTransaction:t=>Po(e,t),simulate:t=>ur(e,t),simulateBlocks:t=>ur(e,t),simulateCalls:t=>Ga(e,t),simulateContract:t=>Ei(e,t),verifyHash:t=>Me(e,t),verifyMessage:t=>Oa(e,t),verifySiweMessage:t=>Qa(e,t),verifyTypedData:t=>ja(e,t),uninstallFilter:t=>Le(e,t),waitForTransactionReceipt:t=>Va(e,t),watchBlocks:t=>Wa(e,t),watchBlockNumber:t=>sn(e,t),watchContractEvent:t=>Ii(e,t),watchEvent:t=>Ka(e,t),watchPendingTransactions:t=>Za(e,t)}}function Wu(e){let{key:t="public",name:r="Public Client"}=e;return Cn({...e,key:t,name:r,type:"publicClient"}).extend(Xa)}function Ku(e,t={}){let{key:r="custom",methods:o,name:n="Custom Provider",retryDelay:s}=t;return({retryCount:i})=>Ke({key:r,methods:o,name:n,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:s,type:"custom"})}function Zu(e,t={}){let{key:r="fallback",name:o="Fallback",rank:n=!1,shouldThrow:s=ec,retryCount:i,retryDelay:a}=t;return({chain:c,pollingInterval:u=4e3,timeout:m,...p})=>{let f=e,d=()=>{},x=Ke({key:r,name:o,async request({method:l,params:h}){let y,g=async(b=0)=>{let v=f[b]({...p,chain:c,retryCount:0,timeout:m});try{let P=await v.request({method:l,params:h});return d({method:l,params:h,response:P,transport:v,status:"success"}),P}catch(P){if(d({error:P,method:l,params:h,transport:v,status:"error"}),s(P)||b===f.length-1||(y??=f.slice(b+1).some(T=>{let{include:I,exclude:A}=T({chain:c}).config.methods||{};return I?I.includes(l):A?!A.includes(l):!0}),!y))throw P;return g(b+1)}};return g()},retryCount:i,retryDelay:a,type:"fallback"},{onResponse:l=>d=l,transports:f.map(l=>l({chain:c,retryCount:0}))});if(n){let l=typeof n=="object"?n:{};Ju({chain:c,interval:l.interval??u,onTransports:h=>f=h,ping:l.ping,sampleCount:l.sampleCount,timeout:l.timeout,transports:f,weights:l.weights})}return x}}function ec(e){return!!("code"in e&&typeof e.code=="number"&&(e.code===ct.code||e.code===Oe.code||Zs.nodeMessage.test(e.message)||e.code===5e3))}function Ju({chain:e,interval:t=4e3,onTransports:r,ping:o,sampleCount:n=10,timeout:s=1e3,transports:i,weights:a={}}){let{stability:c=.7,latency:u=.3}=a,m=[],p=async()=>{let f=await Promise.all(i.map(async l=>{let h=l({chain:e,retryCount:0,timeout:s}),y=Date.now(),g,b;try{await(o?o({transport:h}):h.request({method:"net_listening"})),b=1}catch{b=0}finally{g=Date.now()}return{latency:g-y,success:b}}));m.push(f),m.length>n&&m.shift();let d=Math.max(...m.map(l=>Math.max(...l.map(({latency:h})=>h)))),x=i.map((l,h)=>{let y=m.map(T=>T[h].latency),b=1-y.reduce((T,I)=>T+I,0)/y.length/d,v=m.map(T=>T[h].success),P=v.reduce((T,I)=>T+I,0)/v.length;return P===0?[0,h]:[u*b+c*P,h]}).sort((l,h)=>h[0]-l[0]);r(x.map(([,l])=>i[l])),await We(t),p()};p()}function tc(e){let{r:t,s:r}=xt.Signature.fromCompact(e.slice(2,130)),o=+`0x${e.slice(130)}`,[n,s]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof n<"u"?{r:w(t,{size:32}),s:w(r,{size:32}),v:n,yParity:s}:{r:w(t,{size:32}),s:w(r,{size:32}),yParity:s}}export{E as a,ue as b,q as c,_i as d,Ie as e,Zt as f,Mm as g,Om as h,di as i,wt as j,It as k,In as l,Qt as m,Ze as n,J as o,Oi as p,Ac as q,Xt as r,wy as s,Ht as t,He as u,Hc as v,An as w,b0 as x,Fc as y,bn as z,er as A,Sn as B,u1 as C,Iu as D,on as E,us as F,ae as G,Me as H,Y as I,se as J,vo as K,f0 as L,L0 as M,Cn as N,Wu as O,Ke as P,Ku as Q,Zu as R,ac as S,tc as T};
