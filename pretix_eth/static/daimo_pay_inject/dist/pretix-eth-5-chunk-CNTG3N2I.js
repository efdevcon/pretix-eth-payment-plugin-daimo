import{a as wn}from"./pretix-eth-5-chunk-YH2IVGQX.js";import{A as et,C as gn,D as hn,E as se,H as On,a as T,c as mn,i as yn,k as Qe,l as dn,n as fn,u as ln,w as xn,z as bn}from"./pretix-eth-5-chunk-4MF42RWC.js";import{b as Pn}from"./pretix-eth-5-chunk-RYOKWQSX.js";import{$b as cn,Ca as on,Da as un,Ea as pn,G as h,M as L,V as R,_ as Ze,ca as tn,ia as nn,l as y,na as ie,oa as rn,pa as an,sa as Ft,ta as sn,x as G,z as ae}from"./pretix-eth-5-chunk-ZWRX4H4Q.js";import{b as tt,i as vn,p as Sn,t as En,u as nt}from"./pretix-eth-5-chunk-FGY2DBJP.js";import{d as Fe}from"./pretix-eth-5-chunk-BIK4PATU.js";var F={};Fe(F,{IntegerOutOfRangeError:()=>pt,InvalidHexBooleanError:()=>ct,InvalidHexTypeError:()=>Ne,InvalidHexValueError:()=>_e,InvalidLengthError:()=>Kt,SizeExceedsPaddingSizeError:()=>Ve,SizeOverflowError:()=>$e,SliceOffsetOutOfBoundsError:()=>ue,assert:()=>jn,concat:()=>j,from:()=>me,fromBoolean:()=>Cr,fromBytes:()=>P,fromNumber:()=>S,fromString:()=>mt,isEqual:()=>Hr,padLeft:()=>Jt,padRight:()=>it,random:()=>Lr,size:()=>I,slice:()=>U,toBigInt:()=>st,toBoolean:()=>kr,toBytes:()=>Fr,toNumber:()=>kn,toString:()=>zr,trimLeft:()=>Ke,trimRight:()=>Rr,validate:()=>yt});var An="0.1.1";function Bn(){return An}var f=class e extends Error{constructor(t,n={}){let r=(()=>{if(n.cause instanceof e){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${a??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${s}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Bn()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=a,this.shortMessage=t}walk(t){return Tn(this,t)}};function Tn(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Tn(e.cause,t):t?null:e}var Br="#__bigint";function M(e,t,n){return JSON.stringify(e,(r,a)=>typeof t=="function"?t(r,a):typeof a=="bigint"?a.toString()+Br:a,n)}function Me(e,t){if(N(e)>t)throw new rt({givenSize:N(e),maxSize:t})}function In(e,t){if(typeof t=="number"&&t>0&&t>N(e)-1)throw new je({offset:t,position:"start",size:N(e)})}function Un(e,t,n){if(typeof t=="number"&&typeof n=="number"&&N(e)!==n-t)throw new je({offset:n,position:"end",size:N(e)})}var k={zero:48,nine:57,A:65,F:70,a:97,f:102};function zt(e){if(e>=k.zero&&e<=k.nine)return e-k.zero;if(e>=k.A&&e<=k.F)return e-(k.A-10);if(e>=k.a&&e<=k.f)return e-(k.a-10)}function Gn(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new at({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let i=0;i<r;i++){let s=n==="right";a[s?i:r-i-1]=e[s?i:e.length-i-1]}return a}function Dn(e,t={}){let{dir:n="left"}=t,r=e,a=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r}function _(e,t){if(I(e)>t)throw new $e({givenSize:I(e),maxSize:t})}function Hn(e,t){if(typeof t=="number"&&t>0&&t>I(e)-1)throw new ue({offset:t,position:"start",size:I(e)})}function Ln(e,t,n){if(typeof t=="number"&&typeof n=="number"&&I(e)!==n-t)throw new ue({offset:n,position:"end",size:I(e)})}function Mt(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;let a=e.replace("0x","");if(a.length>r*2)throw new Ve({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function jt(e,t={}){let{dir:n="left"}=t,r=e.replace("0x",""),a=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r==="0"?"0x":n==="right"&&r.length%2===1?`0x${r}0`:`0x${r}`}var Tr=new TextEncoder;function Ir(e){if(!(e instanceof Uint8Array)){if(!e)throw new pe(e);if(typeof e!="object")throw new pe(e);if(!("BYTES_PER_ELEMENT"in e))throw new pe(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new pe(e)}}function ot(...e){let t=0;for(let r of e)t+=r.length;let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let i=e[r];n.set(i,a),a+=i.length}return n}function ce(e){return e instanceof Uint8Array?e:typeof e=="string"?E(e):$t(e)}function $t(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function E(e,t={}){let{size:n}=t,r=e;n&&(_(e,n),r=it(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let i=a.length/2,s=new Uint8Array(i);for(let o=0,u=0;o<i;o++){let p=zt(a.charCodeAt(u++)),m=zt(a.charCodeAt(u++));if(p===void 0||m===void 0)throw new f(`Invalid byte sequence ("${a[u-2]}${a[u-1]}" in "${a}").`);s[o]=p*16+m}return s}function Vt(e,t){let n=S(e,t);return E(n)}function ut(e,t={}){let{size:n}=t,r=Tr.encode(e);return typeof n=="number"?(Me(r,n),Ur(r,n)):r}function Ur(e,t){return Gn(e,{dir:"right",size:t})}function Fn(e){return crypto.getRandomValues(new Uint8Array(e))}function N(e){return e.length}function Nt(e,t,n,r={}){let{strict:a}=r;In(e,t);let i=e.slice(t,n);return a&&Un(i,t,n),i}function _t(e,t={}){let{size:n}=t;typeof n<"u"&&Me(e,n);let r=P(e,t);return st(r,t)}function zn(e){return Dn(e,{dir:"right"})}function Mn(e){try{return Ir(e),!0}catch{return!1}}var pe=class extends f{constructor(t){super(`Value \`${typeof t=="object"?M(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}},rt=class extends f{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},je=class extends f{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},at=class extends f{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var Gr=new TextEncoder,Dr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jn(e,t={}){let{strict:n=!1}=t;if(!e)throw new Ne(e);if(typeof e!="string")throw new Ne(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new _e(e);if(!e.startsWith("0x"))throw new _e(e)}function j(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function me(e){return e instanceof Uint8Array?P(e):Array.isArray(e)?P(new Uint8Array(e)):e}function Cr(e,t={}){let n=`0x${Number(e)}`;return typeof t.size=="number"?(_(n,t.size),Jt(n,t.size)):n}function P(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=Dr[e[a]];let r=`0x${n}`;return typeof t.size=="number"?(_(r,t.size),it(r,t.size)):r}function S(e,t={}){let{signed:n,size:r}=t,a=BigInt(e),i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){let p=typeof e=="bigint"?"n":"";throw new pt({max:i?`${i}${p}`:void 0,min:`${s}${p}`,signed:n,size:r,value:`${e}${p}`})}let u=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Jt(u,r):u}function mt(e,t={}){return P(Gr.encode(e),t)}function Hr(e,t){return vn(E(e),E(t))}function Jt(e,t){return Mt(e,{dir:"left",size:t})}function it(e,t){return Mt(e,{dir:"right",size:t})}function Lr(e){return P(Fn(e))}function U(e,t,n,r={}){let{strict:a}=r;Hn(e,t);let i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Ln(i,t,n),i}function I(e){return Math.ceil((e.length-2)/2)}function Ke(e){return jt(e,{dir:"left"})}function Rr(e){return jt(e,{dir:"right"})}function st(e,t={}){let{signed:n}=t;t.size&&_(e,t.size);let r=BigInt(e);if(!n)return r;let a=(e.length-2)/2,i=(1n<<BigInt(a)*8n)-1n,s=i>>1n;return r<=s?r:r-i-1n}function kr(e,t={}){t.size&&_(e,t.size);let n=Ke(e);if(n==="0x")return!1;if(n==="0x1")return!0;throw new ct(e)}function Fr(e,t={}){return E(e,t)}function kn(e,t={}){let{signed:n,size:r}=t;return Number(!n&&!r?e:st(e,t))}function zr(e,t={}){let{size:n}=t,r=E(e);return n&&(Me(r,n),r=zn(r)),new TextDecoder().decode(r)}function yt(e,t={}){let{strict:n=!1}=t;try{return jn(e,{strict:n}),!0}catch{return!1}}var pt=class extends f{constructor({max:t,min:n,signed:r,size:a,value:i}){super(`Number \`${i}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},ct=class extends f{constructor(t){super(`Hex value \`"${t}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}},Ne=class extends f{constructor(t){super(`Value \`${typeof t=="object"?M(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},_e=class extends f{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},Kt=class extends f{constructor(t){super(`Hex value \`"${t}"\` is an odd length (${t.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}},$e=class extends f{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},ue=class extends f{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},Ve=class extends f{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};var We={};Fe(We,{InvalidCompressedPrefixError:()=>ft,InvalidError:()=>dt,InvalidPrefixError:()=>Je,InvalidSerializedSizeError:()=>xt,InvalidUncompressedPrefixError:()=>lt,assert:()=>bt,compress:()=>Mr,from:()=>K,fromBytes:()=>$n,fromHex:()=>Wt,toBytes:()=>qt,toHex:()=>gt,validate:()=>jr});function bt(e,t={}){let{compressed:n}=t,{prefix:r,x:a,y:i}=e;if(n===!1||typeof a=="bigint"&&typeof i=="bigint"){if(r!==4)throw new Je({prefix:r,cause:new lt});return}if(n===!0||typeof a=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new Je({prefix:r,cause:new ft});return}throw new dt({publicKey:e})}function Mr(e){let{x:t,y:n}=e;return{prefix:n%2n===0n?2:3,x:t}}function K(e){let t=(()=>{if(yt(e))return Wt(e);if(Mn(e))return $n(e);let{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return bt(t),t}function $n(e){return Wt(P(e))}function Wt(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new xt({publicKey:e});if(e.length===130){let r=BigInt(U(e,0,32)),a=BigInt(U(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){let r=Number(U(e,0,1)),a=BigInt(U(e,1,33)),i=BigInt(U(e,33,65));return{prefix:r,x:a,y:i}}let t=Number(U(e,0,1)),n=BigInt(U(e,1,33));return{prefix:t,x:n}}function qt(e,t={}){return E(gt(e,t))}function gt(e,t={}){bt(e);let{prefix:n,x:r,y:a}=e,{includePrefix:i=!0}=t;return j(i?S(n,{size:1}):"0x",S(r,{size:32}),typeof a=="bigint"?S(a,{size:32}):"0x")}function jr(e,t={}){try{return bt(e,t),!0}catch{return!1}}var dt=class extends f{constructor({publicKey:t}){super(`Value \`${M(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},Je=class extends f{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},ft=class extends f{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},lt=class extends f{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},xt=class extends f{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${I(me(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var qn={};Fe(qn,{InvalidRError:()=>wt,InvalidSError:()=>Ot,InvalidSerializedSizeError:()=>ht,InvalidVError:()=>Pt,InvalidYParityError:()=>J,MissingPropertiesError:()=>ye,assert:()=>vt,extract:()=>$r,from:()=>Zt,fromBytes:()=>Nn,fromDerBytes:()=>Vr,fromDerHex:()=>_n,fromHex:()=>Yt,fromLegacy:()=>Kn,fromRpc:()=>Jn,fromTuple:()=>Nr,toBytes:()=>_r,toDerBytes:()=>Kr,toDerHex:()=>Jr,toHex:()=>Wn,toLegacy:()=>Wr,toRpc:()=>qr,toTuple:()=>Xr,vToYParity:()=>St,validate:()=>Yr,yParityToV:()=>Qt});var Ia=2n**(8n-1n)-1n,Ua=2n**(16n-1n)-1n,Ga=2n**(24n-1n)-1n,Da=2n**(32n-1n)-1n,Ca=2n**(40n-1n)-1n,Ha=2n**(48n-1n)-1n,La=2n**(56n-1n)-1n,Ra=2n**(64n-1n)-1n,ka=2n**(72n-1n)-1n,Fa=2n**(80n-1n)-1n,za=2n**(88n-1n)-1n,Ma=2n**(96n-1n)-1n,ja=2n**(104n-1n)-1n,$a=2n**(112n-1n)-1n,Va=2n**(120n-1n)-1n,Na=2n**(128n-1n)-1n,_a=2n**(136n-1n)-1n,Ka=2n**(144n-1n)-1n,Ja=2n**(152n-1n)-1n,Wa=2n**(160n-1n)-1n,qa=2n**(168n-1n)-1n,Xa=2n**(176n-1n)-1n,Ya=2n**(184n-1n)-1n,Za=2n**(192n-1n)-1n,Qa=2n**(200n-1n)-1n,ei=2n**(208n-1n)-1n,ti=2n**(216n-1n)-1n,ni=2n**(224n-1n)-1n,ri=2n**(232n-1n)-1n,ai=2n**(240n-1n)-1n,ii=2n**(248n-1n)-1n,si=2n**(256n-1n)-1n,oi=-(2n**(8n-1n)),ui=-(2n**(16n-1n)),pi=-(2n**(24n-1n)),ci=-(2n**(32n-1n)),mi=-(2n**(40n-1n)),yi=-(2n**(48n-1n)),di=-(2n**(56n-1n)),fi=-(2n**(64n-1n)),li=-(2n**(72n-1n)),xi=-(2n**(80n-1n)),bi=-(2n**(88n-1n)),gi=-(2n**(96n-1n)),hi=-(2n**(104n-1n)),wi=-(2n**(112n-1n)),Oi=-(2n**(120n-1n)),Pi=-(2n**(128n-1n)),vi=-(2n**(136n-1n)),Si=-(2n**(144n-1n)),Ei=-(2n**(152n-1n)),Ai=-(2n**(160n-1n)),Bi=-(2n**(168n-1n)),Ti=-(2n**(176n-1n)),Ii=-(2n**(184n-1n)),Ui=-(2n**(192n-1n)),Gi=-(2n**(200n-1n)),Di=-(2n**(208n-1n)),Ci=-(2n**(216n-1n)),Hi=-(2n**(224n-1n)),Li=-(2n**(232n-1n)),Ri=-(2n**(240n-1n)),ki=-(2n**(248n-1n)),Fi=-(2n**(256n-1n)),zi=2n**8n-1n,Mi=2n**16n-1n,ji=2n**24n-1n,$i=2n**32n-1n,Vi=2n**40n-1n,Ni=2n**48n-1n,_i=2n**56n-1n,Ki=2n**64n-1n,Ji=2n**72n-1n,Wi=2n**80n-1n,qi=2n**88n-1n,Xi=2n**96n-1n,Yi=2n**104n-1n,Zi=2n**112n-1n,Qi=2n**120n-1n,es=2n**128n-1n,ts=2n**136n-1n,ns=2n**144n-1n,rs=2n**152n-1n,as=2n**160n-1n,is=2n**168n-1n,ss=2n**176n-1n,os=2n**184n-1n,us=2n**192n-1n,ps=2n**200n-1n,cs=2n**208n-1n,ms=2n**216n-1n,ys=2n**224n-1n,ds=2n**232n-1n,fs=2n**240n-1n,ls=2n**248n-1n,Xt=2n**256n-1n;function vt(e,t={}){let{recovered:n}=t;if(typeof e.r>"u")throw new ye({signature:e});if(typeof e.s>"u")throw new ye({signature:e});if(n&&typeof e.yParity>"u")throw new ye({signature:e});if(e.r<0n||e.r>Xt)throw new wt({value:e.r});if(e.s<0n||e.s>Xt)throw new Ot({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new J({value:e.yParity})}function Nn(e){return Yt(P(e))}function Yt(e){if(e.length!==130&&e.length!==132)throw new ht({signature:e});let t=BigInt(U(e,0,32)),n=BigInt(U(e,32,64)),r=(()=>{let a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return St(a)}catch{throw new J({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function $r(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return Zt(e)}function Zt(e){let t=typeof e=="string"?Yt(e):e instanceof Uint8Array?Nn(e):typeof e.r=="string"?Jn(e):e.v?Kn(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return vt(t),t}function Vr(e){return _n(P(e))}function _n(e){let{r:t,s:n}=nt.Signature.fromDER(me(e).slice(2));return{r:t,s:n}}function Kn(e){return{r:e.r,s:e.s,yParity:St(e.v)}}function Jn(e){let t=(()=>{let n=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=St(n)),typeof r!="number")throw new J({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Nr(e){let[t,n,r]=e;return Zt({r:n==="0x"?0n:BigInt(n),s:r==="0x"?0n:BigInt(r),yParity:t==="0x"?0:Number(t)})}function _r(e){return E(Wn(e))}function Wn(e){vt(e);let t=e.r,n=e.s;return j(S(t,{size:32}),S(n,{size:32}),typeof e.yParity=="number"?S(Qt(e.yParity),{size:1}):"0x")}function Kr(e){return new nt.Signature(e.r,e.s).toDERRawBytes()}function Jr(e){return`0x${new nt.Signature(e.r,e.s).toDERHex()}`}function Wr(e){return{r:e.r,s:e.s,v:Qt(e.yParity)}}function qr(e){let{r:t,s:n,yParity:r}=e;return{r:S(t,{size:32}),s:S(n,{size:32}),yParity:r===0?"0x0":"0x1"}}function Xr(e){let{r:t,s:n,yParity:r}=e;return[r?"0x01":"0x",t===0n?"0x":Ke(S(t)),n===0n?"0x":Ke(S(n))]}function Yr(e,t={}){try{return vt(e,t),!0}catch{return!1}}function St(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Pt({value:e})}function Qt(e){if(e===0)return 27;if(e===1)return 28;throw new J({value:e})}var ht=class extends f{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${I(me(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},ye=class extends f{constructor({signature:t}){super(`Signature \`${M(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},wt=class extends f{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},Ot=class extends f{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},J=class extends f{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},Pt=class extends f{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};var mr={};Fe(mr,{CredentialCreationFailedError:()=>$,CredentialRequestFailedError:()=>qe,createChallenge:()=>sr,createCredential:()=>aa,getAuthenticatorData:()=>or,getClientDataJSON:()=>ur,getCredentialCreationOptions:()=>pr,getCredentialRequestOptions:()=>cr,getSignPayload:()=>ia,sign:()=>sa,verify:()=>oa});var Zr=new TextEncoder,Qr=new TextDecoder,Et=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),At={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function ea(e,t={}){let{pad:n=!0,url:r=!1}=t,a=new Uint8Array(Math.ceil(e.length/3)*4);for(let u=0,p=0;p<e.length;u+=4,p+=3){let m=(e[p]<<16)+(e[p+1]<<8)+(e[p+2]|0);a[u]=Et[m>>18],a[u+1]=Et[m>>12&63],a[u+2]=Et[m>>6&63],a[u+3]=Et[m&63]}let i=e.length%3,s=Math.floor(e.length/3)*4+(i&&i+1),o=Qr.decode(new Uint8Array(a.buffer,0,s));return n&&i===1&&(o+="=="),n&&i===2&&(o+="="),r&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function Xn(e,t={}){return ea(E(e),t)}function Bt(e){let t=e.replace(/=+$/,""),n=t.length,r=new Uint8Array(n+3);Zr.encodeInto(t+"===",r);for(let i=0,s=0;i<t.length;i+=4,s+=3){let o=(At[r[i]]<<18)+(At[r[i+1]]<<12)+(At[r[i+2]]<<6)+At[r[i+3]];r[s]=o>>16,r[s+1]=o>>8&255,r[s+2]=o&255}let a=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,a)}function Zn(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Pn(ce(e));return n==="Bytes"?r:P(r)}function Tt(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=tt(ce(e));return n==="Bytes"?r:P(r)}var er=Sn(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),ta=er.create(BigInt("-3")),na=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),W=En({a:ta,b:na,Fp:er,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},tt),tr=W;function nr(e){let{hash:t,payload:n,publicKey:r,signature:a}=e;return tr.verify(a,n instanceof Uint8Array?n:E(n),gt(r).substring(2),...t?[{prehash:!0,lowS:!0}]:[])}function ar(e){let t=e[4]===0?5:4,n=t+32,r=e[n+2]===0?n+3:n+2,a=BigInt(P(e.slice(t,n))),i=BigInt(P(e.slice(r)));return{r:a,s:i>W.CURVE.n/2n?W.CURVE.n-i:i}}async function ir(e){try{let t=e.getPublicKey();if(!t)throw new $;let n=new Uint8Array(t),r=await crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),a=new Uint8Array(await crypto.subtle.exportKey("raw",r));return K(a)}catch(t){if(t.message!=="Permission denied to access object")throw t;let n=new Uint8Array(e.attestationObject),r=32,a=88,i=u=>{let p=new Uint8Array([u,a,r]);for(let m=0;m<n.length-p.length;m++)if(p.every((x,b)=>n[m+b]===x))return m+p.length;throw new $},s=i(33),o=i(34);return K(new Uint8Array([4,...n.slice(s,s+r),...n.slice(o,o+r)]))}}var sr=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function aa(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...n}=e,r=pr(n);try{let a=await t(r);if(!a)throw new $;let i=a.response,s=await ir(i);return{id:a.id,publicKey:s,raw:a}}catch(a){throw new $({cause:a})}}function or(e={}){let{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,a=Tt(mt(n)),i=S(t,{size:1}),s=S(r,{size:4});return j(a,i,s)}function ur(e){let{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:a=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:Xn(t,{url:!0,pad:!1}),origin:a,crossOrigin:n,...r})}function pr(e){let{attestation:t="none",authenticatorSelection:n={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:r=sr,excludeCredentialIds:a,name:i,rp:s={id:window.location.hostname,name:window.document.title},user:o,extensions:u}=e,p=o?.name??i;return{publicKey:{attestation:t,authenticatorSelection:n,challenge:r,...a?{excludeCredentials:a?.map(m=>({id:Bt(m),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:s,user:{id:o?.id??Zn(ut(p),{as:"Bytes"}),name:p,displayName:o?.displayName??p},extensions:u}}}function cr(e){let{credentialId:t,challenge:n,rpId:r=window.location.hostname,userVerification:a="required"}=e;return{publicKey:{...t?{allowCredentials:[{id:Bt(t),type:"public-key"}]}:{},challenge:E(n),rpId:r,userVerification:a}}}function ia(e){let{challenge:t,crossOrigin:n,extraClientData:r,flag:a,origin:i,rpId:s,signCount:o,userVerification:u="required"}=e,p=or({flag:a,rpId:s,signCount:o}),m=ur({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),x=Tt(mt(m)),b=m.indexOf('"challenge"'),c=m.indexOf('"type"'),O={authenticatorData:p,clientDataJSON:m,challengeIndex:b,typeIndex:c,userVerificationRequired:u==="required"},d=j(p,x);return{metadata:O,payload:d}}async function sa(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...n}=e,r=cr(n);try{let a=await t(r);if(!a)throw new qe;let i=a.response,s=String.fromCharCode(...new Uint8Array(i.clientDataJSON)),o=s.indexOf('"challenge"'),u=s.indexOf('"type"'),p=ar(new Uint8Array(i.signature));return{metadata:{authenticatorData:P(new Uint8Array(i.authenticatorData)),clientDataJSON:s,challengeIndex:o,typeIndex:u,userVerificationRequired:r.publicKey.userVerification==="required"},signature:p,raw:a}}catch(a){throw new qe({cause:a})}}function oa(e){let{challenge:t,hash:n=!0,metadata:r,publicKey:a,signature:i}=e,{authenticatorData:s,challengeIndex:o,clientDataJSON:u,typeIndex:p,userVerificationRequired:m}=r,x=E(s);if(x.length<37)return!1;let b=x[32];if((b&1)!==1||m&&(b&4)!==4||(b&8)!==8&&(b&16)===16)return!1;let c='"type":"webauthn.get"';if(c!==u.slice(Number(p),c.length+1))return!1;let O=u.slice(Number(o)).match(/^"challenge":"(.*?)"/);if(!O)return!1;let[d,g]=O;if(P(Bt(g))!==t)return!1;let B=Tt(ut(u),{as:"Bytes"}),w=ot(x,B);return nr({hash:n,payload:w,publicKey:a,signature:i})}var $=class extends f{constructor({cause:t}={}){super("Failed to create credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}},qe=class extends f{constructor({cause:t}={}){super("Failed to request credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}};var yr={};Fe(yr,{createKeyPair:()=>ua,sign:()=>pa,verify:()=>ca});async function ua(e={}){let{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),a=K(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:a}}async function pa(e){let{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,ce(t)),a=$t(new Uint8Array(r)),i=_t(Nt(a,0,32)),s=_t(Nt(a,32,64));return s>W.CURVE.n/2n&&(s=W.CURVE.n-s),{r:i,s}}async function ca(e){let{payload:t,signature:n}=e,r=await globalThis.crypto.subtle.importKey("raw",qt(e.publicKey),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await globalThis.crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},r,ot(Vt(n.r),Vt(n.s)),ce(t))}function ma(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;let s=u=>u===null?null:JSON.parse(u,t?.reviver),o=(i=n.getItem(a))!=null?i:null;return o instanceof Promise?o.then(s):s(o)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,t?.replacer)),removeItem:a=>n.removeItem(a)}}var en=e=>t=>{try{let n=e(t);return n instanceof Promise?n:{then(r){return en(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return en(r)(n)}}}},ya=(e,t)=>(n,r,a)=>{let i={storage:ma(()=>localStorage),partialize:d=>d,version:0,merge:(d,g)=>({...g,...d}),...t},s=!1,o=new Set,u=new Set,p=i.storage;if(!p)return e((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...d)},r,a);let m=()=>{let d=i.partialize({...r()});return p.setItem(i.name,{state:d,version:i.version})},x=a.setState;a.setState=(d,g)=>{x(d,g),m()};let b=e((...d)=>{n(...d),m()},r,a);a.getInitialState=()=>b;let c,O=()=>{var d,g;if(!p)return;s=!1,o.forEach(w=>{var A;return w((A=r())!=null?A:b)});let B=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(d=r())!=null?d:b))||void 0;return en(p.getItem.bind(p))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){let A=i.migrate(w.state,w.version);return A instanceof Promise?A.then(z=>[!0,z]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var A;let[z,Ye]=w;if(c=i.merge(Ye,(A=r())!=null?A:b),n(c,!0),z)return m()}).then(()=>{B?.(c,void 0),c=r(),s=!0,u.forEach(w=>w(c))}).catch(w=>{B?.(void 0,w)})};return a.persist={setOptions:d=>{i={...i,...d},d.storage&&(p=d.storage)},clearStorage:()=>{p?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>O(),hasHydrated:()=>s,onHydrate:d=>(o.add(d),()=>{o.delete(d)}),onFinishHydration:d=>(u.add(d),()=>{u.delete(d)})},i.skipHydration||O(),c||b},To=ya;var dr=e=>{let t,n=new Set,r=(p,m)=>{let x=typeof p=="function"?p(t):p;if(!Object.is(x,t)){let b=t;t=m??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(c=>c(t,b))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>u,subscribe:p=>(n.add(p),()=>n.delete(p))},u=t=e(r,a,o);return o},Uo=e=>e?dr(e):dr;var de=class extends y{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}};Object.defineProperty(de,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});var C=class extends y{constructor({cause:t,data:n,message:r}={}){let a=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}};Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(C,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});var fe=class extends y{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}};Object.defineProperty(fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});var le=class extends y{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}};Object.defineProperty(le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});var xe=class extends y{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}};Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});var be=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}};Object.defineProperty(be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});var ge=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}};Object.defineProperty(ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});var he=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}};Object.defineProperty(he,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});var we=class extends y{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}};Object.defineProperty(we,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});var Oe=class extends y{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}};Object.defineProperty(Oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});var Pe=class extends y{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}};Object.defineProperty(Pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});var ve=class extends y{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}};Object.defineProperty(ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});var Se=class extends y{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}};Object.defineProperty(Se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});var q=class extends y{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}};Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var Ee=class extends y{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}};Object.defineProperty(Ee,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});var H=class extends y{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}};Object.defineProperty(H,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(H,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});var Ae=class extends y{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}};Object.defineProperty(Ae,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});var Be=class extends y{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}};Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});var X=class extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}};Object.defineProperty(X,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});var Y=class extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}};Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});var Te=class extends y{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}};Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});var Ie=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}};Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});var Z=class extends y{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}};Object.defineProperty(Z,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});var Ue=class extends y{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}};Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});var Q=class extends y{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}};Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});var Ge=class extends y{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}};Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});var De=class extends y{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}};Object.defineProperty(De,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});var Ce=class extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}};Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});var He=class extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}};Object.defineProperty(He,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});var ee=class extends y{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}};Object.defineProperty(ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});var te=class extends y{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}};Object.defineProperty(te,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});var ne=class extends y{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}};Object.defineProperty(ne,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});var re=class extends y{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}};Object.defineProperty(re,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});var It=class extends y{constructor({cause:t}){super(`An error occurred while executing user operation: ${t?.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}},Le=class extends y{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}};Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});var Re=class extends y{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}};Object.defineProperty(Re,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var Ut=class extends y{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:i,factoryData:s,initCode:o,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:m,paymaster:x,paymasterAndData:b,paymasterData:c,paymasterPostOpGasLimit:O,paymasterVerificationGasLimit:d,preVerificationGas:g,sender:B,signature:w,verificationGasLimit:A}){let z=sn({callData:n,callGasLimit:r,factory:i,factoryData:s,initCode:o,maxFeePerGas:typeof u<"u"&&`${Ft(u)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${Ft(p)} gwei`,nonce:m,paymaster:x,paymasterAndData:b,paymasterData:c,paymasterPostOpGasLimit:O,paymasterVerificationGasLimit:d,preVerificationGas:g,sender:B,signature:w,verificationGasLimit:A});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",z].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Gt=class extends y{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}},Dt=class extends y{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}},Xe=class extends y{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}};var da=[C,q,H,X,Y,Z,Q,re,ee,te,ne];function fr(e,t){let n=(e.details||"").toLowerCase();if(de.message.test(n))return new de({cause:e});if(fe.message.test(n))return new fe({cause:e});if(le.message.test(n))return new le({cause:e});if(xe.message.test(n))return new xe({cause:e});if(be.message.test(n))return new be({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ge.message.test(n))return new ge({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(he.message.test(n))return new he({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(we.message.test(n))return new we({cause:e});if(Oe.message.test(n))return new Oe({cause:e});if(ve.message.test(n))return new ve({cause:e,nonce:t.nonce});if(Pe.message.test(n))return new Pe({cause:e});if(Se.message.test(n))return new Se({cause:e});if(Ee.message.test(n))return new Ee({cause:e});if(H.message.test(n))return new H({cause:e});if(Ae.message.test(n))return new Ae({cause:e});if(Be.message.test(n))return new Be({cause:e});if(Te.message.test(n))return new Te({cause:e});if(Ue.message.test(n))return new Ue({cause:e});if(Ie.message.test(n))return new Ie({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ge.message.test(n))return new Ge({cause:e});if(De.message.test(n))return new De({cause:e});if(He.message.test(n))return new He({cause:e});if(Ce.message.test(n))return new Ce({cause:e});if(Le.message.test(n))return new Le({cause:e});if(Re.message.test(n))return new Re({cause:e});let r=e.walk(a=>da.some(i=>i.code===a.code));if(r){if(r.code===C.code)return new C({cause:e,data:r.data,message:r.details});if(r.code===q.code)return new q({cause:e});if(r.code===H.code)return new H({cause:e});if(r.code===X.code)return new X({cause:e});if(r.code===Y.code)return new Y({cause:e});if(r.code===Z.code)return new Z({cause:e});if(r.code===Q.code)return new Q({cause:e});if(r.code===re.code)return new re({cause:e});if(r.code===ee.code)return new ee({cause:e});if(r.code===te.code)return new te({cause:e});if(r.code===ne.code)return new ne({cause:e})}return new It({cause:e})}function Ct(e,{calls:t,docsPath:n,...r}){let a=(()=>{let i=fr(e,r);if(t&&i instanceof C){let s=fa(i),o=t?.filter(u=>u.abi);if(s&&o.length>0)return la({calls:o,revertData:s})}return i})();return new Ut(a,{docsPath:n,...r})}function fa(e){let t;return e.walk(n=>{let r=n;if(typeof r.data=="string"||typeof r.data?.revertData=="string"||!(r instanceof y)&&typeof r.message=="string"){let a=(r.data?.revertData||r.data||r.message).match?.(/(0x[A-Za-z0-9]*)/);if(a)return t=a[1],!0}return!1}),t}function la(e){let{calls:t,revertData:n}=e,{abi:r,functionName:a,args:i,to:s}=(()=>{let u=t?.filter(m=>!!m.abi);if(u.length===1)return u[0];let p=u.filter(m=>{try{return!!rn({abi:m.abi,data:n})}catch{return!1}});return p.length===1?p[0]:{abi:[],functionName:u.reduce((m,x)=>`${m?`${m} | `:""}${x.functionName}`,""),args:void 0,to:void 0}})(),o=n==="0x"?new pn({functionName:a}):new un({abi:r,data:n,functionName:a});return new on(o,{abi:r,args:i,contractAddress:s,functionName:a})}function lr(e){let t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function V(e){let t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=h(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=h(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=h(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=h(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=h(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=h(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=h(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=h(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=xa(e.authorization)),t}function xa(e){return{address:e.address,chainId:h(e.chainId),nonce:h(e.nonce),r:e.r?h(BigInt(e.r),{size:32}):G("0x",{size:32}),s:e.s?h(BigInt(e.s),{size:32}):G("0x",{size:32}),yParity:e.yParity?h(e.yParity,{size:1}):G("0x",{size:32})}}async function xr(e,t){let{chainId:n,entryPointAddress:r,context:a,...i}=t,s=V(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:u,...p}=await e.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,h(n),a]});return{...p,...o&&{paymasterPostOpGasLimit:ae(o)},...u&&{paymasterVerificationGasLimit:ae(u)}}}async function br(e,t){let{chainId:n,entryPointAddress:r,context:a,...i}=t,s=V(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:u,...p}=await e.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,h(n),a]});return{...p,...o&&{paymasterPostOpGasLimit:ae(o)},...u&&{paymasterVerificationGasLimit:ae(u)}}}var ba=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function ke(e,t){let n=t,{account:r=e.account,parameters:a=ba,stateOverride:i}=n;if(!r)throw new se;let s=ie(r),o=e,u=n.paymaster??o?.paymaster,p=typeof u=="string"?u:void 0,{getPaymasterStubData:m,getPaymasterData:x}=(()=>{if(u===!0)return{getPaymasterStubData:l=>T(o,br,"getPaymasterStubData")(l),getPaymasterData:l=>T(o,xr,"getPaymasterData")(l)};if(typeof u=="object"){let{getPaymasterStubData:l,getPaymasterData:v}=u;return{getPaymasterStubData:v&&l?l:v,getPaymasterData:v&&l?v:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),b=n.paymasterContext?n.paymasterContext:o?.paymasterContext,c={...n,paymaster:p,sender:s.address},[O,d,g,B,w]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(l=>{let v=l;return v.abi?{data:nn(v),to:v.to,value:v.value}:v})):n.callData)(),(async()=>{if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};let{factory:l,factoryData:v}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:l&&v?R([l,v]):void 0}:{factory:l,factoryData:v}})(),(async()=>{if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return c;if(o?.userOperation?.estimateFeesPerGas){let l=await o.userOperation.estimateFeesPerGas({account:s,bundlerClient:o,userOperation:c});return{...c,...l}}try{let l=o.client??e,v=await T(l,yn,"estimateFeesPerGas")({chain:l.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*v.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*v.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await wn(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof O<"u"&&(c.callData=O),typeof d<"u"&&(c={...c,...d}),typeof g<"u"&&(c={...c,...g}),typeof B<"u"&&(c.nonce=B),typeof w<"u"&&(c.authorization=w),a.includes("signature")&&(typeof n.signature<"u"?c.signature=n.signature:c.signature=await s.getStubSignature(c)),s.entryPoint.version==="0.6"&&!c.initCode&&(c.initCode="0x");let A;async function z(){return A||(e.chain?e.chain.id:(A=await T(e,Qe,"getChainId")({}),A))}let Ye=!1;if(a.includes("paymaster")&&m&&!p&&!n.paymasterAndData){let{isFinal:l=!1,sponsor:v,...Ar}=await m({chainId:await z(),entryPointAddress:s.entryPoint.address,context:b,...c});Ye=l,c={...c,...Ar}}if(s.entryPoint.version==="0.6"&&!c.paymasterAndData&&(c.paymasterAndData="0x"),a.includes("gas")){if(s.userOperation?.estimateGas){let l=await s.userOperation.estimateGas(c);c={...c,...l}}if(typeof c.callGasLimit>"u"||typeof c.preVerificationGas>"u"||typeof c.verificationGasLimit>"u"||c.paymaster&&typeof c.paymasterPostOpGasLimit>"u"||c.paymaster&&typeof c.paymasterVerificationGasLimit>"u"){let l=await T(o,Ht,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...c.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...c});c={...c,callGasLimit:c.callGasLimit??l.callGasLimit,preVerificationGas:c.preVerificationGas??l.preVerificationGas,verificationGasLimit:c.verificationGasLimit??l.verificationGasLimit,paymasterPostOpGasLimit:c.paymasterPostOpGasLimit??l.paymasterPostOpGasLimit,paymasterVerificationGasLimit:c.paymasterVerificationGasLimit??l.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&x&&!p&&!n.paymasterAndData&&!Ye){let l=await x({chainId:await z(),entryPointAddress:s.entryPoint.address,context:b,...c});c={...c,...l}}return delete c.calls,delete c.parameters,delete c.paymasterContext,typeof c.paymaster!="string"&&delete c.paymaster,c}async function Ht(e,t){let{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new se;let i=n?ie(n):void 0,s=cn(a),o=i?await T(e,ke,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{let u=[V(o),r??i?.entryPoint?.address],p=await e.request({method:"eth_estimateUserOperationGas",params:s?[...u,s]:[...u]});return lr(p)}catch(u){let p=t.calls;throw Ct(u,{...o,...p?{calls:p}:{}})}}function gr(e){return e.request({method:"eth_supportedEntryPoints"})}function hr(e){let t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function wr(e,{hash:t}){let n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new Dt({hash:t});let{blockHash:r,blockNumber:a,entryPoint:i,transactionHash:s,userOperation:o}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:i,transactionHash:s,userOperation:hr(o)}}function Or(e){let t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>fn(n))),e.receipt&&(t.receipt=ln(t.receipt)),t}async function Lt(e,{hash:t}){let n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new Gt({hash:t});return Or(n)}async function Pr(e,t){let{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new se;let a=n?ie(n):void 0,i=a?await T(e,ke,"prepareUserOperation")(t):t,s=t.signature||await a?.signUserOperation?.(i),o=V({...i,signature:s});try{return await e.request({method:"eth_sendUserOperation",params:[o,r??a?.entryPoint?.address]},{retryCount:0})}catch(u){let p=t.calls;throw Ct(u,{...i,...p?{calls:p}:{},signature:s})}}function vr(e,t){let{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:i=12e4}=t,s=0,o=an(["waitForUserOperationReceipt",e.uid,n]);return new Promise((u,p)=>{let m=gn(o,{resolve:u,reject:p},x=>{let b=O=>{c(),O(),m()},c=hn(async()=>{a&&s>=a&&b(()=>x.reject(new Xe({hash:n})));try{let O=await T(e,Lt,"getUserOperationReceipt")({hash:n});b(()=>x.resolve(O))}catch(O){let d=O;d.name!=="UserOperationReceiptNotFoundError"&&b(()=>x.reject(d))}s++},{emitOnBegin:!0,interval:r});return i&&setTimeout(()=>b(()=>x.reject(new Xe({hash:n}))),i),c})})}function Sr(e){return{estimateUserOperationGas:t=>Ht(e,t),getChainId:()=>Qe(e),getSupportedEntryPoints:()=>gr(e),getUserOperation:t=>wr(e,t),getUserOperationReceipt:t=>Lt(e,t),prepareUserOperation:t=>ke(e,t),sendUserOperation:t=>Pr(e,t),waitForUserOperationReceipt:t=>vr(e,t)}}function ga(e){let{client:t,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:i,transport:s,userOperation:o}=e;return Object.assign(On({...e,chain:e.chain??t?.chain,key:n,name:r,transport:s,type:"bundlerClient"}),{client:t,paymaster:a,paymasterContext:i,userOperation:o}).extend(Sr)}var ha=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Rt(e){let{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";let a=t.address;return R([a,r??"0x"])}return n?R([n,r??"0x"]):"0x"}function kt(e){let{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:i,paymasterData:s,paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:u,sender:p,signature:m="0x",verificationGasLimit:x}=e,b=R([G(h(x||0n),{size:16}),G(h(t||0n),{size:16})]),c=Rt(e),O=R([G(h(r||0n),{size:16}),G(h(a||0n),{size:16})]),d=e.nonce??0n,g=i?R([i,G(h(u||0n),{size:16}),G(h(o||0n),{size:16}),s||"0x"]):"0x",B=e.preVerificationGas??0n;return{accountGasLimits:b,callData:n,initCode:c,gasFees:O,nonce:d,paymasterAndData:g,preVerificationGas:B,sender:p,signature:m}}var wa={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function Er(e){let{chainId:t,entryPointAddress:n,userOperation:r}=e,a=kt(r);return{types:wa,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function Oa(e){let{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:i,callData:s="0x",callGasLimit:o,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:m,paymasterAndData:x="0x",preVerificationGas:b,sender:c,verificationGasLimit:O}=a;if(r==="0.8")return bn(Er({chainId:t,entryPointAddress:n,userOperation:a}));let d=(()=>{if(r==="0.6"){let g=a.initCode?.slice(0,42),B=a.initCode?.slice(42),w=Rt({authorization:i,factory:g,factoryData:B});return Ze([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[c,m,L(w),L(s),o,O,b,u,p,L(x)])}if(r==="0.7"){let g=kt(a);return Ze([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[g.sender,g.nonce,L(g.initCode),L(g.callData),g.accountGasLimits,g.preVerificationGas,g.gasFees,L(g.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return L(Ze([{type:"bytes32"},{type:"address"},{type:"uint256"}],[L(d),n,BigInt(t)]))}async function Pa(e){let{extend:t,nonceKeyManager:n=xn({source:{get(){return Date.now()},set(){}}}),...r}=e,a=!1,i=await e.getAddress();return{...t,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(s){let o=s?.key??BigInt(await n.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...s,key:o}):await mn(e.client,{abi:tn(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,o]})},async isDeployed(){return a?!0:(a=!!await T(e.client,dn,"getCode")({address:i}),a)},...e.sign?{async sign(s){let[{factory:o,factoryData:u},p]=await Promise.all([this.getFactoryArgs(),e.sign(s)]);return o&&u?et({address:o,data:u,signature:p}):p}}:{},async signMessage(s){let[{factory:o,factoryData:u},p]=await Promise.all([this.getFactoryArgs(),e.signMessage(s)]);return o&&u&&o!=="0x7702"?et({address:o,data:u,signature:p}):p},async signTypedData(s){let[{factory:o,factoryData:u},p]=await Promise.all([this.getFactoryArgs(),e.signTypedData(s)]);return o&&u&&o!=="0x7702"?et({address:o,data:u,signature:p}):p},type:"smart"}}var va="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";export{ma as a,To as b,Uo as c,ha as d,Oa as e,Pa as f,ga as g,va as h,F as i,We as j,Yt as k,qn as l,mr as m,yr as n};
/*! Bundled license information:

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
